webpackJsonp([109,129],{"6bcW":function(t,e,a){"use strict";var n=a("woOf"),i=a.n(n),r=a("g4Hp"),o=a.n(r),l=a("bsze"),c=a("b7Sj");e.a={name:"Article",props:{minCalibration:{type:[String,Number],default:50},startDate:{type:Object},label:{type:String},data:{type:Object},type:{type:String},todayDetail:{type:Object},start:{type:String},end:{type:String},sideBar:{type:Boolean}},data:function(){return{boxDetail:{},planDetail:{},actualDetail:{},leftEndpoint:this.startDate,secondObj:{},picColor:"",lineDetail:{}}},mounted:function(){this.getBoxWidthAndOffice()},watch:{startDate:{handler:function(){this.leftEndpoint=this.startDate,this.getBoxWidthAndOffice()}}},methods:{getBackground:function(){var t=this.data.status;return"DISABLE"==t?"#bfc4cf":"AVAILABLE"!=t||this.data.startDate||this.data.endDate?"OFF"!=t||this.data.startDate||this.data.endDate?void 0:"#E4E4E4":"#BCE590"},toolOver:function(t,e){t.cancelBubble=!0;var a={startTime:this.start,endTime:this.end};c.a.poptipOver(t,this.data,e,a,this.sideBar)},toolOut:function(t){var e=document.getElementById("gantt-chart-tool-tip"),a=document.getElementById("gantt-chart-tool-tip-triangle");e.style.opacity=0,a.style.opacity=0},getLabelColor:function(){var t=this.data.status;return c.a.getLabelColor(t)},getBoxWidthAndOffice:function(){var t=i()({},this.data);if(t.startDate||t.endDate){var e=t.startDate?o.a.dateToStr("YYYY-MM-DD",new Date(+t.startDate)):this.start,a=t.endDate?o.a.dateToStr("YYYY-MM-DD",new Date(+t.endDate)):this.end,n=this.leftEndpoint.year+"-"+this.leftEndpoint.month+"-"+this.leftEndpoint.start;this.planDetail={width:l.a.dateDiff(e,a)+1,office:l.a.dateDiff(n,e)}}}}}},"9pIO":function(t,e,a){"use strict";function n(t,e){if(t)for(var a=t.querySelectorAll(".ivu-table-sort"),n=0;n<a.length;n++){var r=a[n];r.style.width="auto",r.style.height="40px";var o=r.parentNode,l=o.querySelectorAll("span")[0].innerHTML;i(r,t,l,e)}}function i(t,e,a,n){t.innerHTML="";var i=document.createElement("span");i.className=o("init"),t.appendChild(i),i.onclick=function(t){var i=t.target,c=i.className;l(e),i.className=o(c),n({label:a,order:r(c)})}}function r(t){return"kr-table-sort-icon-asc"===t?"desc":"asc"}function o(t){switch(t){case"kr-table-sort-icon-init":return"kr-table-sort-icon-asc";case"kr-table-sort-icon-asc":return"kr-table-sort-icon-desc";case"kr-table-sort-icon-desc":return"kr-table-sort-icon-asc";default:return"kr-table-sort-icon-init"}}function l(t){for(var e=t.querySelectorAll(".ivu-table-sort span"),a=0;a<e.length;a++){e[a].className=o("init")}}e.a=n},Asao:function(t,e,a){"use strict";function n(){switch((0,Object.prototype.toString.call)(0)){case"[object String]":return"string";case"[object Number]":return"number";case"[object Boolean]":return"boolean";case"[object Symbol]":return"symbol";case"[object Undefined]":return"undefined";case"[object Null]":return"null";case"[object Function]":return"function";case"[object Date]":return"date";case"[object Array]":return"array";case"[object RegExp]":return"regExp";case"[object Error]":return"error";case"[object HTMLDocument]":return"node";case"[object global]":return"global"}}e.a=n},Eqh0:function(t,e,a){"use strict";function n(t){if(t){return r.a.dateToStr("YYYY/MM/DD HH:mm:SS",new Date(t)).replace(/\//g,"-")}return""}var i=a("g4Hp"),r=a.n(i);e.a=n},FeiG:function(t,e,a){"use strict";var n=a("woOf"),i=a.n(n),r=a("WS14");e.a={components:{Article:r.default},props:{data:{type:Object},leftEndpoint:{type:Object},minCalibration:{type:[String,Number]},id:{type:[String,Number]},todayDetail:{type:Object},start:{type:String},end:{type:String},sideBar:{type:Boolean}},data:function(){return{showData:[],channel:0,isLoading:!0}},mounted:function(){var t=this;this.data.tasks&&this.data.tasks.length&&(this.showData=[].concat(this.allDataFor(this.data.tasks))),setTimeout(function(){var e=document.querySelectorAll('div[data-box-id="'+t.showData.id+'"]')[0],a=document.querySelectorAll('div[data-article-id="'+t.showData.id+'"]')[0];e&&a&&(e.offsetHeight>a.offsetHeight?a.style.height=e.offsetHeight+"px":e.style.height=a.offsetHeight+"px")},100)},methods:{allDataFor:function(t){var e=[].concat(this.allArrSort(t)),a=[],n=i()({},e[0]);n.key=this.channel,a[this.channel]=[n];for(var r=1;r<e.length;r++)if(e[r].data.planStartTime){var o=e[r],l=this.getChannelMin(a),c=this.getMaxAndMin(l).max,s=this.getMaxAndMin(o).min;if(s>c)o.key=l.key,a[l.key].push(o);else{o.key=this.channel;var d=[o];a.push(d),this.channel++}}return a},getChannelMin:function(t){for(var e=[].concat(t),a=[],n=0;n<e.length;n++)a.push(e[n][e[n].length-1]);var r=a[0];if(r.min=this.getMaxAndMin(r).max,1===a.length)a[0];else for(var n=1;n<a.length;n++){var o=a[n];o.min=this.getMaxAndMin(o).max,r.min>o.Object&&(r=o)}return i()({},r)},allArrSort:function(t){for(var e=[].concat(t),a="",n=0;n<e.length;n++){a=!1;for(var r=0;r<e.length-1-n;r++)if(this.getMaxAndMin(e[r]).min>this.getMaxAndMin(e[r+1]).min){a=!0;var o=i()({},e[r+1]);e[r+1]=i()({},e[r]),e[r]=i()({},o)}if(!a)break}return e},getMaxAndMin:function(t){var e=[];t.data.actualStartTime&&t.data.actualEndTime&&(e.push(t.data.actualStartTime),e.push(t.data.actualEndTime)),t.data.planStartTime&&t.data.planEndTime&&(e.push(t.data.planStartTime),e.push(t.data.planEndTime));for(var a=e[0],n=e[0],i=1;i<e.length;i++)a<e[i]&&(a=e[i]),n>e[i]&&(n=e[i]);return{min:n,max:a}}}}},IoNu:function(t,e){t.exports=function(t,e,a,n){function i(){function i(){o=Number(new Date),a.apply(c,d)}function l(){r=void 0}var c=this,s=Number(new Date)-o,d=arguments;n&&!r&&i(),r&&clearTimeout(r),void 0===n&&s>t?i():!0!==e&&(r=setTimeout(n?l:i,void 0===n?t-s:t))}var r,o=0;return"boolean"!=typeof e&&(n=a,a=e,e=void 0),i}},J9W9:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"view-article",attrs:{"data-article-id":t.id}},[t.data&&t.data.timeLine&&t.data.timeLine.length?a("div",{staticClass:"view-channel"},t._l(t.data.timeLine,function(e){return t.leftEndpoint.year?a("Article",{key:e.id,attrs:{minCalibration:t.minCalibration,startDate:t.leftEndpoint,data:e,todayDetail:t.todayDetail,start:t.start,end:t.end,sideBar:t.sideBar}}):t._e()})):t._e()])},i=[],r={render:n,staticRenderFns:i};e.a=r},MlqY:function(t,e,a){"use strict";function n(t){a("u8nY")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("FeiG"),r=a("J9W9"),o=a("VU/8"),l=n,c=o(i.a,r.a,!1,l,"data-v-c9732fc0",null);e.default=c.exports},NoeY:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".every-view-col{height:32px;position:absolute;top:11px;width:100%;left:0}.every-view-col .tag{width:50px;position:absolute;background:#e0c4f0;top:0;left:0;height:100%;opacity:.1}.every-view-col .ivu-tooltip{height:30px}.every-view-col .ivu-tooltip-popper .ivu-tooltip-arrow{display:none}.every-view-col:last-child{margin-top:0;border-top:none}.every-view-col:last-child .every-view-col{top:0}.every-view-col .ivu-poptip-rel{background:transparent}.every-view-col .article{position:relative;background:transparent;height:30px;top:0;width:100%}.every-view-col .article .line{border-bottom:1px dashed #e9f0f6;position:relative;top:19px;z-index:1}.every-view-col .article .label{position:absolute;height:29px;line-height:30px;padding-left:6px;z-index:3;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background:transparent;font-weight:700;top:2px}.every-view-col .article .plan{height:32px;line-height:32px;color:#666;top:0}.every-view-col .article .actual,.every-view-col .article .plan{padding-left:6px;position:absolute;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-weight:700;z-index:2}.every-view-col .article .actual{height:29px;border-radius:7px 7px 8px 8px;line-height:30px;color:#fff;cursor:pointer;top:2px}",""])},PrZs:function(t,e,a){var n=a("NoeY");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("48647bba",n,!0,{sourceMap:!1})},"Rv9+":function(t,e,a){"use strict";var n=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"every-view-col",style:{background:this.getBackground()},on:{mouseenter:function(e){t.toolOver(e,"2")},mouseleave:function(e){t.toolOut(e,"2")}}},[n("div",{staticClass:"article"},[n("div",{staticClass:"plan",style:{background:this.getLabelColor(),width:e.planDetail.width*e.minCalibration+"px",left:e.planDetail.office*e.minCalibration+"px",color:"#666666"},on:{mouseenter:function(a){t.toolOver(a,e.data.status)},mouseleave:function(a){t.toolOut(a,e.data.status)}}})])])},i=[],r={render:n,staticRenderFns:i};e.a=r},"Ta+G":function(t,e,a){"use strict";function n(t){var e=t.type;return"DOMMouseScroll"!=e&&"mousewheel"!=e||(t.delta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3),t.srcElement&&!t.target&&(t.target=t.srcElement),t.preventDefault||void 0===t.returnValue||(t.preventDefault=function(){t.returnValue=!1}),t}var i=function(t,e,a,i){console.log("-------"),window.addEventListener?("mousewheel"===e&&void 0!==document.mozFullScreen&&(e="DOMMouseScroll"),t.addEventListener(e,function(t){a(n(t))},i||!1)):window.attachEvent&&t.attachEvent("on"+e,function(t){t=t||window.event,a(n(t))})};e.a=i},U6k9:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".view-article[data-v-c9732fc0]{position:relative;background:#fff;height:54px;border-bottom:1px solid #f1f1f1}.view-article[data-v-c9732fc0]:first-child{margin-top:0;border-top:none}.view-article .view-channel[data-v-c9732fc0]{position:relative;width:100%}",""])},WS14:function(t,e,a){"use strict";function n(t){a("PrZs")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("6bcW"),r=a("Rv9+"),o=a("VU/8"),l=n,c=o(i.a,r.a,!1,l,null,null);e.default=c.exports},b7Sj:function(t,e,a){"use strict";function n(t){return new Date(t+" 00:00:00").getTime()}function i(t,e){return new Date(t,e,0).getDate()}function r(t,e,a,n,i){var r=t||window.event,c=t.target,s=c.getBoundingClientRect(),d=document.getElementById("layout-content-main"),u=document.getElementById("gantt-chart-tool-tip"),p=document.getElementById("gantt-chart-tool-tip-triangle"),f={left:i?r.clientX:r.clientX+160,top:(r.clientY<s.top?r.clientY:s.top)+s.height},h=o(e,a,n);u.innerHTML=h.str,u.style.left=f.left-215+"px",u.style.top=f.top+10+d.scrollTop-345+"px",u.style.width=h.width+"px",p.style.left=f.left+5-215+"px",p.style.top=f.top+d.scrollTop-345+"px",l(u,f.left-30,f.left-30+h.width,i),u.style.opacity=1,p.style.opacity=1}function o(t,e,a){var n="",i=280,r=h()({},t);"NOT_EFFECT"==e?n="合同未生效":"IN_RENT"==e?(n="在租",i=235):"AVAILABLE"==e||"AVAILABLE"==t.status&&"2"==e?(i=r.endDate?235:163,n="未租"):"OFF"==e||"OFF"==t.status&&"2"==e?(i=r.endDate?235:163,n="下架"):"DISABLE"==t.status&&"2"==e&&(n="不可用",i=180);var o='<div class="title">'+n+"：</div>";return o+='<div class="content">'+(r.startDate?g.a.dateToStr("YYYY-MM-DD",new Date(r.startDate)):a.startTime)+" 至 "+(r.endDate?g.a.dateToStr("YYYY-MM-DD",new Date(r.endDate)):"-")+"</div>",{str:o,width:i}}function l(t,e,a,n){var i=document.getElementById("vue-chart-right-draw-content"),r=(document.getElementById("gantt-chart-tool-tip-triangle"),document.getElementById("layout-content-main"),t.getBoundingClientRect(),i.getBoundingClientRect()),o=document.body.clientWidth,l=o-r.right,c=o-a-20;n?l>c&&(t.style.left=e-(l-c)-180-30+"px"):l>c+150&&(t.style.left=e-(l-c)-180+170-30+"px")}function c(){var t=document.getElementById("vue-chart-left-table-list"),e=document.getElementById("vue-chart-right-draw-content"),a=document.documentElement.clientHeight,n=document.getElementById("layout-content-main");n&&(n.style.height=document.documentElement.clientHeight-130+"px"),t&&(t.style.maxHeight=a-362+"px"),e&&(e.style.maxHeight=a-362+"px")}function s(t,e){var a="";t=t.replace("-","/");var n=new Date(t+" 00:00:00").getTime(),i=new Date,r=i.getTime(),o=e;return a=n<o?n:o,a=a<r?a:r,g.a.dateToStr("YYYY-MM-DD",new Date(a))}function d(t,e){t=t.replace("-","/"),e=e.replace("-","/");var a="",n=new Date(t+" 00:00:00").getTime(),i=new Date(e+" 00:00:00").getTime();return a=n>i?n:i,g.a.dateToStr("YYYY-MM-DD",new Date(a))}function u(t){return"NOT_EFFECT"===t?"#fea877":"IN_RENT"===t?"#fedc82":"AVAILABLE"===t?"#BCE590":"OFF"===t?"#E4E4E4":void 0}function p(t){var e=Object.prototype.toString.call(t);return t?"[object Date]"===e?g.a.dateToStr("YYYY-MM-DD HH:mm:SS",new Date(t)):"[object String]"===e?t+" 00:00:00":void 0:""}var f=a("woOf"),h=a.n(f),v=a("g4Hp"),g=a.n(v);a("bsze");e.a={getMonthDayNum:i,poptipOver:r,windowResize:c,compareEndTime:d,compareTime:s,getLabelColor:u,timeToStr:p,dayToTime:n}},bsze:function(t,e,a){"use strict";function n(t){var e=["角","分"],a=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],n=[["元","万","亿"],["","拾","佰","仟"]],i=t<0?"负":"";t=Math.abs(t);var r="",o=(t+"").split(".").length,l="00";o>1&&(l=(t+"").split(".")[1]);for(var c=0;c<e.length;c++)a[l[c]]&&(r+=(a[l[c]]+e[c]).replace(/零./,""));r=r||"整",t=Math.floor(t);for(var c=0;c<n[0].length&&t>0;c++){for(var s="",d=0;d<n[1].length&&t>0;d++)s=a[t%10]+n[1][d]+s,t=Math.floor(t/10);r=s.replace(/(零.)*零$/,"").replace(/^$/,"零")+n[0][c]+r}return i+r.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}function i(t){for(var e in t)t[e]=""}function r(t,e){var a=[];for(var n in t)t.hasOwnProperty(n)&&a.push(n+"="+t[n]);var e=e+"?"+a.join("&");window.location.href=e}function o(){var t=location.search,e=new Object;if(-1!=t.indexOf("?"))for(var a=t.substr(1),n=a.split("&"),i=0;i<n.length;i++)e[n[i].split("=")[0]]=unescape(n[i].split("=")[1]);return e}function l(t){var e=window.location.href,a=e.split("?")[0],n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(i+"="+t[i]);a=a+"?"+n.join("&"),location.href=a}function c(t){for(var e,a=0,n={},i=[];e=t[a++];){var r=e.id;n[r]||(n[r]=!0,i.push(e))}return i}function s(t,e,a,n){for(var i=0;i<e.length;i++)for(var r=0;r<t.length;r++){var o=a?t[r][a]:t[r],l=n?e[i][n]:e[i];o==l&&t.splice(r,1)}return t}function d(t,e){var a=document.createElement("a");a.href=t,a.download=e,console.log("a--",a,t,e),a.click()}function u(t,e){var a=document.createElement("a");a.href=t,a.target="_blank",a.download=e,a.click()}function p(t,e){return e=parseInt(e,10),new Date(t,e,0).getDate()}function f(t,e){var a,n,i;return a=t.split("-"),n=new Date(a[1]+"/"+a[2]+"/"+a[0]),a=e.split("-"),i=new Date(a[1]+"/"+a[2]+"/"+a[0]),parseInt(Math.abs(n-i)/1e3/60/60/24)}function h(t,e,a){return void 0===a?x()(t,e,!1):x()(t,a,!1!==e)}function v(t,e){var a=new Date(t),n=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e);a.getFullYear(),a.getMonth(),a.getDate();return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()}function g(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div"),a=e.style;a.position="absolute",a.top=0,a.left=0,a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;return n===i&&(i=e.clientWidth),document.body.removeChild(e),n-i}function m(t,e){var a,n,i;return a=t.split("-"),n=new Date(a[1]+"/"+a[2]+"/"+a[0]),a=e.split("-"),i=new Date(a[1]+"/"+a[2]+"/"+a[0]),parseInt(Math.abs(n-i)/1e3/60/60/24)}var y=a("syeK"),b=a("Ta+G"),w=a("Asao"),D=a("IoNu"),x=a.n(D),E=a("Eqh0"),M=a("9pIO");e.a={smalltoBIG:n,clearForm:i,commonExport:r,getRequest:o,addParams:l,arrayNoRepeat:c,arrayCompare:s,thousand:y.a,downFile:d,addEvent:b.a,dataType:w.a,getDaysInOneMonth:p,dateDiff:f,debounce:h,getScrollBarSize:g,dateCompatible:E.a,tableSort:M.a,dateRange:v,downImg:u,timeRange:m}},syeK:function(t,e,a){"use strict";function n(t){if(null===t||void 0===t)return 0;if(isNaN(t))return"NaN";var e=t.toString();if(/^-?\d+\.?\d+$/.test(e))if(/^-?\d+$/.test(e))e=e.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");else{var a=e.split("."),n=a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");e=n+"."+a[1]}return e}e.a=n},u8nY:function(t,e,a){var n=a("U6k9");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("3ce8ca0f",n,!0,{sourceMap:!1})}});
//# sourceMappingURL=view-article.e844aa732c1fed35578a.js.map