webpackJsonp([87],{"4O/J":function(t,e,i){"use strict";e.a={name:"detailStyle",props:["info"]}},EM8q:function(t,e,i){"use strict";var o=i("J0i4"),n=i("yWLh"),a=i("tnTj");e.a={components:{SectionTitle:o.a,DetailStyle:n.a,IconTip:a.a},head:function(){return{title:"新建通知"}},data:function(){return{formItem:{title:"",content:"",targetType:"1",jumpType:"0",cmtId:"",gender:"3",push:"0",birthMonth:"",leader:""},titleLength:20,contentLength:200,personNum:0,communityList:[],communityLoading:!1,imgUrl:"",countParams:{cmtId:"",birthMonth:"",enterTime:"",gender:"",leader:""},birthMonth:"",leader:"",genderList:[{label:"不限",value:"3"},{label:"男",value:"1"},{label:"女",value:"0"}],enterTimeList:[{label:"一个月以内",value:"1"},{label:"1-3个月",value:"2"},{label:"3-6个月 ",value:"3"},{label:"6-12个月",value:"4"},{label:"一年以上",value:"5"}],ruleCustom:{title:[{required:!0,message:"请输入推送标题",trigger:"change"}],content:[{required:!0,message:"请输入推送内容",trigger:"change"}],targetType:[{required:!0,message:"请选择是否启用",trigger:"change"}],jumpType:[{required:!0,message:"请选择图标类型",trigger:"change"}]}}},mounted:function(){GLOBALSIDESWITCH("false"),this.getCommunityList(" ")},methods:{getTargetCount:function(t){var e=this;this.$http.get("get-target-count",t).then(function(t){e.personNum=t.data.targetCount}).catch(function(t){e.$Notice.error({title:t.message})})},communityChange:function(t){if(this.countParams.cmtId=t,!t)return void(this.personNum=0);this.getTargetCount(this.countParams)},genderChange:function(t){this.countParams.gender=t,this.getTargetCount(this.countParams)},enterTimeChange:function(t){this.countParams.enterTime=t,this.getTargetCount(this.countParams)},birthMonthChange:function(t){t?(this.countParams.birthMonth="1",this.formItem.birthMonth="1"):(this.countParams.birthMonth="",this.formItem.birthMonth=""),this.getTargetCount(this.countParams)},leaderChange:function(t){t?(this.countParams.leader="1",this.formItem.leader="1"):(this.countParams.leader="",this.formItem.leader=""),this.getTargetCount(this.countParams)},remoteCommunityMethod:function(t){var e=this;""!==t?(this.communityLoading=!0,setTimeout(function(){e.communityLoading=!1,e.getCommunityList(t)},200)):this.getCommunityList(" ")},getCommunityList:function(t){var e=this,i={cmtName:t},o=[],n=this;return this.$http.get("get-community-new-list",i).then(function(t){o=t.data.cmts,o.map(function(t){var e=t;return e.label=t.cmtName,e.value=t.cmtId,e}),n.communityList=o}).catch(function(t){e.$Notice.error({title:t.message})}),o},handleSubmit:function(t){var e=this,i=this;if(this.$Notice.config({top:80,duration:3}),"1"==this.formItem.jumpType&&!this.formItem.jumpUrl)return void this.$Notice.error({title:"请输入要跳转链接"});this.$refs[t].validate(function(t){t&&e.formItem.cmtId?i.submitCreate():i.$Notice.error({title:"请填写完表单"})})},submitCreate:function(){var t=this;this.$http.post("create-notification",this.formItem).then(function(e){t.$Notice.success({title:"新建成功"}),setTimeout(function(){window.close(),window.opener.location.reload()},1e3)}).catch(function(e){t.$Notice.error({title:e.message})})},targetTypeChange:function(){this.formItem.cmtId="",this.formItem.gender="3",this.formItem.enterTime="",this.formItem.birthMonth="",this.formItem.leader="",this.personNum=0,this.countParams={}},handleRemove:function(){this.formItem.iconUrl="",this.imgUrl=""},handleSuccess:function(t,e){1==t.code&&(this.formItem.imgUrl=t.data.imgUrl,this.imgUrl=t.data.imgUrl)},onCanlce:function(){window.close(),window.opener.location.reload()},handleError:function(t,e){this.$Notice.error({title:t.message})}}}},FnTm:function(t,e,i){t.exports=i.p+"img/icontip.0811b69.svg"},J0i4:function(t,e,i){"use strict";function o(t){i("pY0k")}var n=i("tBD1"),a=i("P67S"),r=i("VU/8"),l=o,s=r(n.a,a.a,!1,l,"data-v-872aada8",null);e.a=s.exports},KKE7:function(t,e,i){var o=i("keKA");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("f7d61606",o,!0,{sourceMap:!1})},NpwQ:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-detail-layout"},[i("div",{staticClass:"ui-content-title"},[i("span",{staticClass:"ui-circle"},[t._v(t._s(t.info))])]),t._t("default")],2)},n=[],a={render:o,staticRenderFns:n};e.a=a},P67S:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.classType[t.type]},[t._v("\n    "+t._s(t.title)+"\n")])},n=[],a={render:o,staticRenderFns:n};e.a=a},"Q5+s":function(t,e,i){"use strict";function o(t){i("S9u7")}Object.defineProperty(e,"__esModule",{value:!0});var n=i("EM8q"),a=i("tI+n"),r=i("VU/8"),l=o,s=r(n.a,a.a,!1,l,null,null);e.default=s.exports},S9u7:function(t,e,i){var o=i("w6o4");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("272f95c8",o,!0,{sourceMap:!1})},Ucgj:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'.section-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:25px;position:relative}.section-title[data-v-872aada8]:before{height:24px;border:2px solid #499df1;position:absolute;width:0;content:"";display:inline-block;top:12px;left:0}.section-detail-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:15px;position:relative}',""])},Vdfx:function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-icon-tip"},[i("div",{staticClass:"u-icon"}),i("div",{staticClass:"u-tip u-show"},[i("div",{staticClass:"u-icon-small-trigon"}),t._t("default")],2)])},n=[],a={render:o,staticRenderFns:n};e.a=a},gnYt:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'.u-clearfix{zoom:1}.u-clearfix:after{clear:both;content:".";height:0;display:block;visibility:hidden}.left{float:left}.ui-detail-layout{padding:0 24px;font-size:14px;color:#333;line-height:14px}.ui-detail-layout .ui-content-title{margin-bottom:24px}.ui-detail-layout .ui-circle{font-weight:700}.ui-detail-layout .ui-circle:before{content:"";width:7px;height:7px;display:inline-block;border:1px solid #333;border-radius:100% 100%;margin-right:6px;vertical-align:middle;margin-top:-3px}',""])},keKA:function(t,e,i){var o=i("kxFB");e=t.exports=i("FZ+f")(!1),e.push([t.i,'.u-clearfix{zoom:1}.u-clearfix:after{clear:both;content:".";height:0;display:block;visibility:hidden}.left{float:left}.ui-icon-tip{width:12px;height:12px;position:relative;z-index:100}.ui-icon-tip .u-icon{width:12px;height:12px;background:url('+o(i("FnTm"))+") no-repeat 50%;background-size:contain}.ui-icon-tip .u-icon:hover+.u-show{display:inline-block}.ui-icon-tip .u-tip{display:none;width:210px;background:#fff;font-size:12px;color:#999;position:absolute;left:60%;top:15px;padding:8px;border-radius:3px;margin-left:-105px;text-align:left;line-height:18px;-webkit-box-shadow:0 0 2px rgba(0,0,0,.2);box-shadow:0 0 2px rgba(0,0,0,.2)}.ui-icon-tip .u-icon-small-trigon{width:0;height:0;border:3px solid transparent;border-bottom-color:#fff;position:absolute;top:-5px;left:50%;margin-left:-3px}",""])},lNj5:function(t,e,i){var o=i("gnYt");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("65d89b4e",o,!0,{sourceMap:!1})},pY0k:function(t,e,i){var o=i("Ucgj");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);i("rjj0")("f811f5dc",o,!0,{sourceMap:!1})},t57A:function(t,e,i){"use strict";e.a={name:"iconTip"}},tBD1:function(t,e,i){"use strict";e.a={props:{title:String,type:{default:"listTitle",type:String}},data:function(){return{classType:{listTitle:"section-title",detailTitle:"section-detail-title"}}}}},"tI+n":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"g-notification-created"},[i("SectionTitle",{attrs:{title:"新建通知"}}),i("div",{staticClass:"u-form"},[i("Form",{ref:"formItems",attrs:{model:t.formItem,rules:t.ruleCustom,"label-width":100}},[i("DetailStyle",{attrs:{info:"通知列表显示内容"}},[i("FormItem",{staticStyle:{width:"294px"},attrs:{label:"通知标题",prop:"title"}},[i("Input",{attrs:{placeholder:"20个字符以内",maxlength:t.titleLength},model:{value:t.formItem.title,callback:function(e){t.$set(t.formItem,"title",e)},expression:"formItem.title"}})],1),i("FormItem",{staticStyle:{width:"516px"},attrs:{label:"通知内容",prop:"content"}},[i("Input",{attrs:{type:"textarea",placeholder:"200个字符以内",maxlength:t.contentLength},model:{value:t.formItem.content,callback:function(e){t.$set(t.formItem,"content",e)},expression:"formItem.content"}})],1),i("FormItem",{staticStyle:{width:"516px"},attrs:{label:"通知配图"}},[this.imgUrl?i("div",{staticClass:"demo-upload-list"},[i("img",{attrs:{src:this.imgUrl}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){t.handleRemove()}}})],1)]):t._e(),this.imgUrl?t._e():i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"148px"},attrs:{name:"imgUrl","show-upload-list":!1,format:["jpg","gif","png"],"with-credentials":"","on-success":t.handleSuccess,"on-error":t.handleError,type:"drag",action:"/api/krspace-finance-web/app/notification/upload"}},[i("div",{staticStyle:{width:"148px",height:"148px","line-height":"158px"}},[i("Icon",{attrs:{type:"camera",size:"40"}})],1)])],1),i("div",{staticClass:"u-upload-tip"},[t._v("图片小于300KB，格式为JPG，PNG，GIF；配图比例建议为正方形，不符合此比例系统会自动居中裁剪显示。\n（上传图片后，即为APP中用户可见效果）")]),i("FormItem",{staticStyle:{width:"400px"},attrs:{label:"通知详情",prop:"jumpType"}},[i("RadioGroup",{model:{value:t.formItem.jumpType,callback:function(e){t.$set(t.formItem,"jumpType",e)},expression:"formItem.jumpType"}},[i("Radio",{staticStyle:{"margin-right":"120px"},attrs:{label:"0"}},[t._v("\n                        无详情页\n                    ")]),i("Radio",{attrs:{label:"1"}},[t._v("\n                        跳转外链\n                    ")])],1)],1),"1"==t.formItem.jumpType?i("div",{staticClass:"u-jump-url"},[i("div",{staticClass:"u-small-trigon"}),i("FormItem",{staticStyle:{width:"250px"},attrs:{label:"URL"}},[i("Input",{attrs:{placeholder:"请输入URL"},model:{value:t.formItem.jumpUrl,callback:function(e){t.$set(t.formItem,"jumpUrl",e)},expression:"formItem.jumpUrl"}})],1)],1):t._e()],1),i("DetailStyle",{attrs:{info:"推送目标用户"}},[i("FormItem",{staticStyle:{width:"352px","margin-top":"-20px"},attrs:{label:"",prop:"targetType"}},[i("RadioGroup",{on:{"on-change":t.targetTypeChange},model:{value:t.formItem.targetType,callback:function(e){t.$set(t.formItem,"targetType",e)},expression:"formItem.targetType"}},[i("Radio",{attrs:{label:"1"}},[t._v("\n                        社区人员\n                    ")]),i("Radio",{attrs:{label:"2"}},[t._v("\n                        自定义会员\n                    ")])],1)],1),"1"==t.formItem.targetType?i("div",{staticClass:"u-community-content"},[i("div",{staticClass:"u-community-select"},[i("div",{staticClass:"u-small-trigon"}),i("FormItem",{staticStyle:{width:"250px"},attrs:{label:"选择社区"}},[i("Select",{attrs:{filterable:"","remote-method":t.remoteCommunityMethod,loading:t.communityLoading,placeholder:"请选择",clearable:""},on:{"on-change":t.communityChange},model:{value:t.formItem.cmtId,callback:function(e){t.$set(t.formItem,"cmtId",e)},expression:"formItem.cmtId"}},t._l(t.communityList,function(e,o){return i("Option",{key:o,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1)]):t._e(),"2"==t.formItem.targetType?i("div",{staticClass:"u-member-content"},[i("div",{staticClass:"u-small-trigon"}),i("FormItem",{staticStyle:{width:"250px","margin-right":"30px"},attrs:{label:"选择社区"}},[i("Select",{attrs:{filterable:"","remote-method":t.remoteCommunityMethod,loading:t.communityLoading,placeholder:"请选择",clearable:""},on:{"on-change":t.communityChange},model:{value:t.formItem.cmtId,callback:function(e){t.$set(t.formItem,"cmtId",e)},expression:"formItem.cmtId"}},t._l(t.communityList,function(e,o){return i("Option",{key:o,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),i("FormItem",{staticStyle:{width:"250px"},attrs:{label:"性别"}},[i("Select",{attrs:{placeholder:"请选择"},on:{"on-change":t.genderChange},model:{value:t.formItem.gender,callback:function(e){t.$set(t.formItem,"gender",e)},expression:"formItem.gender"}},t._l(t.genderList,function(e,o){return i("Option",{key:o,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),i("FormItem",{staticStyle:{width:"250px","margin-right":"200px"},attrs:{label:"入驻时长"}},[i("Select",{attrs:{placeholder:"请选择",clearable:""},on:{"on-change":t.enterTimeChange},model:{value:t.formItem.enterTime,callback:function(e){t.$set(t.formItem,"enterTime",e)},expression:"formItem.enterTime"}},t._l(t.enterTimeList,function(e,o){return i("Option",{key:o,attrs:{value:e.value}},[t._v(t._s(e.label))])})),i("IconTip",{staticStyle:{left:"60px",top:"-55px"}},[t._v("会员在氪空间所有社区的历史时长，用以筛选老用户")])],1),i("FormItem",{staticStyle:{"margin-right":"116px","margin-top":"-30px"}},[i("Checkbox",{attrs:{value:"1"},on:{"on-change":t.birthMonthChange},model:{value:t.birthMonth,callback:function(e){t.birthMonth=e},expression:"birthMonth"}},[t._v("当前月份为会员生日月")])],1),i("FormItem",{staticStyle:{"margin-top":"-30px"}},[i("Checkbox",{attrs:{value:"1"},on:{"on-change":t.leaderChange},model:{value:t.leader,callback:function(e){t.leader=e},expression:"leader"}},[t._v("企业管理员用户")])],1)],1):t._e(),i("div",{staticClass:"u-person-tip"},[t._v("\n                    所选目标用户数："+t._s(t.personNum)+"人\n            ")])],1),i("DetailStyle",{attrs:{info:"其他设置"}},[i("FormItem",{staticStyle:{width:"400px"},attrs:{label:"同步推送",prop:"push"}},[i("RadioGroup",{model:{value:t.formItem.push,callback:function(e){t.$set(t.formItem,"push",e)},expression:"formItem.push"}},[i("Radio",{staticStyle:{"margin-right":"36px"},attrs:{label:"0"}},[t._v("\n                        否\n                    ")]),i("Radio",{staticStyle:{"margin-right":"36px"},attrs:{label:"1"}},[t._v("\n                        是\n                    ")])],1),i("IconTip",{staticStyle:{left:"65px",top:"-55px"}},[i("span",{staticStyle:{"text-indent":"14px"}},[t._v("设置“同步推送”后，该社区用户会在消息通知创建成功后，手机顶部通知栏收到推送通知。")]),i("span",{staticStyle:{"text-indent":"14px"}},[t._v("建议仅重要消息通知勾选此项，避免造成用户骚扰。")])])],1)],1),i("FormItem",{staticStyle:{margin:"0 24px",background:"#F5F6FA",height:"60px"}},[i("div",{staticClass:"u-btn-content"},[i("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formItems")}}},[t._v("确定")]),i("Button",{attrs:{type:"ghost"},on:{click:function(e){t.onCanlce()}}},[t._v("取消")])],1)])],1)],1)],1)},n=[],a={render:o,staticRenderFns:n};e.a=a},tnTj:function(t,e,i){"use strict";function o(t){i("KKE7")}var n=i("t57A"),a=i("Vdfx"),r=i("VU/8"),l=o,s=r(n.a,a.a,!1,l,null,null);e.a=s.exports},w6o4:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'.g-notification-created .u-form{margin-top:30px;padding-bottom:45px}.g-notification-created .u-form form{width:100%}.g-notification-created .u-form .u-btn-content{width:138px;margin:0 auto}.g-notification-created .u-form .u-upload-tip{width:692px;height:40px;line-height:18px;font-size:13px;color:#999;margin:-25px 0 10px 14px}.g-notification-created .u-form .u-community-content{width:284px;height:114px;margin-top:-10px}.g-notification-created .u-form .u-person-tip{height:20px;font-size:14px;color:#999;margin-left:8px;margin-bottom:30px}.g-notification-created .u-form .u-community-select{width:284px;height:100px;padding-top:20px;padding-left:10px;background:#f6f6f6;margin-bottom:14px;border-radius:3px;margin-left:8px;position:relative}.g-notification-created .u-form .u-community-select .u-small-trigon{width:0;height:0;border:6px solid transparent;border-bottom-color:#f6f6f6;position:absolute;top:-12px;left:50px}.g-notification-created .u-form .u-member-content{width:570px;height:210px;background:#f6f6f6;border-radius:3px;position:relative;margin-bottom:14px;margin-top:-10px;padding-top:20px;padding-left:16px}.g-notification-created .u-form .u-member-content .u-small-trigon{width:0;height:0;border:6px solid transparent;border-bottom-color:#f6f6f6;position:absolute;top:-12px;left:140px}.g-notification-created .u-form .u-member-content .ivu-form-item{float:left}.g-notification-created .u-form .u-member-content .ivu-checkbox{margin-right:5px}.g-notification-created .u-form .u-jump-url{width:284px;height:105px;padding-top:20px;padding-left:16px;background:#f6f6f6;margin-bottom:14px;border-radius:3px;margin-left:110px;margin-top:-12px;position:relative}.g-notification-created .u-form .u-jump-url .u-small-trigon{width:0;height:0;border:6px solid transparent;border-bottom-color:#f6f6f6;position:absolute;top:-12px;left:135px}.g-notification-created .ivu-form-item{margin-top:-4px}.g-notification-created .ivu-form-item-label{float:none;margin-left:13px}.g-notification-created .ivu-form-item-content{margin-left:13px!important;margin-top:10px}.g-notification-created .ivu-form-item-required .ivu-form-item-label:before{content:"*";display:inline-block;margin-right:4px;line-height:1;font-family:SimSun;font-size:12px;color:#ed3f14;margin-left:-13px}.g-notification-created .ivu-input-wrapper textarea.ivu-input{font-size:12px}.g-notification-created .demo-upload-list{display:inline-block;width:148px;height:148px;text-align:center;line-height:60px;border:1px solid transparent;border-radius:4px;overflow:hidden;background:#fff;position:relative;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.2);box-shadow:0 1px 1px rgba(0,0,0,.2);margin-right:4px}.g-notification-created .demo-upload-list img{width:100%;height:100%}.g-notification-created .demo-upload-list-cover{display:none;position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.6)}.g-notification-created .demo-upload-list:hover .demo-upload-list-cover{display:block}.g-notification-created .demo-upload-list-cover i{color:#fff;font-size:40px;cursor:pointer;line-height:148px}',""])},yWLh:function(t,e,i){"use strict";function o(t){i("lNj5")}var n=i("4O/J"),a=i("NpwQ"),r=i("VU/8"),l=o,s=r(n.a,a.a,!1,l,null,null);e.a=s.exports}});
//# sourceMappingURL=create.935987e22962c9185aeb.js.map