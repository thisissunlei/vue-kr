webpackJsonp([96],{"1+Eh":function(t,e,i){"use strict";var a=i("J0i4"),n=i("yWLh"),o=i("SP/+");e.a={components:{SectionTitle:a.a,DetailStyle:n.a,LabelText:o.a},head:function(){return{title:"编辑通知"}},data:function(){return{formItem:{title:"",content:"",targetType:"1",jumpType:"0",cmtId:"",gender:"3",push:"0",birthMonth:"",leader:"",cmtName:"",genderDesc:"",timeDesc:""},titleLength:20,contentLength:200,targetDetail:{},imgUrl:"",ruleCustom:{title:[{required:!0,message:"请输入推送标题",trigger:"change"}],content:[{required:!0,message:"请输入推送内容",trigger:"change"}],targetType:[{required:!0,message:"请选择是否启用",trigger:"change"}],jumpType:[{required:!0,message:"请选择通知详情",trigger:"change"}]}}},mounted:function(){GLOBALSIDESWITCH("false"),this.getInfo()},methods:{getInfo:function(){var t=this,e=this.$route.params,i={notificationId:e.notificationId};this.$http.get("get-notification-detail",i).then(function(e){switch(t.imgUrl=e.data.imgUrl,t.formItem=e.data,e.data.jumpType&&(t.formItem.jumpType=e.data.jumpType.toString()),t.targetDetail=e.data.targetDetail,e.data.gender){case 0:t.formItem.gender="0";break;case 1:t.formItem.gender="1";break;case 2:t.formItem.gender="2"}e.data.enterTime&&(t.formItem.enterTime=e.data.enterTime.toString()),e.data.leader&&(t.leader=1==e.data.leader),e.data.birthMonth&&(t.birthMonth=1==e.data.birthMonth),0==e.data.cmtId&&(t.formItem.cmtId="-1")}).catch(function(e){t.$Notice.error({title:e.message})})},handleSubmit:function(t){var e=this;if(this.$Notice.config({top:80,duration:3}),"1"==this.formItem.jumpType&&!this.formItem.jumpUrl)return void this.$Notice.error({title:"请输入要跳转链接"});this.$refs[t].validate(function(t){t?e.submitCreate():e.$Notice.error({title:"请填写完表单"})})},submitCreate:function(){var t=this;this.$http.post("edit-notification",this.formItem).then(function(e){t.$Notice.success({title:"编辑成功"}),setTimeout(function(){window.close(),window.opener.location.reload()},1e3)}).catch(function(e){t.$Notice.error({title:e.message})})},handleRemove:function(){this.formItem.iconUrl="",this.imgUrl=""},handleSuccess:function(t,e){1==t.code&&(this.formItem.imgUrl=t.data.imgUrl,this.imgUrl=t.data.imgUrl)},onCanlce:function(){window.close(),window.opener.location.reload()},handleError:function(t,e){this.$Notice.error({title:t.message})}}}},"4O/J":function(t,e,i){"use strict";e.a={name:"detailStyle",props:["info"]}},"61ld":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.getClassName()},[i("div",{staticClass:"ui-label",class:{circle:"circle"==t.type}},[t._v("\n\t\t"+t._s(t.label)+"\n\t")]),i("div",{staticClass:"ui-text"},[t._t("default")],2)])},n=[],o={render:a,staticRenderFns:n};e.a=o},A7Ww:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'.ui-labeltext{width:45%;height:14px;font-size:14px;color:#333;line-height:14px;padding-left:14px;margin-bottom:24px;display:inline-block}.ui-labeltext .circle:before{content:"";display:inline-block;width:8px;height:8px;border:1px solid #333;border-radius:5px}.ui-labeltext .ui-label{font-weight:700;line-height:20px}.ui-label-text-inline .ui-label,.ui-label-text-inline .ui-text{display:inline-block}.ui-label-text-unline .ui-label{margin-bottom:8px}.ui-label-text-unline .ui-label,.ui-label-text-unline .ui-text{display:block}',""])},J0i4:function(t,e,i){"use strict";function a(t){i("pY0k")}var n=i("tBD1"),o=i("P67S"),r=i("VU/8"),l=a,s=r(n.a,o.a,!1,l,"data-v-872aada8",null);e.a=s.exports},Kozl:function(t,e,i){"use strict";e.a={name:"labelText",props:["label","inline","type"],data:function(){return{labeltextClass:"ui-labeltext",inlineClass:"inline",unlineClass:"unline"}},methods:{getClassName:function(){var t="ui-labeltext";return this.inline?t+=" ui-label-text-unline":t+=" ui-label-text-inline",t}}}},NpwQ:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-detail-layout"},[i("div",{staticClass:"ui-content-title"},[i("span",{staticClass:"ui-circle"},[t._v(t._s(t.info))])]),t._t("default")],2)},n=[],o={render:a,staticRenderFns:n};e.a=o},P67S:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.classType[t.type]},[t._v("\n    "+t._s(t.title)+"\n")])},n=[],o={render:a,staticRenderFns:n};e.a=o},PGoA:function(t,e,i){"use strict";function a(t){i("PY17")}Object.defineProperty(e,"__esModule",{value:!0});var n=i("1+Eh"),o=i("S2sL"),r=i("VU/8"),l=a,s=r(n.a,o.a,!1,l,null,null);e.default=s.exports},PY17:function(t,e,i){var a=i("revP");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("38926d30",a,!0,{sourceMap:!1})},S2sL:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"g-notification-created"},[i("SectionTitle",{attrs:{title:"编辑通知"}}),i("div",{staticClass:"u-form"},[i("Form",{ref:"formItems",attrs:{model:t.formItem,rules:t.ruleCustom,"label-width":100}},[i("DetailStyle",{attrs:{info:"通知列表显示内容"}},[i("FormItem",{staticStyle:{width:"294px"},attrs:{label:"通知标题",prop:"title"}},[i("Input",{attrs:{placeholder:"20个字符以内",maxlength:t.titleLength},model:{value:t.formItem.title,callback:function(e){t.$set(t.formItem,"title",e)},expression:"formItem.title"}})],1),i("FormItem",{staticStyle:{width:"516px"},attrs:{label:"通知内容",prop:"content"}},[i("Input",{attrs:{type:"textarea",placeholder:"200个字符以内",maxlength:t.contentLength},model:{value:t.formItem.content,callback:function(e){t.$set(t.formItem,"content",e)},expression:"formItem.content"}})],1),i("FormItem",{staticStyle:{width:"516px"},attrs:{label:"通知配图"}},[this.imgUrl?i("div",{staticClass:"demo-upload-list"},[i("img",{attrs:{src:this.imgUrl}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(e){t.handleRemove()}}})],1)]):t._e(),this.imgUrl?t._e():i("Upload",{ref:"upload",staticStyle:{display:"inline-block",width:"148px"},attrs:{name:"imgUrl","show-upload-list":!1,format:["jpg","gif","png"],"with-credentials":"","on-success":t.handleSuccess,"on-error":t.handleError,type:"drag",action:"/api/krspace-finance-web/app/notification/upload"}},[i("div",{staticStyle:{width:"148px",height:"148px","line-height":"158px"}},[i("Icon",{attrs:{type:"camera",size:"40"}})],1)])],1),i("div",{staticClass:"u-upload-tip"},[t._v("图片小于300KB，格式为JPG，PNG，GIF；配图比例建议为正方形，不符合此比例系统会自动居中裁剪显示。\n（上传图片后，即为APP中用户可见效果）")]),i("FormItem",{staticStyle:{width:"400px"},attrs:{label:"通知详情",prop:"jumpType"}},[i("RadioGroup",{model:{value:t.formItem.jumpType,callback:function(e){t.$set(t.formItem,"jumpType",e)},expression:"formItem.jumpType"}},[i("Radio",{staticStyle:{"margin-right":"120px"},attrs:{label:"0"}},[t._v("\n                        无详情页\n                    ")]),i("Radio",{attrs:{label:"1"}},[t._v("\n                        跳转外链\n                    ")])],1)],1),"1"==t.formItem.jumpType?i("div",{staticClass:"u-jump-url"},[i("div",{staticClass:"u-small-trigon"}),i("FormItem",{staticStyle:{width:"250px"},attrs:{label:"URL"}},[i("Input",{attrs:{placeholder:"请输入URL"},model:{value:t.formItem.jumpUrl,callback:function(e){t.$set(t.formItem,"jumpUrl",e)},expression:"formItem.jumpUrl"}})],1)],1):t._e()],1),i("DetailStyle",{attrs:{info:"推送目标用户"}},[i("LabelText",{staticStyle:{width:"700px"},attrs:{label:""}},[t._v("\n\t\t\t\t"+t._s(t.formItem.targetDesc)+"\n\t\t  ")]),"2"==t.formItem.targetType?i("div",{staticClass:"u-merber-content"},[i("div",{staticClass:"u-small-trigon"}),i("LabelText",{attrs:{label:"所在社区："}},[t._v("\n                    "+t._s(t.targetDetail.cmtName)+"\n                ")]),i("LabelText",{attrs:{label:"性别："}},[t._v("\n                    "+t._s(t.targetDetail.genderDesc?t.targetDetail.genderDesc:"-")+"\n                ")]),i("LabelText",{attrs:{label:"已入驻时长："}},[t._v("\n                    "+t._s(t.targetDetail.enterTimeDesc?t.targetDetail.enterTimeDesc:"-")+"\n                ")]),i("LabelText",{attrs:{label:"当前月份："}},[t._v("\n                    "+t._s(t.targetDetail.birthMonthDesc?t.targetDetail.birthMonthDesc:"-")+"\n                ")]),i("LabelText",{attrs:{label:"企业管理员用户："}},[t._v("\n                    "+t._s(t.targetDetail.leaderDesc?t.targetDetail.leaderDesc:"-")+"\n                ")])],1):t._e()],1),i("DetailStyle",{attrs:{info:"其他设置"}},[i("LabelText",{staticStyle:{width:"700px"},attrs:{label:"同步推送："}},[t._v("\n\t\t\t\t"+t._s("0"==t.formItem.push?"否":"是")+"\n\t\t\t")])],1),i("FormItem",{staticStyle:{margin:"0 24px",background:"#F5F6FA",height:"60px"}},[i("div",{staticClass:"u-btn-content"},[i("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formItems")}}},[t._v("确定")]),i("Button",{attrs:{type:"ghost"},on:{click:function(e){t.onCanlce()}}},[t._v("取消")])],1)])],1)],1)],1)},n=[],o={render:a,staticRenderFns:n};e.a=o},"SP/+":function(t,e,i){"use strict";function a(t){i("dhjp")}var n=i("Kozl"),o=i("61ld"),r=i("VU/8"),l=a,s=r(n.a,o.a,!1,l,null,null);e.a=s.exports},Ucgj:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'.section-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:25px;position:relative}.section-title[data-v-872aada8]:before{height:24px;border:2px solid #499df1;position:absolute;width:0;content:"";display:inline-block;top:12px;left:0}.section-detail-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:15px;position:relative}',""])},dhjp:function(t,e,i){var a=i("A7Ww");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("6397b5a0",a,!0,{sourceMap:!1})},gnYt:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'.u-clearfix{zoom:1}.u-clearfix:after{clear:both;content:".";height:0;display:block;visibility:hidden}.left{float:left}.ui-detail-layout{padding:0 24px;font-size:14px;color:#333;line-height:14px}.ui-detail-layout .ui-content-title{margin-bottom:24px}.ui-detail-layout .ui-circle{font-weight:700}.ui-detail-layout .ui-circle:before{content:"";width:7px;height:7px;display:inline-block;border:1px solid #333;border-radius:100% 100%;margin-right:6px;vertical-align:middle;margin-top:-3px}',""])},lNj5:function(t,e,i){var a=i("gnYt");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("65d89b4e",a,!0,{sourceMap:!1})},pY0k:function(t,e,i){var a=i("Ucgj");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("f811f5dc",a,!0,{sourceMap:!1})},revP:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'.g-notification-created .u-form{margin-top:30px;display:-webkit-box;display:-ms-flexbox;display:flex}.g-notification-created .u-form form{width:100%}.g-notification-created .u-form .u-btn-content{width:138px;margin:0 auto}.g-notification-created .u-form .u-upload-tip{width:692px;height:40px;line-height:18px;font-size:13px;color:#999;margin:-25px 0 10px 14px}.g-notification-created .u-form .u-merber-content{width:570px;height:132px;padding-top:20px;padding-left:16px;background:#f6f6f6;margin-bottom:30px;border-radius:3px;margin-left:14px;position:relative;margin-top:-5px}.g-notification-created .u-form .u-merber-content .u-small-trigon{width:0;height:0;border:6px solid transparent;border-bottom-color:#f6f6f6;position:absolute;top:-12px;left:30px}.g-notification-created .u-form .u-jump-url{width:284px;height:105px;padding-top:20px;padding-left:16px;background:#f6f6f6;margin-bottom:14px;border-radius:3px;margin-left:110px;margin-top:-12px;position:relative}.g-notification-created .u-form .u-jump-url .u-small-trigon{width:0;height:0;border:6px solid transparent;border-bottom-color:#f6f6f6;position:absolute;top:-12px;left:135px}.g-notification-created .ivu-form-item{margin-top:-4px}.g-notification-created .ivu-form-item-label{float:none;margin-left:13px}.g-notification-created .ivu-form-item-content{margin-left:13px!important;margin-top:10px}.g-notification-created .ivu-form-item-required .ivu-form-item-label:before{content:"*";display:inline-block;margin-right:4px;line-height:1;font-family:SimSun;font-size:12px;color:#ed3f14;margin-left:-13px}.g-notification-created .ivu-input-wrapper textarea.ivu-input{font-size:12px}.g-notification-created .demo-upload-list{display:inline-block;width:148px;height:148px;text-align:center;line-height:60px;border:1px solid transparent;border-radius:4px;overflow:hidden;background:#fff;position:relative;-webkit-box-shadow:0 1px 1px rgba(0,0,0,.2);box-shadow:0 1px 1px rgba(0,0,0,.2);margin-right:4px}.g-notification-created .demo-upload-list img{width:100%;height:100%}.g-notification-created .demo-upload-list-cover{display:none;position:absolute;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.6)}.g-notification-created .demo-upload-list:hover .demo-upload-list-cover{display:block}.g-notification-created .demo-upload-list-cover i{color:#fff;font-size:40px;cursor:pointer;line-height:148px}',""])},tBD1:function(t,e,i){"use strict";e.a={props:{title:String,type:{default:"listTitle",type:String}},data:function(){return{classType:{listTitle:"section-title",detailTitle:"section-detail-title"}}}}},yWLh:function(t,e,i){"use strict";function a(t){i("lNj5")}var n=i("4O/J"),o=i("NpwQ"),r=i("VU/8"),l=a,s=r(n.a,o.a,!1,l,null,null);e.a=s.exports}});
//# sourceMappingURL=_notificationId.1f52938013ae1a0b7354.js.map