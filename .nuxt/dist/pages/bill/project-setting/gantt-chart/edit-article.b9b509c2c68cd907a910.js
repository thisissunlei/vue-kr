webpackJsonp([127],{"0Jty":function(t,e,a){"use strict";var n=a("woOf"),i=a.n(n),o=a("g4Hp"),r=a.n(o),l=a("bsze"),c=a("NJBC");e.a={name:"EditArticle",props:{minCalibration:{type:[String,Number],default:50},startDate:{type:Object},label:{type:String},data:{type:Object},treeKey:{type:[Number,String]},type:{type:String,default:"view"},index:{type:[Number,String]},todayDetail:{type:Object}},data:function(){return{boxDetail:{},planDetail:{},actualDetail:{},leftEndpoint:this.startDate,lineDetail:{},picColor:"",planContentId:"plan-content"+this.data.t_id,actualContentId:"actual-content"+this.data.t_id}},mounted:function(){var t=i()({},this.data.data);t&&t.planStartTime&&t.planEndTime&&this.getBoxWidthAndOffice()},watch:{startDate:{handler:function(){this.leftEndpoint=this.startDate,this.getBoxWidthAndOffice()}}},updated:function(){c.a.fontCover(this.planContentId,this.actualContentId)},methods:{toolOver:function(t){c.a.poptipOver(t,this.data)},toolOut:function(t){var e=document.getElementById("gantt-chart-tool-tip"),a=document.getElementById("gantt-chart-tool-tip-triangle");e.style.opacity=0,a.style.opacity=0},editClick:function(t,e){this.$emit("editClick",t,e)},isInitial:function(){return!(!this.data.data.actualStartTime||!this.data.data.actualEndTime)||!(!this.data.data.planStartTime||!this.data.data.planEndTime)},getActualColor:function(){var t=this.data.data.taskStatus;return c.a.getActualColor(t)},getLabel:function(t){return this.data.data.planEndTime<this.data.data.actualStartTime||this.data.data.actualEndTime<this.data.data.planStartTime?"":t},getActualLabel:function(t){return this.data.data.planEndTime<this.data.data.actualStartTime||this.data.data.actualEndTime<this.data.data.planStartTime?t:""},lineShow:function(){var t=i()({},this.data.data);if(t.actualStartTime&&t.actualEndTime&&t.planStartTime&&t.planEndTime)return t.planEndTime<t.actualStartTime||t.actualEndTime<t.planStartTime},getFlagShow:function(t){return!0},getActualBgColor:function(){var t=this.data.data.taskStatus;return c.a.getActualBgColor(t)},getLabelColor:function(){var t=this.data.data.taskStatus;return c.a.getLabelColor(t)},getActualBorder:function(){var t=this.data.data.taskStatus;return c.a.getActualBorder(t)},getBoxWidthAndOffice:function(){var t=i()({},this.data.data);t.actualStartTime||t.actualEndTime||(t.actualStartTime=t.planStartTime,t.actualEndTime=t.planEndTime);var e=c.a.getAllMaxAndMin(t),a=r.a.dateToStr("YYYY-MM-DD",new Date(+t.planStartTime)),n=r.a.dateToStr("YYYY-MM-DD",new Date(+t.planEndTime)),o=r.a.dateToStr("YYYY-MM-DD",new Date(+t.actualStartTime)),d=r.a.dateToStr("YYYY-MM-DD",new Date(+t.actualEndTime)),u=r.a.dateToStr("YYYY-MM-DD",new Date(e.max)),s=r.a.dateToStr("YYYY-MM-DD",new Date(e.min)),p=this.leftEndpoint.year+"-"+this.leftEndpoint.month+"-"+this.leftEndpoint.start;this.boxDetail={width:l.a.dateDiff(s,u)+1,office:l.a.dateDiff(p,s)},this.planDetail={width:l.a.dateDiff(a,n)+1,office:l.a.dateDiff(s,a)},this.actualDetail={width:l.a.dateDiff(o,d)+1,office:l.a.dateDiff(s,o)};var f=0,h=0;t.planEndTime<t.actualStartTime&&(f=this.planDetail.width+this.planDetail.office,h=this.actualDetail.office-this.planDetail.office-this.planDetail.width),t.actualEndTime<t.planStartTime&&(f=this.actualDetail.width+this.actualDetail.office,h=this.planDetail.office-this.actualDetail.office-this.actualDetail.width),this.lineDetail={width:h,office:f}},overShow:function(t){var e=document.querySelectorAll('div[data-box-id="'+t+'"]')[0],a=document.querySelectorAll('div[data-chart="'+t+'"]')[0];e&&a&&(e.style.background="#F7F9FB",a.style.background="#F7F9FB")},outHide:function(t){var e=document.querySelectorAll('div[data-box-id="'+t+'"]')[0],a=document.querySelectorAll('div[data-chart="'+t+'"]')[0];e&&a&&(e.style.background="#fff",a.style.background="#fff")}}}},"6Qxz":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-article"},[a("div",{staticClass:"every-col",staticStyle:{background:"#fff",position:"relative"},attrs:{"data-chart":t.data.t_id},on:{mouseover:function(e){t.overShow(t.data.t_id)},mouseout:function(e){t.outHide(t.data.t_id)}}},[t.isInitial()?a("div",[a("div",{staticClass:"col-tool-label"},[t.getFlagShow("STAGETASK")?a("div",{staticClass:"article",style:{width:t.boxDetail.width*t.minCalibration+"px",left:t.boxDetail.office*t.minCalibration+"px"}},[a("div",{staticClass:"plan",style:{background:"rgb(238, 238, 238)",width:t.planDetail.width*t.minCalibration+"px",left:t.planDetail.office*t.minCalibration+"px",color:"rgb(102, 102, 102)",cursor:"pointer"},on:{click:function(e){t.editClick(t.data.value,t.data.pid)},mouseover:t.toolOver,mouseout:t.toolOut}},[a("div",{staticClass:"plan-content",attrs:{id:this.planContentId}},[t._v(t._s(t.getActualLabel(t.data.label)))])]),a("div",{staticClass:"actual",style:{width:t.actualDetail.width*t.minCalibration+"px",left:t.actualDetail.office*t.minCalibration+"px",background:t.getActualBgColor(),color:t.getActualColor(),cursor:"pointer",border:t.getActualBorder()},on:{click:function(e){t.editClick(t.data.value,t.data.pid)},mouseover:t.toolOver,mouseout:t.toolOut}},[a("div",{staticClass:"actual-content",attrs:{id:this.actualContentId}},[t._v(t._s(t.getActualLabel(t.data.label)))])]),t.lineShow()?a("div",{staticClass:"line",style:{width:t.lineDetail.width*t.minCalibration+"px",left:t.lineDetail.office*t.minCalibration+"px"}}):t._e(),a("div",{staticClass:"label",style:{color:t.getLabelColor(),width:t.boxDetail.width*t.minCalibration+"px",cursor:"pointer"},on:{mouseover:t.toolOver,mouseout:t.toolOut,click:function(e){t.editClick(t.data.value,t.data.pid)}}},[t._v("\n                            "+t._s(this.getLabel(t.data.label))+"\n                        ")])]):t._e()])]):t._e()]),t._l(t.data.children,function(e,n){return t.leftEndpoint.year&&"edit"==t.type?a("EditArticle",{key:e.id,attrs:{minCalibration:t.minCalibration,startDate:t.leftEndpoint,data:e,type:t.type,index:n,todayDetail:t.todayDetail},on:{editClick:t.editClick}}):t._e()})],2)},i=[],o={render:n,staticRenderFns:i};e.a=o},"9pIO":function(t,e,a){"use strict";function n(t,e){if(t)for(var a=t.querySelectorAll(".ivu-table-sort"),n=0;n<a.length;n++){var o=a[n];o.style.width="auto",o.style.height="40px";var r=o.parentNode,l=r.querySelectorAll("span")[0].innerHTML;i(o,t,l,e)}}function i(t,e,a,n){t.innerHTML="";var i=document.createElement("span");i.className=r("init"),t.appendChild(i),i.onclick=function(t){var i=t.target,c=i.className;l(e),i.className=r(c),n({label:a,order:o(c)})}}function o(t){return"kr-table-sort-icon-asc"===t?"desc":"asc"}function r(t){switch(t){case"kr-table-sort-icon-init":return"kr-table-sort-icon-asc";case"kr-table-sort-icon-asc":return"kr-table-sort-icon-desc";case"kr-table-sort-icon-desc":return"kr-table-sort-icon-asc";default:return"kr-table-sort-icon-init"}}function l(t){for(var e=t.querySelectorAll(".ivu-table-sort span"),a=0;a<e.length;a++){e[a].className=r("init")}}e.a=n},Asao:function(t,e,a){"use strict";function n(){switch((0,Object.prototype.toString.call)(0)){case"[object String]":return"string";case"[object Number]":return"number";case"[object Boolean]":return"boolean";case"[object Symbol]":return"symbol";case"[object Undefined]":return"undefined";case"[object Null]":return"null";case"[object Function]":return"function";case"[object Date]":return"date";case"[object Array]":return"array";case"[object RegExp]":return"regExp";case"[object Error]":return"error";case"[object HTMLDocument]":return"node";case"[object global]":return"global"}}e.a=n},Eqh0:function(t,e,a){"use strict";function n(t){if(t){return o.a.dateToStr("YYYY/MM/DD HH:mm:SS",new Date(t)).replace(/\//g,"-")}return""}var i=a("g4Hp"),o=a.n(i);e.a=n},IoNu:function(t,e){t.exports=function(t,e,a,n){function i(){function i(){r=Number(new Date),a.apply(c,u)}function l(){o=void 0}var c=this,d=Number(new Date)-r,u=arguments;n&&!o&&i(),o&&clearTimeout(o),void 0===n&&d>t?i():!0!==e&&(o=setTimeout(n?l:i,void 0===n?t-d:t))}var o,r=0;return"boolean"!=typeof e&&(n=a,a=e,e=void 0),i}},NJBC:function(t,e,a){"use strict";function n(t){var e=[];t.actualStartTime&&t.actualEndTime&&(e.push(t.actualStartTime),e.push(t.actualEndTime)),t.planStartTime&&t.planEndTime&&(e.push(t.planStartTime),e.push(t.planEndTime));for(var a=e[0],n=e[0],i=1;i<e.length;i++)a<e[i]&&(a=e[i]),n>e[i]&&(n=e[i]);var o=E.a.dateToStr("YYYY-MM-DD",new Date(+n)),o=o.split("-");return{min:+n,max:+a}}function i(t,e){return new Date(t,e,0).getDate()}function o(t,e,a){var n=(document.body.clientWidth,t||window.event),i=t.target,o=i.getBoundingClientRect(),c=document.getElementById("gantt-chart-tool-tip"),d=document.getElementById("gantt-chart-tool-tip-triangle"),u=document.getElementById("layout-content-main"),s={left:n.clientX,top:(n.clientY<o.top?n.clientY:o.top)+o.height},p=r(e);(e.planEndTimeStr||e.actualEndTimeStr)&&(c.innerHTML=p.str,c.style.left=s.left-30+"px",c.style.top=s.top+10-70+u.scrollTop+"px",c.style.width=p.width+"px",d.style.left=s.left-30+5+"px",d.style.top=s.top-70+u.scrollTop+"px",c.style.display="block",d.style.display="block",l(c,s.left-30,s.left-30+p.width,a))}function r(t){var e='<div class="title">'+t.label+"</div>",a=w()({},t);return a.planEndTime&&(e+='<div class="content" > 计划日期：'+E.a.dateToStr("YYYY/MM/DD",new Date(a.planEndTime))+"</div>"),a.actualEndTime&&(e+='<div class="content" > 完成日期：'+E.a.dateToStr("YYYY/MM/DD",new Date(a.actualEndTime))+"</div>"),{str:e,width:155}}function l(t,e,a,n){var i=document.getElementById(n),o=document.getElementById("gantt-chart-tool-tip-triangle"),r=t.getBoundingClientRect(),l=i.getBoundingClientRect(),c=document.body.clientWidth,d=c-l.right,u=c-a-20;d>u&&(t.style.left=e-(d-u)+"px"),l.top+l.height<parseInt(t.style.top)+155+100?(t.style.top=parseInt(t.style.top)-r.height-60+"px",o.className="top-triangle",o.style.top=parseInt(o.style.top)-50+"px"):o.className="bottom-triangle"}function c(t,e){var a=document.getElementById(t),n=document.getElementById(e);if(a&&n){var i=a.getBoundingClientRect(),o=n.getBoundingClientRect();(i.left+i.width>o.left||o.left+o.width>i.left)&&(i.left+i.width>o.left&&(a.style.width=o.left-i.left+"px"),o.left+o.width>i.left&&(n.style.width=i.left-o.left+"px"))}}function d(){var t=document.getElementById("vue-chart-left-table-list"),e=document.getElementById("vue-chart-right-draw-content"),a=document.documentElement.clientHeight,n=document.getElementById("layout-content-main");n&&(n.style.height=document.documentElement.clientHeight-130+"px"),t&&(t.style.maxHeight=a-362+"px"),e&&(e.style.maxHeight=a-362+"px")}function u(t,e){var a="";t=t.replace("-","/");var n=new Date(t+" 00:00:00").getTime(),i=new Date,o=i.getTime(),r=e;return a=n<r?n:r,a=a<o?a:o,E.a.dateToStr("YYYY-MM-DD",new Date(a))}function s(t,e){t=t.replace("-","/"),e=e.replace("-","/");var a="",n=new Date(t+" 00:00:00").getTime(),i=new Date(e+" 00:00:00").getTime();return a=n>i?n:i,E.a.dateToStr("YYYY-MM-DD",new Date(a))}function p(t){}function f(t){switch(t){case"NORMAL":case"ADVANCE":case"DELAY":return"#fff";case"UNDERWAY":return"#E03B3B";case"OVERDUE":return"#E58F00";case"PLANNED":return"#fff";default:return"#666"}}function h(t,e){var a="row-current-more current-more-task ";return t===e.row.tasks.length-1&&(a="row-current-more current-more-task noBorder"),a}function m(t){return"UNDERWAY"===t||"OVERDUE"===t||"UNKNOWN"===t?"#BE8525":"NORMAL"===t||"ADVANCE"===t?"#5A8C23":"#666666"}function p(t){switch(t){case"NORMAL":case"ADVANCE":return"#C2E998";case"DELAY":return"#F69C9C";case"UNDERWAY":case"OVERDUE":return"#FFE9AF";case"PLANNED":default:return"transparent"}}function g(t){return"OVERDUE"===t||"UNKNOWN"===t?"1px dashed #FF6D6D":"0px solid #FF6D6D"}function v(t){return"UNDERWAY"===t||"OVERDUE"===t||"UNKNOWN"===t?"#BE8525":"NORMAL"===t||"ADVANCE"===t?"#5A8C23":"#666666"}function D(t){var e=Object.prototype.toString.call(t);return t?"[object Date]"===e?E.a.dateToStr("YYYY-MM-DD HH:mm:SS",new Date(t)):"[object String]"===e?t+" 00:00:00":void 0:""}var b=a("woOf"),w=a.n(b),y=a("g4Hp"),E=a.n(y);a("bsze");e.a={getAllMaxAndMin:n,getMonthDayNum:i,poptipOver:o,fontCover:c,windowResize:d,compareEndTime:s,compareTime:u,getDivColor:f,getDivClass:h,getActualColor:m,getActualBgColor:p,getActualBorder:g,getLabelColor:v,timeToStr:D}},SnYf7:function(t,e,a){var n=a("ax80");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("4e316ca9",n,!0,{sourceMap:!1})},"Ta+G":function(t,e,a){"use strict";function n(t){var e=t.type;return"DOMMouseScroll"!=e&&"mousewheel"!=e||(t.delta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3),t.srcElement&&!t.target&&(t.target=t.srcElement),t.preventDefault||void 0===t.returnValue||(t.preventDefault=function(){t.returnValue=!1}),t}var i=function(t,e,a,i){console.log("-------"),window.addEventListener?("mousewheel"===e&&void 0!==document.mozFullScreen&&(e="DOMMouseScroll"),t.addEventListener(e,function(t){a(n(t))},i||!1)):window.attachEvent&&t.attachEvent("on"+e,function(t){t=t||window.event,a(n(t))})};e.a=i},ax80:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".edit-article .tag{width:50px;position:absolute;background:#e0c4f0;top:0;left:0;height:100%;opacity:.1}.edit-article .ivu-tooltip,.edit-article .ivu-tooltip-rel{position:static}.edit-article .col-tool-label .ivu-tooltip-popper .ivu-tooltip-arrow{display:none}.edit-article .every-col{height:40px;border-bottom:1px solid #f0f0f0}.edit-article .article{position:relative;background:transparent;height:28px;cursor:pointer}.edit-article .article .line{border-bottom:1px dashed #e9f0f6;position:relative;top:19px;z-index:1}.edit-article .article .label{position:absolute;height:29px;line-height:30px;padding-left:6px;width:100%;background:transparent;top:5px;font-weight:700;white-space:nowrap;z-index:3}.edit-article .article .plan{background:#e9f0f6;color:#666}.edit-article .article .actual,.edit-article .article .plan{height:29px;border-radius:7px 7px 8px 8px;line-height:30px;padding-left:6px;position:absolute;cursor:pointer;top:5px;white-space:nowrap;font-weight:700;z-index:2}.edit-article .article .actual{color:#fff}.edit-article .article .actual-content,.edit-article .article .plan-content{display:inline-block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",""])},bsze:function(t,e,a){"use strict";function n(t){var e=["角","分"],a=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],n=[["元","万","亿"],["","拾","佰","仟"]],i=t<0?"负":"";t=Math.abs(t);var o="",r=(t+"").split(".").length,l="00";r>1&&(l=(t+"").split(".")[1]);for(var c=0;c<e.length;c++)a[l[c]]&&(o+=(a[l[c]]+e[c]).replace(/零./,""));o=o||"整",t=Math.floor(t);for(var c=0;c<n[0].length&&t>0;c++){for(var d="",u=0;u<n[1].length&&t>0;u++)d=a[t%10]+n[1][u]+d,t=Math.floor(t/10);o=d.replace(/(零.)*零$/,"").replace(/^$/,"零")+n[0][c]+o}return i+o.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}function i(t){for(var e in t)t[e]=""}function o(t,e){var a=[];for(var n in t)t.hasOwnProperty(n)&&a.push(n+"="+t[n]);var e=e+"?"+a.join("&");window.location.href=e}function r(){var t=location.search,e=new Object;if(-1!=t.indexOf("?"))for(var a=t.substr(1),n=a.split("&"),i=0;i<n.length;i++)e[n[i].split("=")[0]]=unescape(n[i].split("=")[1]);return e}function l(t){var e=window.location.href,a=e.split("?")[0],n=[];for(var i in t)t.hasOwnProperty(i)&&n.push(i+"="+t[i]);a=a+"?"+n.join("&"),location.href=a}function c(t){for(var e,a=0,n={},i=[];e=t[a++];){var o=e.id;n[o]||(n[o]=!0,i.push(e))}return i}function d(t,e,a,n){for(var i=0;i<e.length;i++)for(var o=0;o<t.length;o++){var r=a?t[o][a]:t[o],l=n?e[i][n]:e[i];r==l&&t.splice(o,1)}return t}function u(t,e){var a=document.createElement("a");a.href=t,a.download=e,console.log("a--",a,t,e),a.click()}function s(t,e){var a=document.createElement("a");a.href=t,a.target="_blank",a.download=e,a.click()}function p(t,e){return e=parseInt(e,10),new Date(t,e,0).getDate()}function f(t,e){var a,n,i;return a=t.split("-"),n=new Date(a[1]+"/"+a[2]+"/"+a[0]),a=e.split("-"),i=new Date(a[1]+"/"+a[2]+"/"+a[0]),parseInt(Math.abs(n-i)/1e3/60/60/24)}function h(t,e,a){return void 0===a?E()(t,e,!1):E()(t,a,!1!==e)}function m(t,e){var a=new Date(t),n=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e);a.getFullYear(),a.getMonth(),a.getDate();return n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()}function g(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div"),a=e.style;a.position="absolute",a.top=0,a.left=0,a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;return n===i&&(i=e.clientWidth),document.body.removeChild(e),n-i}function v(t,e){var a,n,i;return a=t.split("-"),n=new Date(a[1]+"/"+a[2]+"/"+a[0]),a=e.split("-"),i=new Date(a[1]+"/"+a[2]+"/"+a[0]),parseInt(Math.abs(n-i)/1e3/60/60/24)}var D=a("syeK"),b=a("Ta+G"),w=a("Asao"),y=a("IoNu"),E=a.n(y),T=a("Eqh0"),S=a("9pIO");e.a={smalltoBIG:n,clearForm:i,commonExport:o,getRequest:r,addParams:l,arrayNoRepeat:c,arrayCompare:d,thousand:D.a,downFile:u,addEvent:b.a,dataType:w.a,getDaysInOneMonth:p,dateDiff:f,debounce:h,getScrollBarSize:g,dateCompatible:T.a,tableSort:S.a,dateRange:m,downImg:s,timeRange:v}},fkGB:function(t,e,a){"use strict";function n(t){a("SnYf7")}Object.defineProperty(e,"__esModule",{value:!0});var i=a("0Jty"),o=a("6Qxz"),r=a("VU/8"),l=n,c=r(i.a,o.a,!1,l,null,null);e.default=c.exports},syeK:function(t,e,a){"use strict";function n(t){if(null===t||void 0===t)return 0;if(isNaN(t))return"NaN";var e=t.toString();if(/^-?\d+\.?\d+$/.test(e))if(/^-?\d+$/.test(e))e=e.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");else{var a=e.split("."),n=a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");e=n+"."+a[1]}return e}e.a=n}});
//# sourceMappingURL=edit-article.b9b509c2c68cd907a910.js.map