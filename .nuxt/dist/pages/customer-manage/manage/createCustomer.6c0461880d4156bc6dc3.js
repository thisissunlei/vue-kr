webpackJsonp([172],{"0iqM":function(e,t,a){var r=a("Auuj");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("ec8b5bde",r,!0,{sourceMap:!1})},Auuj:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".bill-search-class[data-v-3253cfa5]{width:50%}.bill-search-class[data-v-3253cfa5],.bill-search[data-v-3253cfa5]{display:inline-block;padding-left:32px}.bill-search .u-date-txt[data-v-3253cfa5]{padding:0 25px;font-size:14px;color:#666}",""])},RO4d:function(e,t,a){"use strict";function r(e){a("0iqM")}Object.defineProperty(t,"__esModule",{value:!0});var o=a("jmWt"),s=a("bVTc"),n=a("VU/8"),i=r,l=n(o.a,s.a,!1,i,"data-v-3253cfa5",null);t.default=l.exports},bVTc:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Form",{ref:"fromFieldValidate",attrs:{model:e.formItem,"label-position":"top",rules:e.ruleValidate}},[a("Form-item",{staticClass:"bill-search-class",attrs:{label:"客户名称",prop:"company"}},[a("i-input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入客户名称",maxlength:e.maxName},model:{value:e.formItem.company,callback:function(t){e.$set(e.formItem,"company",t)},expression:"formItem.company"}})],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"相关社区",prop:"communityId"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入社区名称",filterable:"",clearable:""},model:{value:e.formItem.communityId,callback:function(t){e.$set(e.formItem,"communityId",t)},expression:"formItem.communityId"}},e._l(e.communityList,function(t){return a("Option",{key:t.id,attrs:{value:""+t.id}},[e._v(e._s(t.name))])}))],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"客户来源类型",prop:"channelType"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请选择客户来源类型",clearable:""},on:{"on-change":e.sourceTypeChange},model:{value:e.formItem.channelType,callback:function(t){e.$set(e.formItem,"channelType",t)},expression:"formItem.channelType"}},e._l(e.customerSourceTypeOptions,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n                   "+e._s(t.label)+"\n               ")])}))],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"客户来源",prop:"channelId"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请选择客户来源",clearable:""},model:{value:e.formItem.channelId,callback:function(t){e.$set(e.formItem,"channelId",t)},expression:"formItem.channelId"}},e._l(e.customerSourceOptions,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n                   "+e._s(t.label)+"\n               ")])}))],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"客户类型",prop:"type"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请选择客户类型",clearable:""},model:{value:e.formItem.type,callback:function(t){e.$set(e.formItem,"type",t)},expression:"formItem.type"}},e._l(e.customerTypeOptions,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n                   "+e._s(t.label)+"\n               ")])}))],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"客户联系人",prop:"name"}},[a("i-input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入客户联系人",maxlength:e.max},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"联系人手机号",prop:"mobile"}},[a("i-input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入联系人手机号"},model:{value:e.formItem.mobile,callback:function(t){e.$set(e.formItem,"mobile",t)},expression:"formItem.mobile"}})],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"联系人邮箱",prop:"mail"}},[a("i-input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入联系人邮箱"},model:{value:e.formItem.mail,callback:function(t){e.$set(e.formItem,"mail",t)},expression:"formItem.mail"}})],1)],1)},o=[],s={render:r,staticRenderFns:o};t.a=s},jmWt:function(e,t,a){"use strict";var r=a("woOf"),o=a.n(r);t.a={name:"HeighSearch",props:{mask:String,keys:String,params:{}},data:function(){var e=this,t=function(e,t,a){/(^(\d{3,4}-)?\d{3,4}-?\d{3,4}$)|(^(\+86)?(1[356847]\d{9})$)/.test(t)?a():a(new Error("请填写正确的联系方式"))};return{customerSourceTypeOptionsParam:"com.krspace.order.api.enums.customer.CsrChannelType",customerSourceTypeOptions:[],customerSourceOptions:[],customerTypeOptions:[],dateError:!1,isShow:!0,effectError:!1,canSubmit:!0,formItem:{company:"",communityId:"",channelType:"",channelId:"",type:"PERSONAL",name:"",mobile:"",mail:""},statusList:[],communityList:[],max:25,maxName:50,ruleValidate:{communityId:[{required:!0,message:"请选择社区"}],company:[{required:!0,message:"请填写客户名称",trigger:"change"},{required:!0,trigger:"blur",validator:function(t,a,r){a=a.replace(/(^\s+)|(\s+$)/g,"").replace(/\s/g,""),e.formItem.company=a,""===a?(e.canSubmit=!1,r(new Error("请填写客户联系人"))):e.$http.get("check-company",{company:a}).then(function(t){"ok"==t.message?(e.canSubmit=!0,r()):r(new Error("客户名称不可重复"))}).catch(function(t){e.canSubmit=!1,r(new Error("客户名称不可重复"))})}}],mail:[{required:!0,message:"请填写客户联系人邮箱",type:"email"}],name:[{required:!0,message:"请填写客户联系人"}],mobile:[{required:!0,message:"请填写客户联系人电话"},{required:!0,trigger:"blur",validator:t}],channelType:[{required:!0,message:"请选择客户来源类型"}],type:[{required:!0,message:"请选择客户类型"}],channelId:[{required:!0,message:"请选择客户来源"}]}}},watch:{$props:{deep:!0,handler:function(e){this.formItem=o()({},e.params)}}},mounted:function(){this.getCommunity(),this.getCustomerSourceTypeOptions(),this.getCustomerTypeOptions()},updated:function(){var e=!1,t=!1;for(var a in this.formItem)this.formItem[a]||(t=!0);console.log("haveNull",t),t||(e=o()({},this.formItem)),this.$emit("newData",e,this.canSubmit)},methods:{getCustomerTypeOptions:function(){var e=this,t={enmuKey:"com.krspace.op.api.enums.customer.CustomerType"};this.$http.get("get-enmu-list",t).then(function(t){e.customerTypeOptions=t.data.map(function(e){return e.label=e.desc,e})}).catch(function(t){e.$Notice.error({title:t.message})})},getCustomerSourceTypeOptions:function(){var e=this;this.$http.get("get-enmu-list",{enmuKey:this.customerSourceTypeOptionsParam}).then(function(t){e.customerSourceTypeOptions=t.data.map(function(e){return e.label=e.desc,e})}).catch(function(t){e.$Notice.error({title:t.message})})},getCommunity:function(){var e=this;this.$http.get("join-bill-community","").then(function(t){e.communityList=t.data.items}).catch(function(t){e.$Notice.error({title:t.message})})},sourceTypeChange:function(e){var t=this;console.log("value",e);var a={type:e};this.$http.get("get-customermanage-customer-type",a).then(function(e){console.log("response",e),t.customerSourceOptions=e.data.map(function(e){return e.label=e.name,e.value=e.id,e})}).catch(function(e){t.$Notice.error({title:e.message})})}}}}});
//# sourceMappingURL=createCustomer.6c0461880d4156bc6dc3.js.map