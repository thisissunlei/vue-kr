webpackJsonp([171],{CiMV:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Form",{ref:"editCustomerData",attrs:{model:e.formItem,"label-position":"top",rules:e.ruleValidate}},[a("Form-item",{staticClass:"bill-search-class",attrs:{label:"客户名称",prop:"company"}},[a("i-input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入客户名称",maxlength:e.maxName},model:{value:e.formItem.company,callback:function(t){e.$set(e.formItem,"company",t)},expression:"formItem.company"}})],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"相关社区",prop:"communityId"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入社区名称",filterable:"",clearable:""},model:{value:e.formItem.communityId,callback:function(t){e.$set(e.formItem,"communityId",t)},expression:"formItem.communityId"}},e._l(e.communityList,function(t){return a("Option",{key:t.id,attrs:{value:""+t.id}},[e._v(e._s(t.name))])}))],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"客户来源类型",prop:"channelType"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请选择客户来源类型",clearable:""},on:{"on-change":e.sourceTypeChange},model:{value:e.formItem.channelType,callback:function(t){e.$set(e.formItem,"channelType",t)},expression:"formItem.channelType"}},e._l(e.customerSourceTypeOptions,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n                   "+e._s(t.label)+"\n               ")])}))],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"客户来源",prop:"channelId"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请选择客户来源",clearable:""},model:{value:e.formItem.channelId,callback:function(t){e.$set(e.formItem,"channelId",t)},expression:"formItem.channelId"}},e._l(e.customerSourceOptions,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n                   "+e._s(t.label)+"\n               ")])}))],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"客户类型",prop:"type"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请选择客户类型",clearable:"",disabled:e.isCompany},model:{value:e.formItem.type,callback:function(t){e.$set(e.formItem,"type",t)},expression:"formItem.type"}},e._l(e.customerTypeOptions,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v("\n                   "+e._s(t.label)+"\n               ")])}))],1),e.isShow?a("Form-item",{staticClass:"bill-search-class",attrs:{label:"客户联系人",prop:"name"}},[a("i-input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入客户联系人",maxlength:e.max},model:{value:e.formItem.name,callback:function(t){e.$set(e.formItem,"name",t)},expression:"formItem.name"}})],1):e._e(),e.isShow?a("Form-item",{staticClass:"bill-search-class",attrs:{label:"联系人手机号",prop:"mobile"}},[a("i-input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入联系人手机号"},model:{value:e.formItem.mobile,callback:function(t){e.$set(e.formItem,"mobile",t)},expression:"formItem.mobile"}})],1):e._e(),e.isShow?a("Form-item",{staticClass:"bill-search-class",attrs:{label:"联系人邮箱",prop:"mail"}},[a("i-input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入联系人邮箱"},model:{value:e.formItem.mail,callback:function(t){e.$set(e.formItem,"mail",t)},expression:"formItem.mail"}})],1):e._e()],1)},s=[],o={render:i,staticRenderFns:s};t.a=o},SmmF:function(e,t,a){var i=a("j3mS");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("60df6fbd",i,!0,{sourceMap:!1})},j3mS:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,".bill-search-class[data-v-69a116f6]{width:50%}.bill-search-class[data-v-69a116f6],.bill-search[data-v-69a116f6]{display:inline-block;padding-left:32px}.bill-search .u-date-txt[data-v-69a116f6]{padding:0 25px;font-size:14px;color:#666}",""])},mvkh:function(e,t,a){"use strict";var i=a("woOf"),s=a.n(i);t.a={name:"HeighSearch",props:{mask:String,keys:String,params:{},initailData:{}},data:function(){var e=this,t=this,a=function(e,t,a){/(^(\d{3,4}-)?\d{3,4}-?\d{3,4}$)|(^(\+86)?(1[356847]\d{9})$)/.test(t)?a():a(new Error("请填写正确的联系方式"))};return{isCompany:!0,customerSourceTypeOptionsParam:"com.krspace.order.api.enums.customer.CsrChannelType",customerSourceTypeOptions:[],customerSourceOptions:[],customerTypeOptions:[],dateError:!1,effectError:!1,canSubmit:!0,isShow:!0,formItem:{company:"",communityId:1,channelType:"",channelId:"",type:"",name:"",mobile:"",mail:""},statusList:[],firstSource:[],secondSource:[],communityList:[],max:25,maxName:50,ruleValidate:{communityId:[{required:!0,message:"请选择社区"}],company:[{required:!0,message:"请填写客户名称",trigger:"change"},{required:!0,trigger:"blur",validator:function(a,i,s){i=i.replace(/(^\s+)|(\s+$)/g,"").replace(/\s/g,""),e.formItem.company=i,""===i?(e.canSubmit=!1,s(new Error("请填写客户联系人"))):i==t.initailData.company?(e.canSubmit=!0,s()):e.$http.get("check-company",{company:i}).then(function(t){"ok"==t.message?(e.canSubmit=!0,s()):s(new Error("客户名称不可重复"))}).catch(function(t){e.canSubmit=!1,s(new Error("客户名称不可重复"))})}}],mail:[{required:!0,message:"请填写客户联系人邮箱",type:"email"}],name:[{required:!0,message:"请填写客户联系人"}],mobile:[{required:!0,message:"请填写客户联系人电话"},{required:!0,trigger:"blur",validator:a}],channelType:[{required:!0,message:"请选择客户来源类型"}],type:[{required:!0,message:"请选择客户类型"}],channelId:[{required:!0,message:"请选择客户来源"}]}}},mounted:function(){this.getCommunity(),this.getCustomerSourceTypeOptions(),this.getCustomerTypeOptions(),console.log("this.initailData",this.initailData),this.formItem=s()({},this.initailData),console.log("this.formItem",this.formItem),this.formItem.communityId=this.initailData.communityId+"",console.log("this.formItem",this.formItem),this.isShow="ENTERPRISE"!=this.initailData.type},updated:function(){var e=!1,t=!1;for(var a in this.formItem)this.formItem[a]||(t=!0);console.log("haveNull",t),t||(e=s()({},this.formItem)),console.log("this.canSubmit",this.canSubmit),this.$emit("editCustomer",e,this.canSubmit)},methods:{getCustomerTypeOptions:function(){var e=this,t={enmuKey:"com.krspace.op.api.enums.customer.CustomerType"};this.$http.get("get-enmu-list",t).then(function(t){e.customerTypeOptions=t.data.map(function(e){return e.label=e.desc,e})}).catch(function(t){e.$Notice.error({title:t.message})})},getCustomerSourceTypeOptions:function(){var e=this;this.$http.get("get-enmu-list",{enmuKey:this.customerSourceTypeOptionsParam}).then(function(t){e.customerSourceTypeOptions=t.data.map(function(e){return e.label=e.desc,e})}).catch(function(t){e.$Notice.error({title:t.message})})},sourceTypeChange:function(e){var t=this,a={type:e};this.$http.get("get-customermanage-customer-type",a).then(function(e){console.log("response",e),t.customerSourceOptions=e.data.map(function(e){return e.label=e.name,e.value=e.id,e})}).catch(function(e){t.$Notice.error({title:e.message})})},getCommunity:function(){var e=this;this.$http.get("join-bill-community","").then(function(t){e.communityList=t.data.items}).catch(function(t){e.$Notice.error({title:t.message})})}}}},te6b:function(e,t,a){"use strict";function i(e){a("SmmF")}Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvkh"),o=a("CiMV"),r=a("VU/8"),n=i,l=r(s.a,o.a,!1,n,"data-v-69a116f6",null);t.default=l.exports}});
//# sourceMappingURL=editCustomer.86422870b2eff16102b6.js.map