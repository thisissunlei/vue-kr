webpackJsonp([28,161],{"+7vI":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".ui-message-content{height:184px}.ui-message-content img{width:100px;height:100px;display:block;margin:20px auto}.ui-message-content .ui-reminder{text-align:center;font-size:18px;line-height:26px;color:#333}.ui-message{position:relative;z-index:1200}.ui-message .ivu-modal-footer{border:none;padding:0}.ui-message .u-txt-green{color:#77cd50}.ui-message .u-txt-red{color:#ff6868}",""])},"+RXz":function(t,e,a){var i=a("kxFB");e=t.exports=a("FZ+f")(!1),e.push([t.i,".page{margin-top:20px}.m-bill-search{display:inline-block;height:22px;margin:16px 20px;vertical-align:bottom}.m-bill-search span{width:22px;height:22px;cursor:pointer;background:url("+i(a("dwhu"))+") no-repeat 50%;background-size:contain;float:right}.m-search{color:#2b85e4;display:inline-block;cursor:pointer}.cachet-box{width:50%;position:relative;float:left;text-align:center;cursor:pointer}.cachet-box .select{width:60px;height:60px;border-radius:50%;border:2px solid #fff;position:absolute;top:50%;left:50%;margin-left:-31px;margin-top:-31px}.cachet-box .cachet{border:2px solid #7ed321;background:#7ed321 url("+i(a("c2kg"))+") no-repeat;background-size:60%;background-position:50%}.contract-center-list .ivu-table-fixed-right:before,.contract-center-list .ivu-table-fixed:before{z-index:3}.contract-center-list .ivu-tooltip-inner{white-space:normal}.contract-center-list .ivu-table-fixed-right{width:150px!important}",""])},"/Xqw":function(t,e,a){var i=a("+RXz");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("cbb061c2",i,!0,{sourceMap:!1})},"5TZu":function(t,e,a){"use strict";var i=a("8FHl"),o=a("SdYl"),n=a("VU/8"),r=n(i.a,o.a,!1,null,null,null);e.a=r.exports},"6tff":function(t,e,a){t.exports=a.p+"img/error.af8f937.png"},"7WgU":function(t,e,a){t.exports=a.p+"img/cachet.21ed40f.png"},"81Xy":function(t,e,a){"use strict";var i=a("woOf"),o=a.n(i);a("/5sW");e.a={props:["params"],data:function(){return{dateError:!1,formItem:o()({communityName:"",communityCode:"",pigeonholed:"",contractType:"",customName:"",maxCTime:"",minCTime:"",serialNumber:""},this.params),archiveList:[{value:"true",label:"已归档"},{value:"false",label:"未归档"}],orderList:[{value:"UNENFORCED",label:"未生效"},{value:"EXECUTED",label:"已生效"},{value:"CANCELLATION",label:"已作废"}],typeList:[],communityList:[]}},created:function(){this.formItem=o()({},this.$route.query)},mounted:function(){var t=this;this.$http.get("join-bill-community","",function(e){t.communityList=e.data.items},function(e){t.$Notice.error({title:e.message})}),this.$http.get("get-center-prepare-data","",function(e){t.typeList=e.data.items},function(e){t.$Notice.error({title:e.message})})},updated:function(){this.formItem.minCTime&&this.formItem.maxCTime&&this.formItem.minCTime>this.formItem.maxCTime?this.dateError=!0:this.dateError=!1,this.$emit("bindData",this.formItem,this.dateError)}}},"8FHl":function(t,e,a){"use strict";e.a={props:["label","type","checkAction","styles"],data:function(){return{data:[]}},methods:{buttonClick:function(t){this.$emit("click",t)}},mounted:function(){var t=this;setTimeout(function(){t.data=window.resourcesCode||[]},200)}}},"9pIO":function(t,e,a){"use strict";function i(t,e){if(t)for(var a=t.querySelectorAll(".ivu-table-sort"),i=0;i<a.length;i++){var n=a[i];n.style.width="auto",n.style.height="40px";var r=n.parentNode,s=r.querySelectorAll("span")[0].innerHTML;o(n,t,s,e)}}function o(t,e,a,i){t.innerHTML="";var o=document.createElement("span");o.className=r("init"),t.appendChild(o),o.onclick=function(t){var o=t.target,c=o.className;s(e),o.className=r(c),i({label:a,order:n(c)})}}function n(t){return"kr-table-sort-icon-asc"===t?"desc":"asc"}function r(t){switch(t){case"kr-table-sort-icon-init":return"kr-table-sort-icon-asc";case"kr-table-sort-icon-asc":return"kr-table-sort-icon-desc";case"kr-table-sort-icon-desc":return"kr-table-sort-icon-asc";default:return"kr-table-sort-icon-init"}}function s(t){for(var e=t.querySelectorAll(".ivu-table-sort span"),a=0;a<e.length;a++){e[a].className=r("init")}}e.a=i},Asao:function(t,e,a){"use strict";function i(){switch((0,Object.prototype.toString.call)(0)){case"[object String]":return"string";case"[object Number]":return"number";case"[object Boolean]":return"boolean";case"[object Symbol]":return"symbol";case"[object Undefined]":return"undefined";case"[object Null]":return"null";case"[object Function]":return"function";case"[object Date]":return"date";case"[object Array]":return"array";case"[object RegExp]":return"regExp";case"[object Error]":return"error";case"[object HTMLDocument]":return"node";case"[object global]":return"global"}}e.a=i},Eqh0:function(t,e,a){"use strict";function i(t){if(t){return n.a.dateToStr("YYYY/MM/DD HH:mm:SS",new Date(t)).replace(/\//g,"-")}return""}var o=a("g4Hp"),n=a.n(o);e.a=i},GFAb:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{ref:"formItem",attrs:{model:t.formItem,"label-position":"top"}},[a("Form-item",{staticClass:"bill-search-class",attrs:{label:"合同编号"}},[a("i-input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入合同编号"},model:{value:t.formItem.serialNumber,callback:function(e){t.$set(t.formItem,"serialNumber",e)},expression:"formItem.serialNumber"}})],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"客户名称"}},[a("i-input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入客户名称"},model:{value:t.formItem.customName,callback:function(e){t.$set(t.formItem,"customName",e)},expression:"formItem.customName"}})],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"社区名称"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入社区名称",filterable:"",clearable:""},model:{value:t.formItem.communityCode,callback:function(e){t.$set(t.formItem,"communityCode",e)},expression:"formItem.communityCode"}},t._l(t.communityList,function(e){return a("Option",{key:e.code,attrs:{value:e.code}},[t._v(t._s(e.name))])}))],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"合同类型"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入合同类型",clearable:""},model:{value:t.formItem.contractType,callback:function(e){t.$set(t.formItem,"contractType",e)},expression:"formItem.contractType"}},t._l(t.typeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n                   "+t._s(e.label)+"\n               ")])}))],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"合同状态"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入合同状态",clearable:""},model:{value:t.formItem.contractStatus,callback:function(e){t.$set(t.formItem,"contractStatus",e)},expression:"formItem.contractStatus"}},t._l(t.orderList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n                   "+t._s(e.label)+"\n               ")])}))],1),a("Form-item",{staticClass:"bill-search-class",attrs:{label:"归档状态"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入归档状态",clearable:""},model:{value:t.formItem.pigeonholed,callback:function(e){t.$set(t.formItem,"pigeonholed",e)},expression:"formItem.pigeonholed"}},t._l(t.archiveList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n                   "+t._s(e.label)+"\n               ")])}))],1),a("Form-item",{staticClass:"bill-search",attrs:{label:"创建日期"}},[a("DatePicker",{staticStyle:{width:"252px"},attrs:{type:"date",placeholder:"创建开始日期"},model:{value:t.formItem.minCTime,callback:function(e){t.$set(t.formItem,"minCTime",e)},expression:"formItem.minCTime"}}),a("span",{staticClass:"u-date-txt"},[t._v("至")]),a("DatePicker",{staticStyle:{width:"252px"},attrs:{type:"date",placeholder:"创建结束日期"},model:{value:t.formItem.maxCTime,callback:function(e){t.$set(t.formItem,"maxCTime",e)},expression:"formItem.maxCTime"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dateError,expression:"dateError"}],staticStyle:{color:"red","padding-left":"32px"}},[t._v("开始日期不能大于结束日期")])],1)],1)},o=[],n={render:i,staticRenderFns:o};e.a=n},GorF:function(t,e,a){"use strict";e.a={}},HIhf:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("Buttons",{attrs:{type:"text",checkAction:"contract_file_upload",label:"上传附件",styles:"color:rgb(43, 133, 228);padding: 2px 7px;"},on:{click:t.switchList}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpenList,expression:"isOpenList"}],staticClass:"list-box"},[a("div",{staticClass:"mask",on:{click:t.switchList}}),a("div",{staticClass:"list",style:t.listStyle},[a("div",[a("Upload",{attrs:{action:"//jsonplaceholder/","before-upload":t.onChange}},[a("Button",{attrs:{type:"ghost",icon:"ios-plus-outline"}},[t._v("上传附件")]),a("div",{style:{display:t.isShowProgress}},[a("Progress",{attrs:{percent:t.progress,"stroke-width":5}})],1)],1),a("div",{staticClass:"item-box"},t._l(t.defaultList,function(e){return a("div",{key:e.id,staticClass:"file-list",on:{click:function(a){t.downFille(e)}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.fileName)+"\n\t\t\t\t\t\t")])}))],1)])])],1)])},o=[],n={render:i,staticRenderFns:o};e.a=n},HJVY:function(t,e,a){var i=a("+7vI");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("03eefe9c",i,!0,{sourceMap:!1})},IMWu:function(t,e,a){t.exports=a.p+"img/success.7b096f4.png"},IoNu:function(t,e){t.exports=function(t,e,a,i){function o(){function o(){r=Number(new Date),a.apply(c,u)}function s(){n=void 0}var c=this,l=Number(new Date)-r,u=arguments;i&&!n&&o(),n&&clearTimeout(n),void 0===i&&l>t?o():!0!==e&&(n=setTimeout(i?s:o,void 0===i?t-l:t))}var n,r=0;return"boolean"!=typeof e&&(i=a,a=e,e=void 0),o}},J0i4:function(t,e,a){"use strict";function i(t){a("pY0k")}var o=a("tBD1"),n=a("P67S"),r=a("VU/8"),s=i,c=r(o.a,n.a,!1,s,"data-v-872aada8",null);e.a=c.exports},NqCb:function(t,e,a){t.exports=a.p+"img/noCachet.fb035f6.png"},P67S:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.classType[t.type]},[t._v("\n    "+t._s(t.title)+"\n")])},o=[],n={render:i,staticRenderFns:o};e.a=n},P74E:function(t,e,a){"use strict";var i=a("woOf"),o=a.n(i),n=a("9Jg8"),r=a("bsze"),s=a("5TZu");e.a={name:"krUpload",components:{Buttons:s.a},props:{columnDetail:Object,file:Array,publicUse:{default:!1,type:Boolean},onUpUrl:Function},data:function(){return{isOpenList:!1,listStyle:{left:0,top:0},newWin:"",params:{},defaultList:this.file.length?this.file:[],serverUrl:"",nowFile:{},fileDetail:{},progress:0,isShowProgress:"none"}},methods:{config:function(){this.$Notice.config({top:80,duration:3})},switchList:function(t){var e=t.target.getBoundingClientRect();this.isOpenList=!this.isOpenList,this.isOpenList?document.body.style.overflow="hidden":document.body.style.overflow="auto",this.listStyle={left:e.left+Math.ceil(e.width/2)+"px",top:e.top+e.height+5+"px",transform:"translateX(-50%)"}},submitUpload:function(t){this.config(),this.onUpUrl&&this.onUpUrl(t,this.columnDetail)},getUpUrl:function(){var t=this,e=this;this.config(),n.a.get("get-vue-upload-url",{isPublic:!0,category:"op/upload"},function(e){t.serverUrl=e.data.serverUrl},function(t){e.$Notice.error({title:t.message})})},onChange:function(t){var e=this,a=t,i=t.name;if(a){if(a){this.isShowProgress="block",this.progress=0;var o=window.setInterval(function(){e.progress>=100&&window.clearInterval(o),e.progress+=10},300)}var n=new FormData,r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){var t=r.response.data;n.append("OSSAccessKeyId",t.ossAccessKeyId),n.append("policy",t.policy),n.append("Signature",t.sign),n.append("key",t.pathPrefix+"/"+a.name),n.append("uid",t.uid),n.append("callback",t.callback),n.append("x:original_name",a.name),n.append("file",a),e.onTokenSuccess({sourceservicetoken:t.token,docTypeCode:t.docTypeCode,operater:t.operater});var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){var t=o.response;if(200===o.status)if(t&&t.code>0){var a={};e.isShowProgress="none",e.progress=100,a.name=i,a.url=t.data.url,a.fileId=""+t.data.id,a.fileName=i,a.fileUrl=t.data.url,a.type="ATTACHMENT",e.onSuccess(a)}else e.isShowProgress="none",e.progress=100,console.log(t.msg),e.$Notice.error({title:t.msg});else 413==o.status?(e.isShowProgress="none",e.progress=100,e.$Notice.error({title:"您上传的文件过大！"})):(e.isShowProgress="none",e.progress=100,e.$Notice.error({title:"后台报错请联系管理员！"}))}},o.open("POST",t.serverUrl,!0),o.responseType="json",o.send(n)}else e.onTokenError()},r.open("GET","/api/krspace-op-web/sys/upload-policy?isPublic="+e.publicUse+"&category=op/upload",!0),r.responseType="json",r.send()}},onSuccess:function(t){var e=o()({},t);this.defaultList.push(e),this.submitUpload([e])},onTokenSuccess:function(){},downFille:function(t){var e=this;this.$http.post("get-station-contract-pdf-url",{id:t.fileId},function(t){r.a.downFile(t.data)},function(t){e.$Notice.error({title:t.message})})},listMove:function(t,e){this.defaultList=[].concat(e)}}}},SJmi:function(t,e,a){"use strict";e.a={name:"Message",props:["type","openMessage","warn"],data:function(){return{flag:this.openMessage}},watch:{$props:{deep:!0,handler:function(t){this.flag=t.openMessage}}},updated:function(){var t=this;if("success"==this.type&&this.flag)return void setTimeout(function(){t.flag=!1,t.$emit("changeOpen",t.flag)},1500);this.$emit("changeOpen",this.flag)}}},SdYl:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.data.indexOf(t.checkAction)>-1?a("div",{staticClass:"v-button",staticStyle:{display:"inline-block"}},[a("Button",{style:t.styles,attrs:{type:t.type},on:{click:t.buttonClick}},[t._v(t._s(t.label))])],1):t._e()},o=[],n={render:i,staticRenderFns:o};e.a=n},"Ta+G":function(t,e,a){"use strict";function i(t){var e=t.type;return"DOMMouseScroll"!=e&&"mousewheel"!=e||(t.delta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3),t.srcElement&&!t.target&&(t.target=t.srcElement),t.preventDefault||void 0===t.returnValue||(t.preventDefault=function(){t.returnValue=!1}),t}var o=function(t,e,a,o){console.log("-------"),window.addEventListener?("mousewheel"===e&&void 0!==document.mozFullScreen&&(e="DOMMouseScroll"),t.addEventListener(e,function(t){a(i(t))},o||!1)):window.attachEvent&&t.attachEvent("on"+e,function(t){t=t||window.event,a(i(t))})};e.a=o},UDtf:function(t,e,a){var i=a("ZDFW");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("8983b92c",i,!0,{sourceMap:!1})},Ucgj:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,'.section-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:25px;position:relative}.section-title[data-v-872aada8]:before{height:24px;border:2px solid #499df1;position:absolute;width:0;content:"";display:inline-block;top:12px;left:0}.section-detail-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:15px;position:relative}',""])},XqYN:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".spinner[data-v-2aac378e]{width:60px;height:60px;position:relative;margin:100px auto}.double-bounce1[data-v-2aac378e],.double-bounce2[data-v-2aac378e]{width:100%;height:100%;border-radius:50%;background-color:#328ecc;opacity:.6;position:absolute;top:0;left:0;-webkit-animation:bounceLoading-data-v-2aac378e 2s infinite ease-in-out;animation:bounceLoading-data-v-2aac378e 2s infinite ease-in-out}.double-bounce2[data-v-2aac378e]{-webkit-animation-delay:-1s;animation-delay:-1s}@-webkit-keyframes bounceLoading-data-v-2aac378e{0%,to{-webkit-transform:scale(0)}50%{-webkit-transform:scale(1)}}@keyframes bounceLoading-data-v-2aac378e{0%,to{transform:scale(0);-webkit-transform:scale(0)}50%{transform:scale(1);-webkit-transform:scale(1)}}.ui-ladding-dowm[data-v-2aac378e]{float:left;width:100%;margin:0 5px;border-radius:5px;text-align:center;background-color:transparent}.ui-ladding-dowm-line[data-v-2aac378e]{display:inline-block;width:10px;height:10px;border-radius:15px;background-color:#499df1;margin:0 3px}.ui-ladding-dowm-1[data-v-2aac378e],.ui-ladding-dowm-2[data-v-2aac378e]{-webkit-animation:k-loadingP-data-v-2aac378e 1s infinite;animation:k-loadingP-data-v-2aac378e 1s infinite}.ui-ladding-dowm-2[data-v-2aac378e]{-webkit-animation-delay:.15s;animation-delay:.15s}.ui-ladding-dowm-3[data-v-2aac378e]{-webkit-animation:k-loadingP-data-v-2aac378e 1s infinite;animation:k-loadingP-data-v-2aac378e 1s infinite;-webkit-animation-delay:.3s;animation-delay:.3s}.ui-ladding-dowm-4[data-v-2aac378e]{-webkit-animation:k-loadingP-data-v-2aac378e 1s infinite;animation:k-loadingP-data-v-2aac378e 1s infinite;-webkit-animation-delay:.45s;animation-delay:.45s}@-webkit-keyframes k-loadingP-data-v-2aac378e{0%{-webkit-transform:scale(1);transform:scale(1);opacity:.9}50%{-webkit-transform:scale(.5);transform:scale(.5);opacity:.3}to{-webkit-transform:scale(1);transform:scale(1);opacity:.9}}@keyframes k-loadingP-data-v-2aac378e{0%{-webkit-transform:scale(1);transform:scale(1);opacity:.9}50%{-webkit-transform:scale(.5);transform:scale(.5);opacity:.3}to{-webkit-transform:scale(1);transform:scale(1);opacity:.9}}",""])},Xrh2:function(t,e,a){"use strict";function i(t){a("HJVY")}var o=a("SJmi"),n=a("qaDt"),r=a("VU/8"),s=i,c=r(o.a,n.a,!1,s,null,null);e.a=c.exports},ZDFW:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".list-box[data-v-aab66c6e]{position:fixed;width:100%;height:100%;left:0;top:0;z-index:999}.list-box .list[data-v-aab66c6e]{position:fixed;-webkit-transform:translateX(-50%);transform:translateX(-50%);display:inline-block;background:#fff;padding:10px;-webkit-box-shadow:0 0 5px #999;box-shadow:0 0 5px #999;border-radius:4px}.list-box .mask[data-v-aab66c6e]{position:absolute;left:0;top:0;bottom:0;right:0}.list-box .item-box[data-v-aab66c6e]{max-height:200px;overflow:auto}.list-box .file-list[data-v-aab66c6e]{padding:5px;color:#333}.list-box .file-list[data-v-aab66c6e]:hover{color:#2b85e4;cursor:pointer}",""])},Zfxc:function(t,e,a){"use strict";var i=a("mvHQ"),o=a.n(i),n=a("bOdI"),r=a.n(n),s=a("woOf"),c=a.n(s),l=a("J0i4"),u=a("ip17"),d=a("y6rJ"),p=a("dGYZ"),f=a("g4Hp"),h=a.n(f),m=a("bsze"),g=a("Xrh2"),v=a("5TZu");e.a={head:function(){return{title:"合同列表"}},components:{SectionTitle:l.a,krUpload:d.a,HeightSearch:p.default,Loading:u.a,Message:g.a,Buttons:v.a},data:function(){var t=this;return r()({params:{page:1,pageSize:15},newWin:"",effectDisabled:!1,describeDisabled:!1,tableHeight:200,MessageType:"",openMessage:!1,warn:"",openDown:!1,isCachet:!1,openTakeEffect:!1,openDescribe:!1,selectAllData:[],loadingStatus:!0,file:null,otherAgreed:0,parameter:{},upperData:{},upperError:!1,openSearch:!1,describeError:!1,detail:[],describeData:{},columnDetail:{},totalCount:1,maxWidth:170,downType:"down",columns:[{title:"合同编号",key:"serialNumber",align:"center",fixed:"left",width:150},{title:"客户名称",key:"customName",align:"center",fixed:"left",width:150},{title:"社区名称",key:"communityName",align:"center",width:200},{title:"合同类型",key:"contractType",align:"center",width:150},{title:"合同状态",key:"contractStatusName",align:"center",width:150},{title:"创建人",key:"creatorName",align:"center",width:150},{title:"服务费",key:"serviceCharges",align:"center",width:300},{title:"销售员",key:"salerName",align:"center",width:80},{title:"录入人",key:"inputor",align:"center",width:80},{title:"其他约定",key:"otherAgreed",align:"center",width:100,render:function(t,e){if(!e.row.otherAgreed)return"无";return t("Tooltip",{props:{placement:"top"}},[t("div",{style:{width:"60px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},e.row.otherAgreed),t("div",{style:{wordWrap:"break-word"},slot:"content"},e.row.otherAgreed)])}},{title:"附件",key:"haveAttachmentName",align:"center",width:80},{title:"工位数/独立空间",key:"stationAndBoard",align:"center",width:150},{title:"归档状态",key:"pigeonholedName",align:"center",width:100},{title:"放置位置",key:"placeLocation",align:"center",width:150,render:function(t,e){return e.row.placeLocation?e.row.placeLocation:"-"}},{title:"合同创建时间",key:"startAndEnd",align:"center",width:150,render:function(t,e){return h.a.dateToStr("YYYY-MM-DD  HH:mm:SS",new Date(e.row.cTime))}},{title:"起始时间",key:"cTime",align:"center",width:200,render:function(t,e){if(!e.row.endDate||!e.row.startDate)return"-";var a=h.a.dateToStr("YYYY-MM-DD",new Date(e.row.endDate));return h.a.dateToStr("YYYY-MM-DD",new Date(e.row.startDate))+"至"+a}},{title:"操作",key:"action",align:"center",width:150,fixed:"right",render:function(e,a){for(var i=a.row.file||[],o=[],n=[],r=0;r<i.length;r++)o.push(c()({name:i[r].fileName,url:""},i[r]));return a.row.isOldContract&&"打印",a.row.isOldContract?n.push(e("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){var e={requestId:a.row.requestId};t.downType="print",t.columnDetail=a.row,t.parameter=e,t.showDown()}}},"打印")):(n.push(e("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){t.jumpView(a)}}},"查看")),n.push(e("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){t.downType="down";var e={requestId:a.row.requestId};t.parameter=e,t.showDown()}}},"下载"))),n.push(e(d.a,{props:{action:"//jsonplaceholder.typicode.com/posts/",file:o,columnDetail:a.row||{},onUpUrl:t.postUrlUpLoad},style:{color:"#2b85e4"}},"44")),a.row.otherAgreedButton&&n.push(e(v.a,{props:{type:"text",checkAction:"contract_otheragreed",label:"其他约定",styles:"color:rgb(43, 133, 228);padding: 2px 7px;"},style:{color:"#2b85e4"},on:{click:function(){t.onConvention(a)}}})),a.row.effectButton&&n.push(e(v.a,{props:{type:"text",checkAction:"contract_effective",label:"合同生效",styles:"color:rgb(43, 133, 228);padding: 2px 7px;"},style:{color:"#2b85e4"},on:{click:function(){t.onContractFor(a)}}})),e("div",n)}}]},"detail",[])},created:function(){var t=c()({},{page:1,pageSize:15},this.$route.query);this.getListData(t),this.params=t},mounted:function(){this.onWindowSize(),this.tableHeight=document.documentElement.clientHeight-360},methods:{config:function(){this.$Notice.config({top:80,duration:3})},onKeyEnter:function(t){this.submitLowerSearch()},onWindowSize:function(){window.onresize=function(){var t=document.body.clientWidth;this.maxWidth=t>1870?t-1700:170}},showTakeEffect:function(){this.effectDisabled=!1,this.openTakeEffect=!this.openTakeEffect},submitTakeEffect:function(){var t=this;this.config(),this.effectDisabled=!0;var e=c()({},this.columnDetail);this.$http.post("post-contract-take-effect",{requestId:e.requestId},function(e){t.showTakeEffect(),t.getListData(t.params),t.openMessage=!0,t.MessageType="ok"==e.message?"success":"error",t.warn="合同已生效！"},function(e){t.effectDisabled=!1,t.$Notice.error({title:e.message})})},showDescribe:function(){this.describeDisabled=!1,this.openDescribe=!this.openDescribe},onConvention:function(t){this.otherAgreed=t.row.otherAgreed,this.columnDetail=t.row,this.showDescribe(),this.getOtherConvention({requestId:t.row.requestId})},submitDescribe:function(){var t=this;this.config();var e=c()({},this.columnDetail);c()({},this.describeData);this.describeDisabled||(this.describeDisabled=!0,this.showDescribe(),this.$http.post("post-contract-other-convention",{requestId:e.requestId,otherAgreed:this.otherAgreed||""},function(e){t.getListData(t.params),t.$Notice.success({title:"提交成功！"})},function(e){t.$Notice.error({title:e.message})}))},onContractFor:function(t){this.columnDetail=t.row,this.showTakeEffect()},showSearch:function(t){this.openSearch=!this.openSearch},jumpView:function(t){window.open("../../../../publicPage/"+t.row.id+"/pdf-view?contractType=&requestId="+t.row.requestId,"_blank")},submitDownLoad:function(t){if("print"==this.downType){var e=[{name:"入驻合同",value:"join"},{name:"增租合同",value:"increase"},{name:"减租合同",value:"reduce"},{name:"续租合同",value:"renew"}],a="join",i=location.port||"";i&&(i=":"+i);for(var o=0;o<e.length;o++)e[o].name==this.columnDetail.contractType&&(a=e[o].value);return window.open(location.protocol+"//"+location.hostname+i+"/new/#/operation/customerManage/1/order/1/agreement/"+a+"/"+this.columnDetail.orderId+"/print?print="+this.isCachet,"_blank"),void this.showDown()}this.config();var n=c()({},this.parameter);this.isCachet?n.contractType="HAVESEAL":n.contractType="NOSEAL",this.downLoadPdf(n),this.showDown()},downLoadPdf:function(t){var e=this;this.$http.post("contract-list-get-pdf-url",t,function(t){m.a.downFile(t.data)},function(t){e.openMessage=!0,e.MessageType="error",e.warn=t.message})},onExport:function(){var t=c()({},this.params);m.a.commonExport(t,"/api/krspace-erp-web/wf/station/contract/enter/export")},getListData:function(t){var e=this;this.config(),this.$http.get("get-center-list-contract",t,function(t){e.totalCount=t.data.totalCount,e.detail=t.data.items,e.openSearch=!1,e.loadingStatus=!1},function(t){e.$Notice.error({title:t.message})})},onPageChange:function(t){var e=this.params;e.page=t,this.getListData(e)},getOtherConvention:function(t){var e=this;this.config(),this.$http.get("get-contract-other-convention-data",t,function(t){e.describeData.otherAgreed=t.data.otherAgreed},function(t){e.$Notice.error({title:t.message})})},submitLowerSearch:function(){this.params.page=1,m.a.addParams(this.params)},onUpperChange:function(t,e){this.upperError=e,this.upperData=t},submitUpperSearch:function(){this.upperError||(this.params.page=1,this.params=c()({},this.params,this.upperData),this.params.pigeonholed=this.params.pigeonholed?"true"==this.params.pigeonholed:"",this.params.minCTime=this.params.minCTime?h.a.dateToStr("YYYY-MM-DD HH:mm:SS",new Date(this.params.minCTime)):"",this.params.maxCTime=this.params.maxCTime?h.a.dateToStr("YYYY-MM-DD HH:mm:SS",new Date(this.params.maxCTime)):"",m.a.addParams(this.params))},selectCachet:function(t){this.isCachet=t},showDown:function(){this.openDown=!this.openDown},postUrlUpLoad:function(t,e){var a=this;this.$http.post("post-list-upload-url",{fileList:o()(t),requestId:e.requestId},function(t){a.getListData(a.params)},function(t){a.$Notice.error({title:t.message})})},onMessageChange:function(t){this.openMessage=t}}}},bsze:function(t,e,a){"use strict";function i(t){var e=["角","分"],a=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],i=[["元","万","亿"],["","拾","佰","仟"]],o=t<0?"负":"";t=Math.abs(t);var n="",r=(t+"").split(".").length,s="00";r>1&&(s=(t+"").split(".")[1]);for(var c=0;c<e.length;c++)a[s[c]]&&(n+=(a[s[c]]+e[c]).replace(/零./,""));n=n||"整",t=Math.floor(t);for(var c=0;c<i[0].length&&t>0;c++){for(var l="",u=0;u<i[1].length&&t>0;u++)l=a[t%10]+i[1][u]+l,t=Math.floor(t/10);n=l.replace(/(零.)*零$/,"").replace(/^$/,"零")+i[0][c]+n}return o+n.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}function o(t){for(var e in t)t[e]=""}function n(t,e){var a=[];for(var i in t)t.hasOwnProperty(i)&&a.push(i+"="+t[i]);var e=e+"?"+a.join("&");window.location.href=e}function r(){var t=location.search,e=new Object;if(-1!=t.indexOf("?"))for(var a=t.substr(1),i=a.split("&"),o=0;o<i.length;o++)e[i[o].split("=")[0]]=unescape(i[o].split("=")[1]);return e}function s(t){var e=window.location.href,a=e.split("?")[0],i=[];for(var o in t)t.hasOwnProperty(o)&&i.push(o+"="+t[o]);a=a+"?"+i.join("&"),location.href=a}function c(t){for(var e,a=0,i={},o=[];e=t[a++];){var n=e.id;i[n]||(i[n]=!0,o.push(e))}return o}function l(t,e,a,i){for(var o=0;o<e.length;o++)for(var n=0;n<t.length;n++){var r=a?t[n][a]:t[n],s=i?e[o][i]:e[o];r==s&&t.splice(n,1)}return t}function u(t,e){var a=document.createElement("a");a.href=t,a.download=e,console.log("a--",a,t,e),a.click()}function d(t,e){var a=document.createElement("a");a.href=t,a.target="_blank",a.download=e,a.click()}function p(t,e){return e=parseInt(e,10),new Date(t,e,0).getDate()}function f(t,e){var a,i,o;return a=t.split("-"),i=new Date(a[1]+"/"+a[2]+"/"+a[0]),a=e.split("-"),o=new Date(a[1]+"/"+a[2]+"/"+a[0]),parseInt(Math.abs(i-o)/1e3/60/60/24)}function h(t,e,a){return void 0===a?k()(t,e,!1):k()(t,a,!1!==e)}function m(t,e){var a=new Date(t),i=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e);a.getFullYear(),a.getMonth(),a.getDate();return i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()}function g(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div"),a=e.style;a.position="absolute",a.top=0,a.left=0,a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var o=t.offsetWidth;return i===o&&(o=e.clientWidth),document.body.removeChild(e),i-o}function v(t,e){var a,i,o;return a=t.split("-"),i=new Date(a[1]+"/"+a[2]+"/"+a[0]),a=e.split("-"),o=new Date(a[1]+"/"+a[2]+"/"+a[0]),parseInt(Math.abs(i-o)/1e3/60/60/24)}var b=a("syeK"),w=a("Ta+G"),y=a("Asao"),x=a("IoNu"),k=a.n(x),D=a("Eqh0"),S=a("9pIO");e.a={smalltoBIG:i,clearForm:o,commonExport:n,getRequest:r,addParams:s,arrayNoRepeat:c,arrayCompare:l,thousand:b.a,downFile:u,addEvent:w.a,dataType:y.a,getDaysInOneMonth:p,dateDiff:f,debounce:h,getScrollBarSize:g,dateCompatible:D.a,tableSort:S.a,dateRange:m,downImg:d,timeRange:v}},c2kg:function(t,e,a){t.exports=a.p+"img/check.0125047.svg"},dGYZ:function(t,e,a){"use strict";function i(t){a("v23w")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("81Xy"),n=a("GFAb"),r=a("VU/8"),s=i,c=r(o.a,n.a,!1,s,null,null);e.default=c.exports},da5Z:function(t,e,a){"use strict";function i(t){a("/Xqw")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("Zfxc"),n=a("m5UM"),r=a("VU/8"),s=i,c=r(o.a,n.a,!1,s,null,null);e.default=c.exports},dwhu:function(t,e,a){t.exports=a.p+"img/upperSearch.66a5c81.png"},ip17:function(t,e,a){"use strict";function i(t){a("ztlA")}var o=a("GorF"),n=a("wRqU"),r=a("VU/8"),s=i,c=r(o.a,n.a,!1,s,"data-v-2aac378e",null);e.a=c.exports},lOwl:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".bill-search-class{width:50%}.bill-search,.bill-search-class{display:inline-block;padding-left:32px}.bill-search .u-date-txt{padding:0 25px;font-size:14px;color:#666}",""])},m5UM:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"contract-center-list"},[i("SectionTitle",{attrs:{title:"合同列表"}}),i("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[i("div",{staticStyle:{display:"inline-block",margin:"10px 20px"}},[i("span",{staticStyle:{"padding-right":"10px"}},[t._v("客户名称")]),i("i-input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入客户名称"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.onKeyEnter(e)}},model:{value:t.params.customName,callback:function(e){t.$set(t.params,"customName",e)},expression:"params.customName"}})],1),i("div",{staticClass:"m-search",on:{click:t.submitLowerSearch}},[t._v("搜索")]),i("div",{staticClass:"m-bill-search",on:{click:t.showSearch}},[i("span")])]),i("Table",{ref:"selection",staticStyle:{margin:"20px"},attrs:{border:"",columns:t.columns,data:t.detail}}),i("div",{staticStyle:{margin:"10px 20px",overflow:"hidden"}},[i("Button",{attrs:{type:"primary"},on:{click:t.onExport}},[t._v("导出")]),i("div",{staticStyle:{float:"right"}},[i("Page",{attrs:{total:t.totalCount,"page-size":15,"show-total":"","show-elevator":""},on:{"on-change":t.onPageChange}})],1)],1),i("Modal",{attrs:{title:"高级搜索",width:"660"},model:{value:t.openSearch,callback:function(e){t.openSearch=e},expression:"openSearch"}},[i("HeightSearch",{on:{bindData:t.onUpperChange}}),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:t.submitUpperSearch}},[t._v("确定")]),i("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.showSearch}},[t._v("取消")])],1)],1),i("Modal",{attrs:{title:"合同生效",width:"660"},model:{value:t.openTakeEffect,callback:function(e){t.openTakeEffect=e},expression:"openTakeEffect"}},[i("div",[t._v("合同是否生效?")]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary",disabled:t.effectDisabled},on:{click:t.submitTakeEffect}},[t._v("确定")]),i("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.showTakeEffect}},[t._v("取消")])],1)]),i("Modal",{attrs:{title:"其他约定",width:"660"},model:{value:t.openDescribe,callback:function(e){t.openDescribe=e},expression:"openDescribe"}},[i("Input",{staticStyle:{width:"100%"},attrs:{maxlength:999,type:"textarea",autosize:{minRows:5,maxRows:5},placeholder:"写入描述..."},model:{value:t.otherAgreed,callback:function(e){t.otherAgreed=e},expression:"otherAgreed"}}),i("div",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.otherAgreed?t.otherAgreed.length+"/999":"0/999"))]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary",disabled:t.describeDisabled},on:{click:t.submitDescribe}},[t._v("确定")]),i("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.showDescribe}},[t._v("取消")])],1)],1),i("Modal",{attrs:{title:"下载pdf",width:"660"},model:{value:t.openDown,callback:function(e){t.openDown=e},expression:"openDown"}},[i("div",{staticStyle:{"text-align":"center","font-size":"16px",color:"#333"}},[t._v("请选择您打印的合同是否需要盖公章？")]),i("div",{staticStyle:{height:"300px"}},[i("div",{staticClass:"cachet-box",on:{click:function(e){t.selectCachet(!1)}}},[i("img",{attrs:{src:a("NqCb")}}),i("div",[t._v("示例一：未加盖公章的合同")]),i("div",{class:this.isCachet?"select":"select cachet"})]),i("div",{staticClass:"cachet-box",on:{click:function(e){t.selectCachet(!0)}}},[i("img",{attrs:{src:a("7WgU")}}),i("div",[t._v("示例二：加盖公章的合同")]),i("div",{class:this.isCachet?"select cachet":"select"})])]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:t.submitDownLoad}},[t._v("确定")]),i("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.showDown}},[t._v("取消")])],1)]),i("Message",{attrs:{type:t.MessageType,openMessage:t.openMessage,warn:t.warn},on:{changeOpen:t.onMessageChange}})],1)},o=[],n={render:i,staticRenderFns:o};e.a=n},pY0k:function(t,e,a){var i=a("Ucgj");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("f811f5dc",i,!0,{sourceMap:!1})},qaDt:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Modal",{staticClass:"ui-message",attrs:{width:"443"},model:{value:t.flag,callback:function(e){t.flag=e},expression:"flag"}},[i("div",{staticClass:"ui-message-content"},["success"==t.type?i("div",[i("img",{attrs:{src:a("IMWu")}}),i("p",{staticClass:"ui-reminder",domProps:{innerHTML:t._s(t.warn)}})]):"error"==t.type?i("div",[i("img",{attrs:{src:a("6tff")}}),i("p",{staticClass:"ui-reminder",domProps:{innerHTML:t._s(t.warn)}})]):t._e()]),i("div",{attrs:{slot:"footer"},slot:"footer"})])},o=[],n={render:i,staticRenderFns:o};e.a=n},syeK:function(t,e,a){"use strict";function i(t){if(null===t||void 0===t)return 0;if(isNaN(t))return"NaN";var e=t.toString();if(/^-?\d+\.?\d+$/.test(e))if(/^-?\d+$/.test(e))e=e.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");else{var a=e.split("."),i=a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");e=i+"."+a[1]}return e}e.a=i},tBD1:function(t,e,a){"use strict";e.a={props:{title:String,type:{default:"listTitle",type:String}},data:function(){return{classType:{listTitle:"section-title",detailTitle:"section-detail-title"}}}}},v23w:function(t,e,a){var i=a("lOwl");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("51b17460",i,!0,{sourceMap:!1})},wRqU:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner"},[a("div",{staticClass:"double-bounce1"}),a("div",{staticClass:"double-bounce2"})])}],n={render:i,staticRenderFns:o};e.a=n},y6rJ:function(t,e,a){"use strict";function i(t){a("UDtf")}var o=a("P74E"),n=a("HIhf"),r=a("VU/8"),s=i,c=r(o.a,n.a,!1,s,"data-v-aab66c6e",null);e.a=c.exports},ztlA:function(t,e,a){var i=a("XqYN");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("3d08a727",i,!0,{sourceMap:!1})}});
//# sourceMappingURL=index.2375cd314efcd78380e1.js.map