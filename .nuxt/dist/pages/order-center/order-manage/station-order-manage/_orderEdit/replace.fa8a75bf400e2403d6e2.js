webpackJsonp([30,70],{"+H/r":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"com-select-customers"},[a("Select",{attrs:{"v-model":t.customer,filterable:"",remote:"",placeholder:t.value,"remote-method":t.remoteCustomer,loading:t.loading1,disabled:t.disabled,"label-in-value":t.labelInValue},on:{"on-change":t.changeContent}},t._l(t.customerOptions,function(e,i){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},"1T+a":function(t,e,a){"use strict";var i=a("mvHQ"),n=a.n(i),o=a("woOf"),r=a.n(o),s=a("J0i4"),l=a("SP/+"),c=a("g4Hp"),d=a.n(c),u=a("5TZu"),p=a("bsze");e.a={name:"JoinView",head:function(){return{title:"换租订单详情"}},props:{data:Object,type:String,showEdit:{type:Boolean,default:!0},showSubmit:{type:Boolean,default:!0}},components:{SectionTitle:s.a,LabelText:l.a},data:function(){var t=this;return{openService:!1,inline:!1,formItem:this.data,oldStatonColumns:[{title:"工位编号/房间名称",key:"seatNum",align:"center"},{title:"产品类型",key:"seatType",align:"center",render:function(t,e){return"SPACE"==e.row.seatType?"独立房间":"开放工位"}},{title:"原服务开始日",key:"startDate",align:"center",render:function(t,e){return d.a.dateToStr("YYYY-MM-DD",new Date(e.row.startDate))}},{title:"原服务结束日",key:"endDate",align:"center",render:function(t,e){return d.a.dateToStr("YYYY-MM-DD",new Date(e.row.endDate))}},{title:"欲更换服务日",key:"name",align:"center",render:function(t,e){return d.a.dateToStr("YYYY-MM-DD",new Date(e.row.changeBegin))+"至"+d.a.dateToStr("YYYY-MM-DD",new Date(e.row.endDate))}}],newStatonColumns:[{title:"工位编号/房间名称",key:"seatNum",align:"center"},{title:"产品类型",key:"seatType",align:"center",render:function(t,e){return"SPACE"==e.row.seatType?"独立房间":"开放工位"}},{title:"指导价",key:"guidePrice",align:"center",render:function(t,e){return p.a.thousand(e.row.guidePrice)+"(元/月)"}},{title:"下单价",key:"originalPrice",align:"center",render:function(t,e){return p.a.thousand(e.row.originalPrice)+"(元/月)"}},{title:"优惠",key:"saleNum",align:"center",render:function(t,e){return e.row.saleNum&&"-"!=e.row.saleNum?e.row.saleNum+"折":"-"}},{title:"签约价",key:"signPrice",align:"center",render:function(t,e){return p.a.thousand(e.row.signPrice)+"(元/月)"}}],newStatonMoneyColumns:[{title:"工位编号/房间名称",key:"name",align:"center"},{title:"服务开始日",key:"startDate",align:"center"},{title:"服务结束日",key:"endDate",align:"center"},{title:"不计算服务费区间",key:"name",align:"center",render:function(t,e){return e.row.freeStartDate?d.a.dateToStr("YYYY-MM-DD",new Date(e.row.freeStartDate))+"至"+e.row.endDate:"暂无免租"}},{title:"签约价",key:"signPrice",align:"center"},{title:"金额",key:"totalRent",align:"center",render:function(t,e){return"￥"+p.a.thousand(e.row.totalRent)}},{title:"操作",key:"name",align:"center",render:function(e,a){return e(u.a,{props:{type:"text",label:"明细",checkAction:"seat_order_view",styles:"color:rgb(43, 133, 228);padding: 2px 7px;"},on:{click:function(){t.getServiceDetail(a.row)}}})}}],newInfoColumns:[{title:"服务费总额",key:"totalServiceFee",align:"center",render:function(t,e){return"￥"+p.a.thousand(e.row.totalServiceFee)}},{title:"服务保证金",key:"totalDeposit",align:"center",render:function(t,e){return"￥"+p.a.thousand(e.row.totalDeposit)}}],oldInfoColumns:[{title:"减少服务费",key:"reduceServiceFee",align:"center",render:function(t,e){return"￥"+p.a.thousand(e.row.reduceServiceFee)}},{title:"退还服务费",key:"changeServiceFee",align:"center",render:function(t,e){return"￥"+p.a.thousand(e.row.changeServiceFee)}},{title:"工位已交保证金",key:"changeDeposit",align:"center",render:function(t,e){return"￥"+p.a.thousand(e.row.changeDeposit)}}],detailService:{codeName:"",details:[],totalAmount:"",seatType:""},serviceColumns:[{title:"服务期",key:"reduceServiceFee",align:"center",render:function(t,e){return d.a.dateToStr("YYYY-MM-DD",new Date(e.row.start_date))+"~"+d.a.dateToStr("YYYY-MM-DD",new Date(e.row.end_date))}},{title:"服务费计算说明",key:"calculat_descr",align:"center"},{title:"单价",key:"unit_price",align:"center"},{title:"数量",key:"count",align:"center"},{title:"小计",key:"amount",align:"right",render:function(t,e){return"￥"+p.a.thousand(e.row.amount)}}]}},mounted:function(){GLOBALSIDESWITCH("false"),GLOBALHEADERSET("订单合同")},methods:{editCard:function(t){this.$emit("editCards",t)},submit:function(){var t=this,e=r()({},this.data);e.paidDepositAmount=this.data.newStationData[0].changeDeposit,e.reduceRentAmount=this.data.newStationData[0].reduceServiceFee,e.refundRentAmount=this.data.newStationData[0].changeServiceFee,e.rentAmount=this.data.newStationData[0].totalServiceFee,e.oldSeatList=n()(e.oldSeatList),e.seats=n()(e.seats),e.saleList=n()(e.saleList),e.serviceDetailsList=n()(e.serviceDetailsList),e.endDate=d.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(e.endDate)),e.signDate=d.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(e.signDate)),e.startDate=d.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(e.startDate)),e.firstPayTime=d.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(e.firstPayTime)),e.newStationData="",e.depositAmount=this.data.newStationData[0].totalDeposit,e.oldDepositAmount=this.data.newStationData[0].changeDeposit,e.newSeatCombin="",e.feeResultVO="",e.oldSeatInfo="",e.newSeatInfo="",e.tacticsVOs="";var a="save-replace";e.id&&(a="save-edit-replace"),this.$http.post(a,e).then(function(t){window.close(),window.opener.location.reload()}).catch(function(e){t.$Notice.error({title:e.message})})},getServiceDetail:function(t){var e=this,a="";t.freeStartDate?(a=new Date(t.freeStartDate),a=a.setDate(a.getDate()-1),a=new Date(a).getTime()):a=t.endDate;var i=t.seatIds.map(function(e){var a={};return a.seatId=e,a.seatType=t.seatType,a}),o=t.signPrice.split("元")[0],r={codeName:t.name,endDate:d.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.endDate)),realEndDate:d.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(a)),seats:n()(i),signPrice:o,startDate:d.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.startDate))};this.$http.post("get-seat-combin-detail",r).then(function(t){e.openService=!0,e.detailService=t.data}).catch(function(t){e.$Notice.error({title:t.message})})},cancel:function(){this.openService=!1}}}},"4XX8":function(t,e,a){"use strict";var i=a("woOf"),n=a.n(i),o=a("Rrep"),r=a("9Jg8");e.a={props:{params:Object,floors:Array,stationData:Object,originStationList:Array},data:function(){return console.log("this.stationData.submitData",this.stationData.submitData),{data:"",selectedObjs:this.stationData.submitData,deleteArr:[],newfloor:"3",submitData:[],scaleNumber:60,Map:"",inputEnd:"",inputStart:"",originData:[],floor:"",startToEnd:[],origin:this.originStationList,showSlider:!0,stationArr:this.stationData,page:{},stylePlan:{}}},destroyed:function(){},mounted:function(){this.getData(),this.getPageWidthOrHeight()},updated:function(){},beforeUpdate:function(){},watch:{stationData:function(t){this.selectedObjs=this.stationData.submitData},originStationList:function(t){this.origin=t},stationArr:function(t){this.$emit("on-result-change",t),this.inputStart="",this.inputEnd=""},startToEnd:function(t){var e=this.stationArr,a=e.submitData,i=e.deleteData;a=a.concat(t),this.stationArr={deleteData:i,submitData:a}}},methods:{getPageWidthOrHeight:function(){var t={};t.width=window.innerWidth,t.height=window.innerHeight,"CSS1Compat"==document.compatMode?(t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight):(t.width=document.body.clientWidth,t.height=document.body.clientHeight),this.page=n()({},t),this.stylePlan={width:"100%",height:t.height-200+"px",border:"1px solid #000"}},getData:function(){var t=this,e=this.params,a=[],i=this;r.a.get("getplanmap",e,function(e){var n=e.data,o=[],r={},s=[];n.map(function(t,e){var i=[];o.push({value:""+t.floor,label:""+t.floor}),t.figures.map(function(t,e){for(var n=0;n<a.length;n++){var o="STATION";if(2==a[n].belongType&&(o="SPACE"),t.belongId==a[n].id&&t.belongType==o){var r={};r.name=t.cellName,r.whereFloor=t.floor,r.belongType=t.belongType,r.belongId=Number(t.belongId),i.push(r)}}if(0==a.length&&t.status&&3==t.status){var r={};r.name=t.cellName,r.whereFloor=t.floor,r.belongType=t.belongType,r.belongId=Number(t.belongId),s.push(r),i.push(r)}}),r["a"+t.floor]=[].concat(i)},function(t){i.$Notice.error({title:t.message})}),t.data=n,t.newfloor=o[0].value,t.canvasEles()})},canvasEles:function(){var t=this,e={},a=Number(this.inputStart),i=Number(this.inputEnd),n=this.data,r=this.newfloor,s=this.selectedObjs;console.log("渲染",s);for(var l=[],c=this.origin||[],d=0;d<n.length;d++)if(n[d].floor==r){var u=[];u=n[d].figures.map(function(t,e){var n={},o=Number(t.cellName);t.cellCoordX,t.cellCoordY;n.x=Number(t.cellCoordX),n.y=Number(t.cellCoordY),n.width=Number(t.cellWidth),n.height=Number(t.cellHeight),n.name=t.cellName,n.whereFloor=t.floor,n.belongType=t.belongType,n.belongId=Number(t.belongId),n.id=Number(t.id),n.canFigureId=t.canFigureId,n.capacity=t.capacity,n.type=n.belongType,n.seatPrice=t.seatPrice,n.checked=!1,n.status=t.status||4;for(var r=0;r<c.length;r++){var d="STATION";2!=c[r].belongType&&"SPACE"!=c[r].belongType||(d="SPACE"),t.belongId==c[r].id&&t.belongType==d&&2!=t.status&&(n.checked=!1,n.status=3)}for(var u=0;u<s.length;u++){var p="STATION";2!=s[u].belongType&&"SPACE"!=s[u].belongType||(p="SPACE"),t.belongId==s[u].id&&t.belongType==p&&(n.checked=!0,n.status=3)}if(o>=a&&o<=i&&1!=t.status){n.checked=!0;var h={};h.name=t.cellName,h.whereFloor=t.floor,h.belongType=t.belongType,h.belongId=Number(t.belongId),h.id=Number(t.belongId),h.canFigureId=t.canFigureId,h.type=n.belongType,h.capacity=t.capacity,h.seatType="STATION"==n.belongType?"OPEN":"SPACE",h.seatPrice=t.seatPrice,l.push(h)}return n}),e={stations:u||[],isMode:"select",plugin:{onCheckedStationCallback:t.dataChange},map:{translateX:0,translateY:0,scaleEnable:!1,scale:this.scaleNumber/100,contextMenuEnable:!0},backgroundImageUrl:"http://"+window.location.host+n[d].graphFilePath}}this.Map=Object(o.a)("plan-map-content",e),l.length&&(this.startToEnd=l)},rangeSelect:function(t){var e=parseInt(t);this.scaleNumber=e,this.Map.setScale(e/100)},floorsChange:function(t){this.Map&&(this.Map.destory(),this.canvasEles())},submitStation:function(){this.Map.destory(),this.canvasEles()},dataChange:function(t,e){var a=this.selectedObjs,i=this.newfloor,o=this.submitData,r=this.deleteArr,s=[],l={};a.length&&(a.map(function(t){var e=t.floor||t.whereFloor;-1==s.indexOf(e)&&(s.push(e),l["a"+e]=[])}),a.map(function(t,e){var a=t.floor||t.whereFloor;l["a"+a].push(t)}));var c=[].concat(a),d=n()({},r),u=n()({},o);e=[].concat(e);for(var p=0;p<e.length;p++)for(var h=0;h<c.length;h++){var m="STATION";2==c[h].belongType&&(m="SPACE"),e[p].belongId==c[h].id&&e[p].belongType==m&&c.splice(h,1)}u["a"+i]=[].concat(e),d["a"+i]=[].concat(c),this.submitData=u,this.deleteArr=d;var f=[],g=[];for(var v in u)l[v]&&(l[v]=[]),f=f.concat(u[v]);for(var y in a)for(var S in f)a[y].name==f[S].name&&(f[S].originalPrice=a[y].originalPrice);for(var b in d)g=g.concat(d[b]);f=f.map(function(t,e){var a={},i=1,n="OPEN";return"SPACE"!=t.belongType&&2!=t.belongType||(i=2,n="SPACE"),a.id=t.belongId||t.id,a.type=i,a.seatType=n,a.belongType=i,a.whereFloor=t.whereFloor||t.floor,a.name=t.name,a.seatPrice=t.seatPrice,a.capacity=t.capacity,a.originalPrice=t.originalPrice||a.seatPrice||"",a});var D={submitData:f,deleteData:g};this.stationArr=D}}}},"51Ub":function(t,e,a){var i=a("oNwR");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("65342f3c",i,!0,{sourceMap:!1})},"5TZu":function(t,e,a){"use strict";var i=a("8FHl"),n=a("SdYl"),o=a("VU/8"),r=o(i.a,n.a,!1,null,null,null);e.a=r.exports},"61ld":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.getClassName()},[a("div",{staticClass:"ui-label",class:{circle:"circle"==t.type}},[t._v("\n\t\t"+t._s(t.label)+"\n\t")]),a("div",{staticClass:"ui-text"},[t._t("default")],2)])},n=[],o={render:i,staticRenderFns:n};e.a=o},"8FHl":function(t,e,a){"use strict";e.a={props:["label","type","checkAction","styles"],data:function(){return{data:[]}},methods:{buttonClick:function(t){this.$emit("click",t)}},mounted:function(){var t=this;setTimeout(function(){t.data=window.resourcesCode||[]},200)}}},"9pIO":function(t,e,a){"use strict";function i(t,e){if(t)for(var a=t.querySelectorAll(".ivu-table-sort"),i=0;i<a.length;i++){var o=a[i];o.style.width="auto",o.style.height="40px";var r=o.parentNode,s=r.querySelectorAll("span")[0].innerHTML;n(o,t,s,e)}}function n(t,e,a,i){t.innerHTML="";var n=document.createElement("span");n.className=r("init"),t.appendChild(n),n.onclick=function(t){var n=t.target,l=n.className;s(e),n.className=r(l),i({label:a,order:o(l)})}}function o(t){return"kr-table-sort-icon-asc"===t?"desc":"asc"}function r(t){switch(t){case"kr-table-sort-icon-init":return"kr-table-sort-icon-asc";case"kr-table-sort-icon-asc":return"kr-table-sort-icon-desc";case"kr-table-sort-icon-desc":return"kr-table-sort-icon-asc";default:return"kr-table-sort-icon-init"}}function s(t){for(var e=t.querySelectorAll(".ivu-table-sort span"),a=0;a<e.length;a++){e[a].className=r("init")}}e.a=i},A7Ww:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,'.ui-labeltext{width:45%;height:14px;font-size:14px;color:#333;line-height:14px;padding-left:14px;margin-bottom:24px;display:inline-block}.ui-labeltext .circle:before{content:"";display:inline-block;width:8px;height:8px;border:1px solid #333;border-radius:5px}.ui-labeltext .ui-label{font-weight:700;line-height:20px}.ui-label-text-inline .ui-label,.ui-label-text-inline .ui-text{display:inline-block}.ui-label-text-unline .ui-label{margin-bottom:8px}.ui-label-text-unline .ui-label,.ui-label-text-unline .ui-text{display:block}',""])},A8NK:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-replace-order-detail"},[a("SectionTitle",{attrs:{title:"换租订单详情"}}),a("div",{staticClass:"create-order"},[a("Card",{attrs:{id:"step-one"}},[a("p",{staticClass:"card-title",attrs:{slot:"title"},slot:"title"},[t._v("\n                   基本信息\n                ")]),1==t.showEdit?a("a",{attrs:{slot:"extra",href:"#"},on:{click:function(e){e.preventDefault(),t.editCard(0)}},slot:"extra"},[t._v("\n                \t编辑\n\t\t        ")]):t._e(),a("span",{staticClass:"card-header"}),a("LabelText",{attrs:{inline:t.inline,label:"客户名称："}},[t._v("\n                    "+t._s(t.formItem.customerName)+"\n                ")]),a("LabelText",{attrs:{inline:t.inline,label:"社区名称："}},[t._v("\n                    "+t._s(t.formItem.communityName)+"\n                ")]),a("LabelText",{staticClass:"reason",attrs:{inline:t.inline,label:"换租原因："}},[t._v("\n                    "+t._s(t.formItem.replaceMemo||"无")+"\n                ")])],1),a("span",{staticClass:"space"}),a("Card",{attrs:{id:"step-two"}},[a("p",{staticClass:"card-title",attrs:{slot:"title"},slot:"title"},[t._v("\n                   原工位信息\n                ")]),1==t.showEdit?a("a",{attrs:{slot:"extra",href:"#"},on:{click:function(e){e.preventDefault(),t.editCard(1)}},slot:"extra"},[t._v("\n                \t编辑\n\t\t        ")]):t._e(),a("span",{staticClass:"card-header"}),a("LabelText",{attrs:{inline:t.inline,label:"换租服务开始日："}},[t._v("\n                    "+t._s(t._f("dateFormat")(t.formItem.startDate,"YYYY-MM-dd"))+"\n                ")]),a("Table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:t.oldStatonColumns,data:t.formItem.oldSeatList}})],1),a("span",{staticClass:"space"}),a("Card",{attrs:{id:"step-three"}},[a("p",{staticClass:"card-title",attrs:{slot:"title"},slot:"title"},[t._v("\n                    新工位信息\n                ")]),1==t.showEdit?a("a",{attrs:{slot:"extra",href:"#"},on:{click:function(e){e.preventDefault(),t.editCard(2)}},slot:"extra"},[t._v("\n                \t编辑\n\t\t        ")]):t._e(),a("span",{staticClass:"card-header"}),t.formItem.discount?a("LabelText",{attrs:{inline:t.inline,label:"优惠折扣："}},[t._v("\n                    "+t._s(t.formItem.discount)+"折\n                ")]):t._e(),a("Table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:t.newStatonColumns,data:t.formItem.seats}}),t.formItem.freeStartDate?a("LabelText",{attrs:{inline:t.inline,label:"免租开始日："}},[t._v("\n                    "+t._s(t._f("dateFormat")(t.formItem.freeStartDate,"YYYY-MM-dd"))+"\n                ")]):t._e(),a("Table",{staticStyle:{"margin-bottom":"20px"},attrs:{columns:t.newStatonMoneyColumns,data:t.formItem.serviceDetailsList}}),a("LabelText",{attrs:{inline:t.inline,label:"付款周期："}},[t._v("\n                    "+t._s(t.formItem.installmentName)+"\n                ")]),a("LabelText",{attrs:{inline:t.inline,label:"服务保证金："}},[t._v("\n                    ￥"+t._s(t._f("thousand")(t.formItem.newStationData[0].totalDeposit))+"\n                ")]),a("LabelText",{attrs:{inline:t.inline,label:"首付款日期："}},[t._v("\n                    "+t._s(t._f("dateFormat")(t.formItem.firstPayTime,"YYYY-MM-dd"))+"\n                ")])],1),a("span",{staticClass:"space"}),a("Card",{attrs:{id:"step-four"}},[a("p",{staticClass:"card-title",attrs:{slot:"title"},slot:"title"},[t._v("\n                    服务费信息\n                ")]),1==t.showEdit?a("a",{attrs:{slot:"extra",href:"#"},on:{click:function(e){e.preventDefault(),t.editCard(3)}},slot:"extra"},[t._v("\n                \t编辑\n\t\t        ")]):t._e(),a("span",{staticClass:"card-header"}),a("Table",{staticStyle:{margin:"20px 0"},attrs:{columns:t.oldInfoColumns,data:t.formItem.newStationData}}),a("Table",{staticStyle:{margin:"20px 0"},attrs:{columns:t.newInfoColumns,data:t.formItem.newStationData}}),a("LabelText",{attrs:{inline:t.inline,label:"退还服务费："}},[t._v("\n                    ￥"+t._s(t._f("thousand")(t.formItem.changeServiceFee))+"\n                ")]),a("LabelText",{attrs:{inline:t.inline,label:"旧服务保证金转新（剩余扣除）"}},[t._v("\n                    ￥"+t._s(t._f("thousand")(t.formItem.transferDepositAmount))+"\n                ")]),a("LabelText",{attrs:{inline:t.inline,label:"扣除服务保证金："}},[t._v("\n                    ￥"+t._s(t._f("thousand")(t.formItem.back))+"\n                ")])],1),t.showSubmit?a("div",{staticClass:"buttons"},[a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.editCard(3)}}},[t._v("取消")]),a("span",{staticClass:"between"}),a("Button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1):t._e()],1),a("Modal",{attrs:{title:"服务费明细","ok-text":"保存","cancel-text":"取消",width:"90%","class-name":"vertical-center-modal"},model:{value:t.openService,callback:function(e){t.openService=e},expression:"openService"}},[a("div",{staticClass:"content"},[a("div",{staticClass:"header",staticStyle:{"font-size":"14px"}},[a("span",{staticClass:"left"},[t._v("\n                      "+t._s("SPACE"==t.detailService.seatType?"独立房间":"独立工位")+" "+t._s(t.detailService.codeName)+"\n                   ")]),a("span",{staticClass:"right",staticStyle:{float:"right"}},[t._v("\n                       ￥"+t._s(t._f("thousand")(t.detailService.totalAmount))+"\n                   ")])]),a("Table",{staticStyle:{margin:"10px 0"},attrs:{columns:t.serviceColumns,data:t.detailService.details}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.cancel}},[t._v("确定")])],1)])],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},Ah8v:function(t,e,a){"use strict";function i(t){a("cUWu")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("KFSR"),o=a("RVO6"),r=a("VU/8"),s=i,l=r(n.a,o.a,!1,s,null,null);e.default=l.exports},Asao:function(t,e,a){"use strict";function i(){switch((0,Object.prototype.toString.call)(0)){case"[object String]":return"string";case"[object Number]":return"number";case"[object Boolean]":return"boolean";case"[object Symbol]":return"symbol";case"[object Undefined]":return"undefined";case"[object Null]":return"null";case"[object Function]":return"function";case"[object Date]":return"date";case"[object Array]":return"array";case"[object RegExp]":return"regExp";case"[object Error]":return"error";case"[object HTMLDocument]":return"node";case"[object global]":return"global"}}e.a=i},Ds1f:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"plan-map-content",style:{height:t.page.height}},[a("div",{staticClass:"num-type",staticStyle:{"margin-bottom":"15px"}},[a("Select",{staticStyle:{width:"100px","margin-right":"15px"},attrs:{placeholder:"floor"},on:{"on-change":t.floorsChange},model:{value:t.newfloor,callback:function(e){t.newfloor=e},expression:"newfloor"}},t._l(t.floors,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),a("Input",{staticStyle:{width:"80px","margin-right":"5px"},attrs:{placeholder:"开始工位"},model:{value:t.inputStart,callback:function(e){t.inputStart=e},expression:"inputStart"}}),t._v("至\n\t\t    "),a("Input",{staticStyle:{width:"80px","margin-right":"5px"},attrs:{placeholder:"结束工位"},model:{value:t.inputEnd,callback:function(e){t.inputEnd=e},expression:"inputEnd"}}),a("Button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary"},on:{click:t.submitStation}},[t._v("选择")]),a("span",{staticClass:"til"},[t._v("当前比例：")]),a("Slider",{staticStyle:{width:"150px",display:"inline-block","vertical-align":"middle"},attrs:{"v-model":t.scaleNumber,min:50,max:200,step:10},on:{"on-change":t.rangeSelect}}),a("output",{staticStyle:{"margin-left":"15px"}},[t._v(t._s(t.scaleNumber))]),t._v("%\n\t\t")],1),a("div",{style:t.stylePlan,attrs:{id:"plan-map-content"}})])},n=[],o={render:i,staticRenderFns:n};e.a=o},Eqh0:function(t,e,a){"use strict";function i(t){if(t){return o.a.dateToStr("YYYY/MM/DD HH:mm:SS",new Date(t)).replace(/\//g,"-")}return""}var n=a("g4Hp"),o=a.n(n);e.a=i},IoNu:function(t,e){t.exports=function(t,e,a,i){function n(){function n(){r=Number(new Date),a.apply(l,d)}function s(){o=void 0}var l=this,c=Number(new Date)-r,d=arguments;i&&!o&&n(),o&&clearTimeout(o),void 0===i&&c>t?n():!0!==e&&(o=setTimeout(i?s:n,void 0===i?t-c:t))}var o,r=0;return"boolean"!=typeof e&&(i=a,a=e,e=void 0),n}},J0i4:function(t,e,a){"use strict";function i(t){a("pY0k")}var n=a("tBD1"),o=a("P67S"),r=a("VU/8"),s=i,l=r(n.a,o.a,!1,s,"data-v-872aada8",null);e.a=l.exports},JnUb:function(t,e,a){var i=a("XvJJ");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("428044bc",i,!0,{sourceMap:!1})},"K+LH":function(t,e,a){"use strict";function i(t){a("MyuT")}var n=a("LfLl"),o=a("K6ky"),r=a("VU/8"),s=i,l=r(n.a,o.a,!1,s,null,null);e.a=l.exports},K6ky:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"com-select-saler"},[a("Select",{attrs:{"v-model":t.saler,filterable:"",remote:"",clearable:t.clearable,placeholder:t.value,"remote-method":t.remoteSaler,loading:t.loading1,disabled:t.disabled},on:{"on-change":t.changeContent}},t._l(t.salerOptions,function(e,i){return a("Option",{key:e.label,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},KFSR:function(t,e,a){"use strict";var i=a("fZjL"),n=a.n(i),o=a("woOf"),r=a.n(o),s=a("mvHQ"),l=a.n(s),c=a("J0i4"),d=a("K+LH"),u=a("NfUT"),p=a("qehU"),h=a("g4Hp"),m=a.n(h),f=a("p1B2"),g=a("5TZu"),v=a("bsze");e.a={data:function(){var t=this,e=function(e,a,i){var n=new Date;n=n.setDate(n.getDate()+1),n=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(n)),n=new Date(n).getTime(),a=new Date(a).getTime(),console.log(a,"originBeginTime",t.originBeginTime),""===a?i(new Error("请先选择换租服务开始日")):a<n&&a!=t.originBeginTime?i(new Error("换租服务开始日不得小于等于今日")):a>t.oldStation[0].leaseEnddate?i(new Error("换租服务开始日不得大于原结束日期")):i()},a=function(e,a,i){""===a?i(new Error("请先选择首付款日期")):a>t.formItem.leaseBegindate?i(new Error("首付款日期不能大于换租服务开始日")):i()},i=function(e,a,i){""===a?i(new Error("请先选择换租服务结束日")):a<t.formItem.leaseBegindate?i(new Error("换租服务结束日不能小于换租服务开始日")):i()};return{originBeginTime:"",discountCon:"",entryPriceList:[],price:"",priceError:"",openPrice:!1,editCardabled:!0,openService:!1,labelInValue:!0,replaceMemoLength:500,overViewData:{},maxlength:3,selectAllAbled:!1,stationData:{submitData:[],deleteData:[]},selecedStationList:[],originStationList:[],signPriceColumns:[{type:"selection",width:60,align:"center"},{title:"工位编号/房间名称",key:"name",align:"center"},{title:"产品类型",key:"seatType",align:"center",render:function(t,e){return"SPACE"==e.row.seatType?"独立房间":"开放工位"}},{title:"指导价",key:"guidePrice",align:"center",render:function(t,e){return v.a.thousand(e.row.guidePrice)+"(元/月)"}},{title:"下单价(元/月)",key:"originalPrice",align:"center",render:function(e,a){var i=a.row.originalPrice;return e("Input",{props:{min:a.row.guidePrice,value:a.row.originalPrice},on:{"on-change":function(t){var e=t.target.value;isNaN(e)&&(e=a.row.guidePrice),i=e},"on-blur":function(){var e=/^[0-9]+(.[0-9]{1,2})?$/;if(i&&!e.test(i)){t.$Notice.error({title:"单价不得多余小数点后两位"});var n=Number(i).toFixed(3);i=n.substring(0,n.lastIndexOf(".")+3)}i<a.row.guidePrice&&(i=a.row.guidePrice,t.$Notice.error({title:"单价不得小于"+a.row.guidePrice})),t.changePrice(a.index,i)}}},"44")}},{title:"优惠",key:"saleNum",align:"center"},{title:"签约价",key:"discountedPrice",align:"center",render:function(t,e){return v.a.thousand(e.row.discountedPrice)+"(元/月)"}},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){return e(g.a,{props:{type:"text",label:"删除",checkAction:"seat_order_view",styles:"color:rgb(43, 133, 228);padding: 2px 7px;"},on:{click:function(){t.deleteDtation(a.index)}}})}}],serviceDetailsList:[],serviceDetailsColumns:[{title:"工位编号/房间名称",key:"name",align:"center"},{title:"服务开始日",key:"seatType",align:"center",render:function(e,a){return m.a.dateToStr("YYYY-MM-DD",new Date(t.formItem.leaseBegindate))}},{title:"服务结束日",key:"seatPrice",align:"center",render:function(e,a){return m.a.dateToStr("YYYY-MM-DD",new Date(t.formItem.leaseEnddate))}},{title:"不计算服务费区间",key:"freeStartDate",align:"center",render:function(e,a){return a.row.freeStartDate?m.a.dateToStr("YYYY-MM-DD",new Date(a.row.freeStartDate))+"至"+m.a.dateToStr("YYYY-MM-DD",new Date(t.formItem.leaseEnddate)):"暂无免租"}},{title:"签约价",key:"signPrice",align:"center"},{title:"金额",key:"totalRent",align:"center",render:function(t,e){return"￥"+v.a.thousand(e.row.totalRent)}},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){return e(g.a,{props:{type:"text",label:"明细",checkAction:"seat_order_view",styles:"color:rgb(43, 133, 228);padding: 2px 7px;"},on:{click:function(){t.getServiceDetail(a.row)}}})}}],showMap:!1,params:{},floors:[{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"}],payList:[{value:"ONE",label:"月付"},{value:"TWO",label:"两月付"},{value:"THREE",label:"季付"},{value:"SIX",label:"半年付"},{value:"TWELVE",label:"年付"},{value:"ALL",label:"全款"}],installmentType:"",deposit:"",discount:{list:[]},freeMap:{list:[]},freeDays:"",freeType:"",discountType:"",discountNum:"",depositList:[{label:"2个月",value:"2"},{label:"3个月",value:"3"},{label:"4个月",value:"4"},{label:"5个月",value:"5"},{label:"6个月",value:"6"}],orderStatus:"create",showHeader:!0,disabledValue:!0,errorObj:{oldStation:!1,payType:!1,deposit:!1,selecedStation:!1},status:0,oldEndTime:new Date,saleList:[],salerName:"请选择",selectedOldStation:[],formItem:{signDate:new Date,leaseBegindate:""},getFloor:new Date,selectAllChecked:!1,ruleValidateOne:{communityId:[{required:!0,message:"请选择社区"}],customerId:[{required:!0,message:"请填写客户名称"}],salerId:[{required:!0,message:"请选择销售员",trigger:"change"}],signDate:[{required:!0,type:"date",message:"请选择销售时间",trigger:"change"}],replaceMemo:[{required:!0,message:"请填写换租原因",trigger:"blur"}]},ruleValidateTwo:{leaseBegindate:[{required:!0,trigger:"change",validator:e}]},ruleValidateFour:{transferDepositAmount:[{required:!0,message:"请填写正确的金额",trigger:"blur"}]},ruleValidateThree:{leaseEnddate:[{required:!0,trigger:"change",validator:i}],firstPayTime:[{required:!0,trigger:"change",validator:a}]},communityList:[],oldStation:[],oldStationInfo:[{title:"减少服务费",key:"reduceServiceFee",align:"center",render:function(t,e){return"￥"+v.a.thousand(e.row.reduceServiceFee)}},{title:"退还服务费",key:"changeServiceFee",align:"center",render:function(t,e){return"￥"+v.a.thousand(e.row.changeServiceFee)}},{title:"工位已交保证金",key:"changeDeposit",align:"center",render:function(t,e){return"￥"+v.a.thousand(e.row.changeDeposit)}}],oldStationData:[],newStationInfo:[{title:"服务费总额",key:"totalServiceFee",align:"center",render:function(t,e){return"￥"+v.a.thousand(e.row.totalServiceFee)}},{title:"服务保证金",key:"totalDeposit",align:"center",render:function(t,e){return"￥"+v.a.thousand(e.row.totalDeposit)}}],newStationData:[],watchServiceDetail:new Date,freeStartDate:"",back:0,changeThree:new Date,detailService:{codeName:"",details:[],totalAmount:"",seatType:""},serviceColumns:[{title:"服务期",key:"reduceServiceFee",align:"center",render:function(t,e){return m.a.dateToStr("YYYY-MM-DD",new Date(e.row.start_date))+"~"+m.a.dateToStr("YYYY-MM-DD",new Date(e.row.end_date))}},{title:"服务费计算说明",key:"calculat_descr",align:"center"},{title:"单价",key:"unit_price",align:"center"},{title:"数量",key:"count",align:"center"},{title:"小计",key:"amount",align:"right",render:function(t,e){return"￥"+v.a.thousand(e.row.amount)}}]}},head:function(){return{title:"编辑换租订单"}},components:{SectionTitle:c.a,SelectSaler:d.a,selectCustomers:p.a,ReplaceView:u.default,planMap:f.a},mounted:function(){this.getFreeDeposit(),GLOBALSIDESWITCH("false"),GLOBALHEADERSET("订单合同"),this.getDetailData()},watch:{getFloor:function(){var t=this;if(this.formItem.communityId&&this.formItem.customerId){var e={communityId:this.formItem.communityId,customerId:this.formItem.customerId};this.$http.get("get-community-floor",e).then(function(e){t.floors=e.data.floor,t.ssoId=e.data.ssoId,t.ssoName=e.data.ssoName,t.formItem.salerId||(t.formItem.salerId=l()(e.data.ssoId),t.salerName=e.data.ssoName)}).catch(function(e){t.$Notice.error({title:e.message})})}},watchServiceDetail:function(){this.getSeatCombin()},changeThree:function(){this.clearFormFour()}},methods:{changeSaler:function(t){this.formItem.salerId=t},changeSaleTime:function(t){this.formItem.signDate=t},getSelectedOldStation:function(){var t=this;this.selectedOldStation=this.oldStation.filter(function(e){return!!e.checked&&(e.orderSeatId=e.orderId,e.changeBegin=t.formItem.leaseBegindate,!0)})},next:function(t){var e=this;this.errorObj={},"formItemTwo"==t?this.selectedOldStation.length?this.errorObj.oldStation=!1:this.errorObj.oldStation=!0:this.errorObj.oldStation=!1,this.$refs[t].validate(function(a){if(a){"formItemOne"==t&&e.getOldStation(),"formItemTwo"==t&&(e.getSelectedOldStation(),e.formItem.oldSeatInfo.length&&e.getSaleList(e.formItem.leaseEnddate),e.selectedOldStation.length?e.errorObj.oldStation=!1:e.errorObj.oldStation=!0),"formItemThree"==t&&(e.installmentType||(e.errorObj.payType=!0),e.deposit||(e.errorObj.deposit=!0),e.selecedStationList.length?e.errorObj.selecedStation=!1:(e.errorObj.selecedStation=!0,e.$Notice.error({title:"请选择换租工位"})),e.serviceDetailsList.length?e.errorObj.serviceDetail=!1:(e.errorObj.serviceDetail=!0,e.$Notice.error({title:"请核对新工位信息"})),e.getSeatReplaceDetail());var i=!0;for(var n in e.errorObj)e.errorObj[n]&&(i=!1);if(!i)return;e.status++}})},previous:function(){this.status--},returnTitle:function(t){return t==this.status?"进行中":t<this.status?"已完成":"未进行"},resetForm:function(t){this.$refs[t].resetFields(),"formItemThree"==t&&this.clearFormThree()},submit:function(t){var e=this,a=r()({},this.formItem);a.newStationData=this.newStationData,a.endDate=this.formItem.leaseEnddate,a.startDate=this.formItem.leaseBegindate,a.oldSeatList=this.selectedOldStation,a.saleList=this.saleList,a.installmentType=this.installmentType,a.installmentName=this.installmentName,a.deposit=this.deposit,a.seats=this.selecedStationList,a.signDate=this.formItem.signDate,a.discount=this.discountNum,a.freeStartDate=this.freeStartDate,a.firstPayTime=this.formItem.firstPayTime,a.back=this.back;var i=this.serviceDetailsList.map(function(t){return t.startDate=m.a.dateToStr("YYYY-MM-DD",new Date(e.formItem.leaseBegindate)),t.endDate=m.a.dateToStr("YYYY-MM-DD",new Date(e.formItem.leaseEnddate)),t});a.serviceDetailsList=i,this.$refs[t].validate(function(t){t&&(e.orderStatus="view",e.overViewData=a)})},editCard:function(t){this.orderStatus="create",this.status=t},changeCustomer:function(t){this.formItem.customerId=t.value,this.formItem.customerName=t.label,t.value&&this.getCustomerToCom()},getCustomerToCom:function(){var t=this,e={customerId:this.formItem.customerId};this.$http.get("get-community-from-cusList",e).then(function(e){t.communityList=e.data.map(function(t){return t.value=""+t.id,t.label=t.name,t})}).catch(function(e){t.communityList=[],t.$Notice.error({title:e.message})})},clearStepData:function(){this.formItem.leaseBegindate="",this.selectedOldStation=[],this.formItem.oldSeatInfo=[]},changeCommunity:function(t){t.value&&(this.formItem.communityId=t.value,this.formItem.communityName=t.label||this.formItem.communityName),t.label&&(this.clearStepData(),this.clearFormThree(),this.formItem.leaseEnddate=""),this.getFloor=+new Date},getOldStation:function(){var t=this,e={communityId:this.formItem.communityId,customerId:this.formItem.customerId};this.selectedOldStation.length||this.$http.get("get-order-seat",e).then(function(e){t.selectAllAbled=!0,t.oldStation=e.data.map(function(e){if(t.formItem.leaseBegindate){var a=new Date(t.formItem.leaseBegindate).getTime();a<e.startDate||a>e.endDate?(e.disabled=!0,t.selectAllAbled=!0):e.disabled=!1}return e.checked=!1,e}),t.formItem.oldSeatInfo.length&&t.setOldSeatInfo()}).catch(function(e){t.$Notice.error({title:e.message})})},setOldSeatInfo:function(){var t=this,e=[],a=new Date(this.formItem.leaseBegindate).getTime();this.formItem.oldSeatInfo.map(function(i){e=t.oldStation.map(function(e){return i.seatNum==e.seatNum&&i.startDate==e.startDate&&(e.checked=!0,e.disabled=!1),a<e.startDate||a>e.endDate?(e.disabled=!0,t.selectAllAbled=!0):e.disabled=!1,e})}),this.oldStation=e,this.getSelectedOldStation()},changeBeginTime:function(t){var e=this;this.formItem.leaseBegindate=t;var a=new Date;this.selectAllChecked=!1,this.selectAllAbled=!1,this.formItem.oldSeatInfo=[],a=a.setDate(a.getDate()+1),a=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(a)),a=new Date(a).getTime();var i=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t));if(new Date(t).getTime()<a&&new Date(i).getTime()!=this.originBeginTime)return this.selectAllAbled=!0,void(this.oldStation=this.oldStation.map(function(t,e){return t.checked=!1,t.disabled=!0,t}));this.oldStation=this.oldStation.map(function(a,i){a.checked=!1;var n=new Date(t).getTime();return n<a.startDate||n>a.endDate?(a.disabled=!0,e.selectAllAbled=!0):a.disabled=!1,a}),this.clearFormThree()},selectRow:function(t){t||(this.selectAllChecked=!1),this.getSelectedOldStation()},selectAll:function(t){this.selectAllChecked=t,this.oldStation=this.oldStation.map(function(e){return e.checked=t,e}),this.getSelectedOldStation()},changeEndTime:function(t){t&&(this.getSaleList(t),this.changeThree=new Date,this.selecedStationList.length&&this.clearFormThree())},clearFormThree:function(){this.selecedStationList=[],this.discountType="",this.freeType="",this.discountNum="",this.freeDays="",this.serviceDetailsList=[],this.installmentType="",this.installmentName="",this.deposit="",this.formItem.firstPayTime=""},clearFormFour:function(){this.back="",this.formItem.transferDepositAmount=""},selectPayType:function(t){this.installmentType=t.value,this.changeThree=new Date,this.installmentName=t.label,this.errorObj.payType=!1},selectDeposit:function(t){this.deposit=t,this.changeThree=new Date,this.errorObj.deposit=!1},changeFirstTime:function(){},getSaleList:function(t){var e=this,a={start:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseBegindate)),end:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t)),communityId:this.formItem.communityId};this.$http.post("get-free-sale",a,function(t){e.freeMap={},e.discount={list:[]},t.data.length&&e.dealSale(t.data)},function(t){e.$Notice.error({title:t.message})})},dealSale:function(t){var e=[];e=t.filter(function(t){return!!t.discountList});var a=[];if(a=t.filter(function(t){return!!t.freeMap}),e.length){var i=e[0].discountList,o=[];for(var r in i){var s={};s.sale=i[r],o.push(s)}this.discount={list:o,minDiscount:e[0].minDiscount,tacticsType:e[0].tacticsType,tacticsId:e[0].tacticsId}}if(a.length){var l=a[0].freeMap,c=[];for(var d in l){var u={};u.month=d,u.days=n()(l[d])[0],u.date=l[d][n()(l[d])[0]],c.push(u)}this.freeMap={tacticsType:a[0].tacticsType,maxDays:a[0].maxFreeDays,list:c,tacticsId:a[0].tacticsId}}},selectFree:function(t){this.freeType=t.month,this.freeDays=t.days},cancleFreeMap:function(){this.freeStartDate="",this.freeDays="",this.setFreeDays(this.formItem.leaseEnddate)},setfreeMap:function(){var t=this,e=this.freeDays;e&&this.checkFreeMap();var a={communityId:this.formItem.communityId,days:this.freeDays,end:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseEnddate)),start:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseBegindate)),tacticsId:this.freeMap.tacticsId};return 0===e?(this.freeStartDate="",void this.setFreeDays(this.formItem.leaseEnddate)):e?void this.$http.post("get-free-start-date",a).then(function(e){t.freeStartDate=e.data.freeStartDate,t.setFreeDays(e.data.freeStartDate)}).catch(function(e){t.$Notice.error({title:e.message})}):void this.$Notice.error({title:"请填写免租天数"})},checkFreeMap:function(){var t=this.freeDays;if(isNaN(t))return this.$Notice.error({title:"免租天数必须为数字"}),this.freeDays=this.freeMap.maxDays,!1;var e=/^(0|\+?[1-9][0-9]*)$/;return t&&!e.test(t)?(this.$Notice.error({title:"免租天数必须是整数"}),this.freeDays=this.freeMap.maxDays,!1):!(t>this.freeMap.maxDays)||(this.$Notice.error({title:"免租天数不得大于"+this.freeMap.maxDays}),this.freeDays=this.freeMap.maxDays,!1)},setFreeDays:function(t){var e=this;if(!this.freeDays&&0!=this.freeDays)return void this.$Notice.error({title:"请先选择免租天数"});var a=this.saleList;if(a=a.filter(function(t){return t.tacticsType!=e.freeMap.tacticsType}),0==this.freeDays)return this.saleList=a,void this.getSaleAmount(a);var i={discount:"",tacticsType:this.freeMap.tacticsType,validEnd:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseEnddate)),validStart:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t)),tacticsId:this.freeMap.tacticsId};a.push(i),this.saleList=a,this.getSaleAmount(a)},setDiscountNum:function(){var t=this;if(this.discountNum=this.discountCon,!this.discountNum)return void this.$Notice.error({title:"请先选择折扣"});var e=this.saleList;e=e.filter(function(e){return e.tacticsType!=t.discount.tacticsType});var a={discount:this.discountNum,tacticsType:this.discount.tacticsType,validEnd:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseEnddate)),validStart:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseBegindate)),tacticsId:this.discount.tacticsId};e.push(a),this.saleList=e,this.getSaleAmount(e)},getSaleAmount:function(t){var e=this,a=!1,i=this.selecedStationList;i.map(function(t){var e=t;return""===t.originalPrice&&(a=!0),e});if(a)return void this.$Notice.error({title:"工位单价不能为空"});this.watchServiceDetail=new Date;var n={leaseEnddate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseEnddate)),leaseBegindate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseBegindate)),communityId:this.formItem.communityId,seats:l()(this.selecedStationList),saleList:l()(t||[])},o=this;this.changeThree=new Date,this.$http.post("count-sale",n).then(function(t){o.selecedStationList=t.data.seats.map(function(t){var a=t;return a.guidePrice=t.guidePrice,a.startDate=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.startDate)),a.endDate=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.endDate)),a.belongType=t.seatType,a.seatNum=t.name,a.saleNum=e.discountNum||"-",a.floor=t.whereFloor||t.floor,a.seatPrice=t.guidePrice||t.seatPrice,a.discountedPrice=t.discountedPrice,a})}).catch(function(t){o.$Notice.error({title:t.message})})},selectDiscount:function(t){this.discountType=t.sale,this.discountCon=t.sale},openPlanMap:function(){if(!this.formItem.leaseEnddate)return void this.$Notice.error({title:"请先选择换租服务结束日"});if(this.formItem.leaseBegindate>this.formItem.leaseEnddate)return void this.$Notice.error({title:"换租服务开始日不能大于换租服务结束日"});var t=this.floors.map(function(t){return t.value}),e={floor:t.join(","),communityId:this.formItem.communityId,mainBillId:this.$route.params.orderEdit,startDate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseBegindate)),time:+new Date,endDate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseEnddate))};this.params=e,this.stationData.submitData=this.selecedStationList||[],this.showMap=!0},onResultChange:function(t){this.stationData=t},cancelStation:function(){this.stationData={submitData:this.selecedStationList,deleteData:[]},this.showMap=!1},submitStation:function(){var t=this;this.showMap=!1,this.saleList=[],this.discountNum="",this.freeDays="",this.freeStartDate="",this.selecedStationList=this.stationData.submitData.map(function(e){return e.guidePrice=e.seatPrice||e.guidePrice||0,e.discountedPrice=e.seatPrice,e.floor=e.whereFloor||e.floor,e.seatId=e.id,e.seatNum=e.name,e.startDate=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.formItem.leaseBegindate)),e.saleNum=t.discountNum||"--",e.endDate=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.formItem.leaseEnddate)),e}),this.watchServiceDetail=new Date,this.changeThree=new Date},getSeatCombin:function(){var t=this,e=this.selecedStationList.map(function(t){return t.startDate=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.startDate)),t.endDate=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.endDate)),t}),a={communityId:this.formItem.communityId,leaseBegindate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseBegindate)),leaseEnddate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseEnddate)),saleList:l()(this.saleList||[]),seats:l()(e)};this.$http.post("get-seat-combin",a).then(function(e){t.serviceDetailsList=e.data.items.map(function(e){return e.freeStartDate=t.freeStartDate||"",e})}).catch(function(e){t.$Notice.error({title:e.message})})},deleteDtation:function(t){this.selecedStationList.splice(t,1),this.selecedStationList.length?this.getStationAmount():this.serviceDetailsList=[]},getServiceDetail:function(t){var e=this,a="";t.freeStartDate?(a=new Date(t.freeStartDate),a=a.setDate(a.getDate()-1),a=new Date(a).getTime()):a=t.endDate;var i=t.seatIds.map(function(e){var a={};return a.seatId=e,a.seatType=t.seatType,a}),n=t.signPrice.split("元")[0],o={codeName:t.name,endDate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.endDate)),realEndDate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(a)),seats:l()(i),signPrice:n,startDate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.startDate))};this.$http.post("get-seat-combin-detail",o).then(function(t){e.openService=!0,e.detailService=t.data}).catch(function(t){e.$Notice.error({title:t.message})})},changePrice:function(t,e){this.selecedStationList=this.selecedStationList.map(function(a,i){return a.seatNum=a.name,a.originalPrice=i==t?e:a.originalPrice||a.seatPrice,a}),this.getStationAmount()},getStationAmount:function(t){var e=this,a=!1,i=t||this.selecedStationList,n=i.map(function(t){var i=t;return i.guidePrice=t.guidePrice||t.seatPrice||0,i.originalPrice=t.originalPrice||0===t.originalPrice||0!=i.guidePrice?t.originalPrice||i.guidePrice:"",i.seatId=t.id||t.seatId,i.seatNum=t.name,i.floor=t.whereFloor||t.floor,i.endDate=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(e.formItem.leaseEnddate)),i.startDate=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(e.formItem.leaseBegindate)),""===t.originalPrice&&(a=!0),i.floor=t.whereFloor,i});if(!a){this.watchServiceDetail=new Date;var o={leaseEnddate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseEnddate)),leaseBegindate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseBegindate)),communityId:this.formItem.communityId,seats:l()(n),saleList:l()(this.saleList)};this.changeThree=new Date,this.$http.post("count-sale",o).then(function(t){e.selecedStationList=t.data.seats.map(function(t){var a=t;return a.guidePrice=t.guidePrice,a.seatPrice=t.guidePrice,a.startDate=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.startDate)),a.endDate=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(t.endDate)),a.belongType=t.seatType,a.seatNum=t.name,a.saleNum=e.discountNum||"-",a.floor=t.whereFloor||t.floor,a.discountedPrice=t.discountedPrice,a})}).catch(function(t){e.$Notice.error({title:t.message})})}},checkDiscount:function(){var t=this.discountCon;if(isNaN(t))return this.$Notice.error({title:"折扣必须为数字"}),void(this.discountCon=this.discount.minDiscount);var e=/^[1-9]+(.[0-9]{1})?$/;return t&&!e.test(t)?void this.$Notice.error({title:"折扣不得多余小数点后一位"}):t<this.discount.minDiscount?(this.$Notice.error({title:"单价不得小于"+this.discount.minDiscount}),void(this.discountCon=this.discount.minDiscount)):t>9.9?(this.$Notice.error({title:"单价不得大于9.9"}),void(this.discountCon=this.discount.minDiscount)):void 0},getSeatReplaceDetail:function(){var t=this,e=this.selecedStationList.map(function(t){return t.signPrice=t.discountedPrice,t}),a="";this.freeStartDate?(a=new Date(this.freeStartDate),a=a.setDate(a.getDate()-1),a=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(a))):a=m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseEnddate));var i={deposit:this.deposit,endDate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseEnddate)),newSeats:l()(e),oldSeats:l()(this.selectedOldStation),startDate:m.a.dateToStr("YYYY-MM-DD 00:00:00",new Date(this.formItem.leaseBegindate)),realEndDate:a,orderId:10718};this.$http.post("get-seat-replace-detail",i).then(function(e){var a=[];a.push(e.data),t.oldStationData=a,t.newStationData=a,t.formItem.changeServiceFee=e.data.changeServiceFee}).catch(function(e){t.status=2,t.$Notice.error({title:e.message})})},getBack:function(){var t=this.formItem.transferDepositAmount,e=this.newStationData[0].changeDeposit;if(isNaN(t))return this.$Notice.error({title:"旧服务保证金转新金额必须为数字"}),this.formItem.transferDepositAmount="",void(this.back="");var a=/^[0-9]+(.[0-9]{1,2})?$/;if(t&&!a.test(t))return this.$Notice.error({title:"旧服务保证金转新金额不得多余小数点后两位"}),this.formItem.transferDepositAmount="",void(this.back="");if(t>e)return this.$Notice.error({title:"旧服务保证金转新金额不得大于"+e}),this.formItem.transferDepositAmount="",void(this.back="");var i=(e-this.formItem.transferDepositAmount).toFixed(2);this.back=i},cancel:function(){this.openService=!1},getDetailData:function(){var t=this,e=this.$route.params,a={id:e.orderEdit};this.$http.get("get-replace-detail",a).then(function(a){var i=a.data;t.selecedStationList=a.data.newSeatInfo.map(function(t){return t.originalPrice=t.marketPrice,t.name=t.seatNum,t.whereFloor=t.floor,t.seatName=t.seatNum,t.id=t.seatId,t.floor=t.floor,t.whereFloor=t.floor,t.belongType=t.seatType,t.saleNum=a.data.discount||"-",t.discountedPrice=t.signPrice,t.startDate=a.data.realStartDate,t.endDate=a.data.realEndDate,t}),i.id=e.orderEdit,t.serviceDetailsList=a.data.newSeatCombin;var n=[];n.push(a.data.feeResultVO),i.newStationData=n,i.serviceDetailsList=a.data.newSeatCombin.map(function(t){return t.startDate=m.a.dateToStr("YYYY-MM-DD",new Date(t.startDate)),t.endDate=m.a.dateToStr("YYYY-MM-DD",new Date(t.endDate)),t}),i.changeServiceFee=a.data.feeResultVO.changeServiceFee,i.freeStartDate=a.data.freeStartDate||"",t.freeStartDate=a.data.freeStartDate||"",i.startDate=a.data.realStartDate,i.back=a.data.feeResultVO.lockDeposit,t.formItem=i,t.formItem.signDate=new Date,t.formItem.leaseBegindate=a.data.realStartDate,t.formItem.leaseEnddate=a.data.realEndDate,t.formItem.transferDepositAmount=a.data.feeResultVO.transferDeposit+"",t.freeDays=a.data.freeDays,t.back=a.data.feeResultVO.lockDeposit,t.installmentType=a.data.installmentType,t.payList.map(function(e){e.value==a.data.installmentType&&(t.installmentName=e.label)}),t.formItem.communityId=a.data.communityId+"",t.formItem.salerId=l()(a.data.saleId),t.formItem.communityName=a.data.communityName,t.salerName=a.data.saleName,t.discountNum=a.data.discount,t.discountCon=a.data.discount,t.deposit=a.data.deposit,t.saleList=a.data.tacticsVOs||[],t.stationData.submitData=t.selecedStationList,t.originStationList=t.selecedStationList;var o=t;t.originBeginTime=a.data.realStartDate,setTimeout(function(){o.getCustomerToCom()},200)}).catch(function(e){console.log(e),t.$Notice.error({title:e.message})})},cancleDiscount:function(){var t=this;this.discountNum="",this.discountCon="";var e=this.saleList;e=e.filter(function(e){return e.tacticsType!=t.discount.tacticsType}),this.saleList=e,this.getSaleAmount(e)},entryPrice:function(){if(!this.entryPriceList.length)return void this.$Notice.error({title:"请先选择录入单价的工位"});this.openPrice=!0},selectStationEvent:function(t){this.entryPriceList=t},submitPrice:function(){var t=this,e=!1,a=[],i="",n=/^[0-9]+(.[0-9]{1,2})?$/;if(isNaN(this.price)?(e=!0,i="工位单价必须是数字"):n.test(this.price)||(e=!0,i="工位单价不得多于三位小数"),this.entryPriceList.map(function(n){a.push(n.seatId),n.guidePrice>t.price&&(e=!0,i="录入单价不得小于指导价。")}),e)return void(this.priceError=i);this.priceError="",this.selecedStationList=this.selecedStationList.map(function(e){return-1!=a.indexOf(e.seatId)&&(e.originalPrice=t.price),e}),this.getStationAmount(),this.openPrice=!1,this.price="",this.entryPriceList=[]},cancelPrice:function(){this.price="",this.openPrice=!1},getFreeDeposit:function(){var t=this;this.$http.get("get-seat-deposit-free","").then(function(e){t.showFree=e.data,e.data&&(t.depositList.push({value:"0",label:"无押金"}),t.depositList.push({value:"1",label:"1个月"}))}).catch(function(e){t.$Notice.error({title:e.message})})}}}},Kozl:function(t,e,a){"use strict";e.a={name:"labelText",props:["label","inline","type"],data:function(){return{labeltextClass:"ui-labeltext",inlineClass:"inline",unlineClass:"unline"}},methods:{getClassName:function(){var t="ui-labeltext";return this.inline?t+=" ui-label-text-unline":t+=" ui-label-text-inline",t}}}},LfLl:function(t,e,a){"use strict";var i=a("9Jg8");e.a={props:{onchange:Function,value:String,disabled:Boolean,clearable:{type:Boolean,default:!1}},data:function(){return{saler:"",loading1:!1,salerOptions:[]}},methods:{changeContent:function(t){this.onchange(t)},remoteSaler:function(t){var e=this;""!==t&&(this.loading1=!0,setTimeout(function(){e.getSalerList(t)},200))},getSalerList:function(t){var e={phoneOrEmail:t},a=[],n=this;i.a.get("get-saler",e,function(t){a=t.data.slice(0,10),a.map(function(t){var e=t;return e.label=t.lastname,e.value=t.id+"",e}),n.loading1=!1,n.salerOptions=a},function(t){console.log("error",t)})}}}},MyuT:function(t,e,a){var i=a("P75S");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("041bc169",i,!0,{sourceMap:!1})},NfUT:function(t,e,a){"use strict";function i(t){a("PrGQ")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("1T+a"),o=a("A8NK"),r=a("VU/8"),s=i,l=r(n.a,o.a,!1,s,null,null);e.default=l.exports},P67S:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.classType[t.type]},[t._v("\n    "+t._s(t.title)+"\n")])},n=[],o={render:i,staticRenderFns:n};e.a=o},P75S:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".com-select-saler ::-webkit-input-placeholder{color:#666}.com-select-saler ::-moz-placeholder{color:#666}.com-select-saler :-ms-input-placeholder{color:#666}.com-select-saler input:-moz-placeholder{color:#666}",""])},PrGQ:function(t,e,a){var i=a("xPOr");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("07662486",i,!0,{sourceMap:!1})},RVO6:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"create-new-order"},["create"==t.orderStatus?a("SectionTitle",{attrs:{title:"新建换租订单"}}):t._e(),"create"==t.orderStatus?a("div",{staticClass:"create-order creat-order-form"},[a("Steps",{staticStyle:{"margin-bottom":"20px"},attrs:{current:t.status,status:"process"}},[a("Step",{attrs:{title:t.returnTitle(0),content:"客户信息页"}}),a("Step",{attrs:{title:t.returnTitle(1),content:"原工位选择页"}}),a("Step",{attrs:{title:t.returnTitle(2),content:"新工位选择页"}}),a("Step",{attrs:{title:t.returnTitle(3),content:"服务费信息页"}})],1),a("Card",{directives:[{name:"show",rawName:"v-show",value:0==t.status,expression:"status==0"}],attrs:{id:"step-one"}},[a("p",{staticClass:"card-title",attrs:{slot:"title"},slot:"title"},[t._v("\n               基本信息\n            ")]),a("Form",{ref:"formItemOne",staticClass:"demo-m",attrs:{model:t.formItem,rules:t.ruleValidateOne,"label-position":"top"}},[a("Row",[a("Col",{staticClass:"col"},[a("FormItem",{staticClass:"bill-search-class",staticStyle:{width:"252px"},attrs:{label:"客户名称",prop:"customerId"}},[a("selectCustomers",{attrs:{name:"formItem.customerId",onchange:t.changeCustomer,labelInValue:t.labelInValue,value:t.formItem.customerName}})],1)],1),a("Col",{staticClass:"col"},[a("FormItem",{staticClass:"bill-search-class",attrs:{label:"相关社区",prop:"communityId"}},[a("Select",{staticStyle:{width:"252px"},attrs:{placeholder:t.formItem.communityName,filterable:"",clearable:"","label-in-value":t.labelInValue},on:{"on-change":t.changeCommunity},model:{value:t.formItem.communityId,callback:function(e){t.$set(t.formItem,"communityId",e)},expression:"formItem.communityId"}},t._l(t.communityList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),a("Col",{staticClass:"col"},[a("FormItem",{staticStyle:{width:"252px"},attrs:{label:"销售员",prop:"salerId"}},[a("SelectSaler",{attrs:{name:"formItem.salerId",onchange:t.changeSaler,value:t.salerName}})],1)],1),a("Col",{staticClass:"col"},[a("FormItem",{staticStyle:{width:"252px"},attrs:{label:"销售时间",prop:"signDate"}},[a("DatePicker",{staticStyle:{width:"252px"},attrs:{type:"date",placeholder:"开始时间"},on:{"on-change":t.changeSaleTime},model:{value:t.formItem.signDate,callback:function(e){t.$set(t.formItem,"signDate",e)},expression:"formItem.signDate"}})],1)],1),a("Col",{staticClass:"col"},[a("FormItem",{staticClass:"bill-search-class",attrs:{label:"换租原因"}},[a("Input",{staticStyle:{width:"252px"},attrs:{placeholder:"请输入换租原因",type:"textarea",maxlength:t.replaceMemoLength},model:{value:t.formItem.replaceMemo,callback:function(e){t.$set(t.formItem,"replaceMemo",e)},expression:"formItem.replaceMemo"}})],1)],1)],1)],1),a("div",{staticClass:"buttons"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.next("formItemOne")}}},[t._v("下一步")])],1)],1),a("Card",{directives:[{name:"show",rawName:"v-show",value:1==t.status,expression:"status==1"}],attrs:{id:"step-two"}},[a("p",{staticClass:"card-title",attrs:{slot:"title"},slot:"title"},[t._v("\n               原工位信息\n            ")]),a("Form",{ref:"formItemTwo",staticClass:"demo-m",attrs:{model:t.formItem,rules:t.ruleValidateTwo,"label-position":"top"}},[a("Row",[a("Col",{staticClass:"col"},[a("FormItem",{staticClass:"bill-search-class",attrs:{label:"换租服务开始日：",prop:"leaseBegindate"}},[a("DatePicker",{staticStyle:{width:"252px"},attrs:{type:"date",placeholder:"换租服务开始日："},on:{"on-change":t.changeBeginTime},model:{value:t.formItem.leaseBegindate,callback:function(e){t.$set(t.formItem,"leaseBegindate",e)},expression:"formItem.leaseBegindate"}})],1)],1),a("Col",[a("div",{staticClass:"header"},[a("span",{staticClass:"select"},[a("Checkbox",{attrs:{disabled:t.selectAllAbled},on:{"on-change":t.selectAll},model:{value:t.selectAllChecked,callback:function(e){t.selectAllChecked=e},expression:"selectAllChecked"}})],1),a("span",{staticClass:"header-name"},[t._v("\n                                工位编号/房间名称\n                            ")]),a("span",{staticClass:"header-name"},[t._v("产品类型")]),a("span",{staticClass:"header-name"},[t._v("原服务开始日")]),a("span",{staticClass:"header-name"},[t._v("原服务结束日")]),a("span",{staticClass:"header-name"},[t._v("预更换服务期")])]),t._l(t.oldStation,function(e,i){return a("div",{key:e.seatId+i,staticClass:"station-table"},[a("span",{staticClass:"select"},[a("Checkbox",{attrs:{disabled:e.disabled},on:{"on-change":t.selectRow},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}})],1),a("span",{staticClass:"header-name"},[t._v("\n                                "+t._s(e.seatNum)+"\n                            ")]),a("span",{staticClass:"header-name"},[t._v("\n                            "+t._s("SPACE"==e.seatType?"独立办公室":"开放工位"))]),a("span",{staticClass:"header-name"},[t._v(t._s(t._f("dateFormat")(e.startDate,"YYYY-MM-dd")))]),a("span",{staticClass:"header-name"},[t._v(t._s(t._f("dateFormat")(e.endDate,"YYYY-MM-dd")))]),0==e.checked?a("span",{staticClass:"header-name"},[t._v("--")]):t._e(),1==e.checked?a("span",{staticClass:"header-name"},[t._v(t._s(t._f("dateFormat")(t.formItem.leaseBegindate,"YYYY-MM-dd"))+"至"+t._s(t._f("dateFormat")(e.endDate,"YYYY-MM-dd")))]):t._e()])})],2),a("Col",[a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.errorObj.oldStation,expression:"errorObj.oldStation == true"}],staticClass:"error"},[t._v("请选择要更换的原工位")])])],1)],1),a("div",{staticClass:"buttons",staticStyle:{"margin-top":"20px"}},[a("Button",{attrs:{type:"ghost"},on:{click:t.previous}},[t._v("上一步")]),a("span",{staticClass:"between"}),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.next("formItemTwo")}}},[t._v("下一步")])],1)],1),a("Card",{directives:[{name:"show",rawName:"v-show",value:2==t.status,expression:"status==2"}],attrs:{id:"step-three"}},[a("p",{staticClass:"card-title",attrs:{slot:"title"},slot:"title"},[t._v("\n                新工位信息\n            ")]),a("Form",{ref:"formItemThree",staticClass:"demo-m",attrs:{model:t.formItem,rules:t.ruleValidateThree,"label-position":"top"}},[a("Row",[a("Col",{staticClass:"col"},[a("FormItem",{staticClass:"bill-search-class",attrs:{label:"换租服务开始日"}},[a("DatePicker",{staticStyle:{width:"252px"},attrs:{type:"date",placeholder:"换租服务开始日",disabled:t.disabledValue},model:{value:t.formItem.leaseBegindate,callback:function(e){t.$set(t.formItem,"leaseBegindate",e)},expression:"formItem.leaseBegindate"}})],1)],1),a("Col",{staticClass:"col"},[a("FormItem",{staticClass:"bill-search-class",attrs:{label:"换租服务结束日",prop:"leaseEnddate"}},[a("DatePicker",{staticStyle:{width:"252px"},attrs:{type:"date",placeholder:"换租服务结束日"},on:{"on-change":t.changeEndTime},model:{value:t.formItem.leaseEnddate,callback:function(e){t.$set(t.formItem,"leaseEnddate",e)},expression:"formItem.leaseEnddate"}})],1)],1)],1),a("Row",{staticStyle:{"margin-bottom":"30px"}},[a("Button",{attrs:{type:"primary"},on:{click:t.openPlanMap}},[t._v("选择工位")]),a("span",{staticStyle:{padding:"0 5px"}}),a("Button",{attrs:{type:"primary"},on:{click:t.entryPrice}},[t._v("录入单价")])],1),a("Row",{staticStyle:{"margin-bottom":"10px"}},[a("Col",{staticStyle:{display:"inline-block",width:"30%"}},[a("div",{staticClass:"title"},[t._v("签约价明细")])]),t.discount.list.length&&t.selecedStationList.length?a("Col",{staticClass:"sale-tactics",staticStyle:{display:"inline-block",width:"70%"}},[a("div",{staticStyle:{display:"inline-block"}},t._l(t.discount.list,function(e){return a("span",{key:e.sale,staticClass:"button-list",class:{active:t.discountCon==e.sale},on:{click:function(a){t.selectDiscount(e)}}},[t._v(t._s(e.sale)+"折")])})),a("div",{staticStyle:{display:"inline-block","vertical-align":"top"}},[a("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"最大折扣"+t.discount.minDiscount+"折",maxlength:t.maxlength},on:{"on-blur":t.checkDiscount},model:{value:t.discountCon,callback:function(e){t.discountCon=e},expression:"discountCon"}}),a("span",{staticStyle:{padding:"0 15px"}},[t._v(" 折")]),a("Button",{attrs:{type:"primary"},on:{click:t.setDiscountNum}},[t._v("设置")]),a("span",{staticStyle:{padding:"0 5px"}}),a("Button",{attrs:{type:"ghost"},on:{click:t.cancleDiscount}},[t._v("取消折扣")])],1)]):t._e()],1),a("Row",[a("Col",[a("Table",{attrs:{columns:t.signPriceColumns,data:t.selecedStationList},on:{"update:data":function(e){t.selecedStationList=e},"on-selection-change":t.selectStationEvent}})],1)],1),a("Row",{staticStyle:{"margin-top":"30px","margin-bottom":"10px"}},[a("Col",{staticStyle:{display:"inline-block",width:"30%"}},[a("div",{staticClass:"title"},[t._v("服务费明细")])]),t.freeMap.maxDays&&t.selecedStationList.length?a("Col",{staticClass:"sale-tactics",staticStyle:{display:"inline-block",width:"70%"}},[a("div",{staticStyle:{display:"inline-block"}},t._l(t.freeMap.list,function(e){return a("span",{key:e.month,staticClass:"button-list",class:{active:t.freeDays==e.days},on:{click:function(a){t.selectFree(e)}}},[t._v("赠"+t._s(e.month)+"个月")])})),a("div",{staticStyle:{display:"inline-block","vertical-align":"top"}},[a("Input",{staticStyle:{width:"120px"},attrs:{placeholder:"最大允许赠送"+t.freeMap.maxDays+"天"},on:{"on-blur":t.checkFreeMap},model:{value:t.freeDays,callback:function(e){t.freeDays=e},expression:"freeDays"}}),a("span",{staticStyle:{padding:"0 15px"}},[t._v(" 天")]),a("Button",{attrs:{type:"primary"},on:{click:t.setfreeMap}},[t._v("设置")]),a("span",{staticStyle:{padding:"0 5px"}}),a("Button",{attrs:{type:"ghost"},on:{click:t.cancleFreeMap}},[t._v("取消免租")])],1)]):t._e()],1),a("Row",[a("Col",[a("Table",{attrs:{columns:t.serviceDetailsColumns,data:t.serviceDetailsList}})],1)],1),a("Row",[a("Col",{staticClass:"col"},[a("span",{staticClass:"required-label",staticStyle:{width:"252px",padding:"11px 12px 10px 4px",color:"#666",display:"block"}},[t._v("付款周期")]),a("div",{staticStyle:{display:"block","min-width":"252px"}},t._l(t.payList,function(e){return a("span",{key:e.value,staticClass:"button-list",class:{active:t.installmentType==e.value},on:{click:function(a){t.selectPayType(e)}}},[t._v(t._s(e.label))])})),t.errorObj.payType?a("div",{staticClass:"pay-error"},[t._v("请选择付款方式")]):t._e()]),a("Col",{staticClass:"col",staticStyle:{"max-width":"560px"}},[a("span",{staticClass:"required-label",staticStyle:{width:"252px",padding:"11px 12px 10px 4px",color:"#666",display:"block"}},[t._v("服务保证金")]),a("div",{staticStyle:{display:"block","min-width":"252px"}},t._l(t.depositList,function(e){return a("span",{key:e.value,staticClass:"button-list",class:{active:t.deposit==e.value},on:{click:function(a){t.selectDeposit(e.value)}}},[t._v(t._s(e.label))])})),t.errorObj.deposit?a("div",{staticClass:"pay-error"},[t._v("请选择履约保证金总额")]):t._e()]),a("Col",{staticClass:"col",staticStyle:{"margin-top":"10px"}},[a("FormItem",{staticClass:"bill-search-class",attrs:{label:"首付款日期",prop:"firstPayTime"}},[a("DatePicker",{staticStyle:{width:"252px"},attrs:{type:"date",placeholder:"开始时间"},on:{"on-change":t.changeFirstTime},model:{value:t.formItem.firstPayTime,callback:function(e){t.$set(t.formItem,"firstPayTime",e)},expression:"formItem.firstPayTime"}})],1)],1)],1)],1),a("div",{staticClass:"buttons"},[a("Button",{attrs:{type:"ghost"},on:{click:t.previous}},[t._v("上一步")]),a("span",{staticClass:"between"}),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.next("formItemThree")}}},[t._v("下一步")])],1)],1),a("Card",{directives:[{name:"show",rawName:"v-show",value:3==t.status,expression:"status==3"}],attrs:{id:"step-four"}},[a("p",{staticClass:"card-title",attrs:{slot:"title"},slot:"title"},[t._v("\n                服务费信息\n            ")]),a("Form",{ref:"formItemFour",staticClass:"demo-m",attrs:{model:t.formItem,rules:t.ruleValidateFour,"label-position":"top"}},[a("Row",[a("Col",[a("FormItem",{attrs:{label:"旧工位信息"}},[a("Table",{attrs:{columns:t.oldStationInfo,data:t.oldStationData}})],1)],1),a("Col",[a("FormItem",{attrs:{label:"新工位信息"}},[a("Table",{attrs:{columns:t.newStationInfo,data:t.newStationData}})],1)],1),a("Col",{staticClass:"col"},[a("FormItem",{staticStyle:{width:"252px"},attrs:{label:"退还服务费"}},[a("Input",{staticStyle:{width:"252px"},attrs:{placeholder:"退还服务费",disabled:t.disabledValue},model:{value:t.formItem.changeServiceFee,callback:function(e){t.$set(t.formItem,"changeServiceFee",e)},expression:"formItem.changeServiceFee"}})],1)],1),a("Col",{staticClass:"col"},[a("FormItem",{staticStyle:{width:"252px"},attrs:{label:"旧服务保证金转新（剩余扣除）",prop:"transferDepositAmount"}},[a("Input",{staticStyle:{width:"252px"},attrs:{placeholder:"旧服务保证金转新"},on:{"on-blur":t.getBack,"on-change":t.getBack},model:{value:t.formItem.transferDepositAmount,callback:function(e){t.$set(t.formItem,"transferDepositAmount",e)},expression:"formItem.transferDepositAmount"}})],1)],1),a("Col",{staticClass:"col"},[a("FormItem",{staticClass:"bill-search-class",attrs:{label:"扣除服务保证金"}},[a("Input",{staticStyle:{width:"252px"},attrs:{placeholder:"扣除服务保证金",disabled:t.disabledValue},model:{value:t.back,callback:function(e){t.back=e},expression:"back"}})],1)],1)],1)],1),a("div",{staticClass:"buttons"},[a("Button",{attrs:{type:"ghost"},on:{click:t.previous}},[t._v("上一步")]),a("span",{staticClass:"between"}),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.submit("formItemFour")}}},[t._v("提交")])],1)],1)],1):t._e(),a("Modal",{attrs:{title:"服务费明细","ok-text":"保存","cancel-text":"取消",width:"90%","class-name":"vertical-center-modal"},model:{value:t.openService,callback:function(e){t.openService=e},expression:"openService"}},[a("div",{staticClass:"content"},[a("div",{staticClass:"header",staticStyle:{"font-size":"14px"}},[a("span",{staticClass:"left"},[t._v("\n                  "+t._s("SPACE"==t.detailService.seatType?"独立房间":"独立工位")+" "+t._s(t.detailService.codeName)+"\n               ")]),a("span",{staticClass:"right",staticStyle:{float:"right"}},[t._v("\n                   ￥"+t._s(t._f("thousand")(t.detailService.totalAmount))+"\n               ")])]),a("Table",{staticStyle:{margin:"10px 0"},attrs:{columns:t.serviceColumns,data:t.detailService.details}})],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.cancel}},[t._v("确定")])],1)]),a("Modal",{attrs:{title:"录入单价","ok-text":"保存","cancel-text":"取消",width:"300px","class-name":"vertical-center-modal"},model:{value:t.openPrice,callback:function(e){t.openPrice=e},expression:"openPrice"}},[t.openPrice?a("div",[a("span",{staticStyle:{display:"inline-block",height:"32px","line-height":"32px"}},[t._v(" 工位单价： ")]),a("Input",{staticStyle:{width:"150px"},attrs:{placeholder:"工位单价"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),t.priceError?a("span",{staticStyle:{display:"block",height:"32px","line-height":"32px",color:"red"}},[t._v(t._s(t.priceError))]):t._e()],1):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.submitPrice}},[t._v("确定")]),a("Button",{on:{click:t.cancelPrice}},[t._v("取消")])],1)]),a("Modal",{attrs:{title:"选择工位","ok-text":"保存","cancel-text":"取消",width:"90%","class-name":"vertical-center-modal"},model:{value:t.showMap,callback:function(e){t.showMap=e},expression:"showMap"}},[t.showMap?a("planMap",{attrs:{floors:t.floors,params:t.params,stationData:t.stationData,originStationList:t.originStationList},on:{"update:floors":function(e){t.floors=e},"update:params":function(e){t.params=e},"update:stationData":function(e){t.stationData=e},"on-result-change":t.onResultChange,"update:originStationList":function(e){t.originStationList=e}}}):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.submitStation}},[t._v("确定")])],1)],1),"view"==t.orderStatus?a("div",{staticClass:"view"},[a("ReplaceView",{attrs:{showEdit:t.editCardabled,data:t.overViewData},on:{editCards:t.editCard,"update:data":function(e){t.overViewData=e}}})],1):t._e()],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},Rrep:function(t,e,a){"use strict";var i=a("pFYg"),n=a.n(i),o=a("woOf"),r=a.n(o),s=function(t,e){var a,i,o,s,l,c,d,u=[],p=1,h=null,m=[],f=[],g={z:1,isMode:"select",modes:["edit","view","select"],stations:[],rulers:[],backgroundImageUrl:""};g.db={reset:function(){g.stations=[]},getAllStation:function(){return[].concat(g.stations)},setAllStation:function(t){g.stations=[].concat(t)},findStationIndex:function(t){var e;return this.getAllStation().map(function(a,i){a.key==t&&(e=i)}),e},newStation:function(t){return t=r()({},t),void 0===this.findStationIndex(t.key)&&g.stations.push(t),this},removeStation:function(t){var e,a=this.getAllStation();if(a.map(function(a,i){t==a.key&&(e=i)}),void 0!==e){a.splice(e,1),this.setAllStation(a);var e;m.map(function(a,i){a.getProps().key==t&&(e=i)}),void 0!==e&&m.splice(e,1)}},getStation:function(t){var e=this.findStationIndex(t),a=this.getAllStation(),i=a[e];return r()({},i)},setStation:function(t,e){var a=this.getStation(t),i=this.findStationIndex(t);if(void 0!==i)return a=r()({},a,e),g.stations.splice(i,1,a),this},getImageUrl:function(){return g.backgroundImageUrl},setImageUrl:function(t){g.backgroundImageUrl=t}},g.utils={isEditMode:function(){return"edit"===g.isMode},isViewMode:function(){return"view"===g.isMode},isSelectMode:function(){return"select"===g.isMode}},g.stationStatus={1:{status:"join",mark:"已入住",textColor:"#fff",backgroundColor:"#499df1"},2:{status:"admit",mark:"不可选工位",textColor:"#fff",backgroundColor:"#499df1"},3:{status:"default",mark:"默认",textColor:"#499df1",backgroundColor:"#ffffff"},4:{status:"notChecked",mark:"未选择",textColor:"#499df1",backgroundColor:"#ffffff"},5:{status:"checked",mark:"已选中",textColor:"#fff",backgroundColor:"#28c288"}},g.station={width:30,height:30,minWidth:30,minHeight:30,maxWidth:200,maxHeight:200,scaleSpeed:20,isToSameSize:!0},g.operationTypeConfigs={canvasTopLineHover:{style:"pointer"},canvasLeftLineHover:{style:"pointer"},rulerHover:{style:"pointer"},mapHover:{style:"move"},stationMove:{style:"move"},stationHover:{style:"pointer"},stationLeftTopScale:{style:"nw-resize"},stationLeftCenterScale:{style:"w-resize"},stationLeftBottomScale:{style:"sw-resize"},stationTopCenterScale:{style:"n-resize"},stationRightTopScale:{style:"ne-resize"},stationRightCenterScale:{style:"e-resize"},stationRightBottomScale:{style:"se-resize"},stationBottomCenterScale:{style:"s-resize"}},g.plugin={onRemoveCallback:null,onScaleMapCallback:null,onCheckedStationCallback:null,onHoverInStationCallback:null,onHoverOutStationCallback:null,onErrorCallback:null,onReadyCallback:null,onRenderMapCallback:null},g.map={contextMenuEnable:!1,menuEnable:!1,mouseEnable:!1,deleteEnable:!0,scaleEnable:!0,rulerEnable:!0,stationClick:!0,scale:1,scaleMax:2,scaleMin:.1,scaleSpeed:.1,translateX:0,translateY:0,isLoadImageError:!1};var v,y,S={down:{},up:{},move:{}},b=function(t){var e=function t(e){e=r()({},t.defaultPropTypes,e),this.setProps(e)};return e.defaultPropTypes={type:"horizontal",x:0,y:0,checked:!1},e.prototype.isHorizontalLine=function(){var t=this.getProps();t.x,t.y;return"horizontal"===t.type},e.prototype.isVerticalLine=function(){var t=this.getProps();t.x,t.y;return"vertical"===t.type},e.prototype.componentWillReceiveProps=function(){this.render()},e.prototype.hasPosition=function(t,e){var a=this.getProps(),i=a.x,n=a.y,o=a.type,r=i-2,s=i+2,l=n-2,c=n+2;return"horizontal"==o?e>=l&&e<=c:"vertical"==o&&t>=r&&t<=s},e.prototype.drawHorizontalLine=function(){var t=this.getProps(),e=t.x,i=t.y,n=t.checked,o=w.transformPositionToView(e,i);a.beginPath(),a.moveTo(0,o.y),a.strokeStyle="red",n&&(a.strokeStyle="green"),a.lineTo(s,o.y),a.closePath(),a.stroke()},e.prototype.drawVerticalLine=function(){var t=this.getProps(),e=t.x,i=t.y,n=t.checked,o=w.transformPositionToView(e,i);a.beginPath(),a.moveTo(o.x,0),a.strokeStyle="red",n&&(a.strokeStyle="green"),a.lineTo(o.x,l),a.closePath(),a.stroke()},e.prototype.move=function(t,e){this.setProps({x:t,y:e})},e.prototype.setProps=function(t){this.props=r()({},this.props,t),this.componentWillReceiveProps()},e.prototype.getProps=function(){return r()({},this.props)},e.prototype.toChecked=function(){var t=this.getProps(),e=t.checked;e=!e,this.setProps({checked:e})},e.prototype.render=function(){"horizontal"==this.getProps().type?this.drawHorizontalLine():this.drawVerticalLine()},new e(t)},D=function t(e){e=e||{},p++,g.z++;var i=function t(e){var e=r()({},t.defaultPropTypes,e);this.stashProps=r()({},t.defaultPropTypes,e),this.componentWillReceiveProps(e)};return i.defaultPropTypes={x:0,y:0,z:g.z,width:g.station.width,height:g.station.height,name:"demo",type:"station",drag:!1,checked:!1,removed:!1,key:p,status:3,switchHoverIn:!1},i.prototype.onHoverIn=function(){var t=g.plugin.onHoverInStationCallback,e=this.getProps();if(!e.switchHoverIn){var a=o.getBoundingClientRect(),i=w.canvasToWindow(e.x,e.y);e.clientX=i.x+a.left,e.clientY=i.y+a.top,this.setProps({switchHoverIn:!0}),t&&t(e)}},i.prototype.onHoverOut=function(){var t=g.plugin.onHoverOutStationCallback,e=this.getProps();if(e.switchHoverIn){this.setProps({switchHoverIn:!1});var a=o.getBoundingClientRect(),i=w.canvasToWindow(e.x,e.y);e.clientX=i.x+a.left,e.clientY=i.y+a.top,t&&t(e)}},i.prototype.getProps=function(){return r()({},this.props)},i.prototype.setProps=function(t){var e=g.station,a=e.minWidth,i=e.minHeight,n=r()({},this.props);n=r()({},this.props,t),n.width<=a&&(n.width=a),n.height<=i&&(n.height=i),this.props=r()({},n),void 0===g.db.findStationIndex(n.key)&&g.db.newStation(n),g.db.setStation(n.key,n)},i.prototype.move=function(t,e){var a=this.stashProps.key,i=(g.db.findStationIndex(a),r()({},{key:a,x:t,y:e,drag:!0}));this.componentWillReceiveProps(i)},i.prototype.remove=function(){var t=this.props.key;this.setProps({removed:!0});g.db.getAllStation();g.db.removeStation(t),g.db.getAllStation()},i.prototype.componentWillReceiveProps=function(t){this.setProps(t),this.render()},i.prototype.saveProps=function(){this.stashProps=r()({},this.props)},i.prototype.getStashProps=function(){return r()({},this.stashProps)},i.prototype.render=function(){var t=this.props,e=t.drag,i=t.checked,o=t.removed,r=t.status;if(!o&&this.props.name){var s=this.props,l=g.stationStatus[r];i&&(l=g.stationStatus[5]);var c=w.transformWidthOrHeightToView(s.width,s.height),d=c.width,u=c.height,p=this.getLeftTopPosition();p=w.transformPositionToView(p.x,p.y),a.moveTo(p.x,p.y),a.beginPath(),a.fillStyle="#fff","object"===(void 0===l?"undefined":n()(l))&&l.hasOwnProperty("backgroundColor")&&(a.fillStyle=l.backgroundColor),a.fillRect(p.x,p.y,d,u),a.closePath(),a.beginPath(),a.font=12*g.map.scale+"px",a.fillStyle="#fff","object"===(void 0===l?"undefined":n()(l))&&l.hasOwnProperty("textColor")&&(a.fillStyle=l.textColor),a.textAlign="center",a.fillText(this.props.name,p.x+d/2,p.y+u/2+5),a.closePath(),e&&this.drawDragStyle()}},i.prototype.isSpace=function(){var t=this.props.type,e=!1;return"SPACE"===t&&(e=!0),e},i.prototype.toChecked=function(){var t=this.props,e=t.checked,a=(t.type,t.status),i=t.z;1!=a&&2!=a&&(i=g.z,g.z++,e=!e,this.componentWillReceiveProps({checked:e,z:i}))},i.prototype.isRemove=function(){return this.props.removed},i.prototype.isStation=function(){var t=this.props.type,e=!1;return"STATION"===t&&(e=!0),e},i.prototype.drawDragStyle=function(){var t=this.props,e=(t.x,t.y,this.props),i=w.transformWidthOrHeightToView(e.width,e.height),n=i.width,o=i.height,r=this.getLeftTopPosition();r=w.transformPositionToView(r.x,r.y),a.beginPath(),a.arc(r.x,r.y,3,0,2*Math.PI),a.strokeStyle="#000",a.stroke(),a.closePath(),a.beginPath(),a.arc(r.x,r.y,2,0,2*Math.PI),a.fillStyle="#3efe0b",a.fill(),a.closePath(),a.beginPath(),a.moveTo(r.x+4,r.y),a.lineTo(r.x+n/2,r.y),a.strokeStyle="#444",a.stroke(),a.closePath(),a.beginPath(),a.moveTo(r.x+n/2,r.y),a.lineTo(r.x+n,r.y),a.strokeStyle="#444",a.stroke(),a.closePath(),a.beginPath(),a.moveTo(r.x+4,r.y+o),a.lineTo(r.x+n/2,r.y+o),a.strokeStyle="#444",a.stroke(),a.closePath(),a.beginPath(),a.moveTo(r.x+n/2,r.y+o),a.lineTo(r.x+n,r.y+o),a.strokeStyle="#444",a.stroke(),a.closePath(),a.beginPath(),a.moveTo(r.x,r.y+4),a.lineTo(r.x,r.y+o/2),a.strokeStyle="#444",a.stroke(),a.closePath(),a.beginPath(),a.moveTo(r.x,r.y+o/2),a.lineTo(r.x,r.y+o),a.strokeStyle="#444",a.stroke(),a.closePath(),a.beginPath(),a.moveTo(r.x+n,r.y+4),a.lineTo(r.x+n,r.y+o/2),a.strokeStyle="#444",a.stroke(),a.closePath(),a.beginPath(),a.moveTo(r.x+n,r.y+o/2),a.lineTo(r.x+n,r.y+o),a.strokeStyle="#444",a.stroke(),a.closePath(),a.beginPath(),a.arc(r.x+n,r.y,3,0,2*Math.PI),a.strokeStyle="#000",a.stroke(),a.closePath(),a.beginPath(),a.arc(r.x+n,r.y,2,0,2*Math.PI),a.fillStyle="#3efe0b",a.fill(),a.closePath(),a.beginPath(),a.arc(r.x+n,r.y+o,3,0,2*Math.PI),a.strokeStyle="#000",a.stroke(),a.closePath(),a.beginPath(),a.arc(r.x+n,r.y+o,2,0,2*Math.PI),a.fillStyle="#3efe0b",a.fill(),a.closePath(),a.beginPath(),a.arc(r.x,r.y+o,3,0,2*Math.PI),a.strokeStyle="#000",a.stroke(),a.closePath(),a.beginPath(),a.arc(r.x,r.y+o,2,0,2*Math.PI),a.fillStyle="#3efe0b",a.fill(),a.closePath(),a.beginPath(),a.arc(r.x+n/2,r.y,3,0,2*Math.PI),a.strokeStyle="#000",a.stroke(),a.closePath(),a.beginPath(),a.arc(r.x+n/2,r.y,2,0,2*Math.PI),a.fillStyle="#3efe0b",a.fill(),a.closePath(),a.beginPath(),a.arc(r.x+n/2,r.y+o,3,0,2*Math.PI),a.strokeStyle="#000",a.stroke(),a.closePath(),a.beginPath(),a.arc(r.x+n/2,r.y+o,2,0,2*Math.PI),a.fillStyle="#3efe0b",a.fill(),a.closePath(),a.beginPath(),a.arc(r.x,r.y+o/2,3,0,2*Math.PI),a.strokeStyle="#000",a.stroke(),a.closePath(),a.beginPath(),a.arc(r.x,r.y+o/2,2,0,2*Math.PI),a.fillStyle="#3efe0b",a.fill(),a.closePath(),a.beginPath(),a.arc(r.x+n,r.y+o/2,3,0,2*Math.PI),a.strokeStyle="#000",a.stroke(),a.closePath(),a.beginPath(),a.arc(r.x+n,r.y+o/2,2,0,2*Math.PI),a.fillStyle="#3efe0b",a.fill(),a.closePath()},i.prototype.getCenterPosition=function(){var t=this.props;return{x:t.x,y:t.y}},i.prototype.getLeftTopPosition=function(){var t=this.props,e=t.x,a=t.y,i=t.width,n=t.height;return e-=i/2,a-=n/2,{x:e,y:a}},i.prototype.getTopCenterPosition=function(){var t=this.props,e=t.x,a=t.y;t.width;return a-=t.height/2,{x:e,y:a}},i.prototype.getLeftCenterPosition=function(){var t=this.props,e=t.x,a=t.y,i=t.width;t.height;return e-=i/2,{x:e,y:a}},i.prototype.getLeftBottomPosition=function(){var t=this.props,e=t.x,a=t.y,i=t.width,n=t.height;return e-=i/2,a+=n/2,{x:e,y:a}},i.prototype.getBottomCenterPosition=function(){var t=this.props,e=t.x,a=t.y;t.width;return a+=t.height/2,{x:e,y:a}},i.prototype.getRightTopPosition=function(){var t=this.props,e=t.x,a=t.y,i=t.width,n=t.height;return e+=i/2,a-=n/2,{x:e,y:a}},i.prototype.getRightBottomPosition=function(){var t=this.props,e=t.x,a=t.y,i=t.width,n=t.height;return e+=i/2,a+=n/2,{x:e,y:a}},i.prototype.getRightCenterPosition=function(){var t=this.props,e=t.x,a=t.y,i=t.width;t.height;return e+=i/2,{x:e,y:a}},i.prototype.inScalePosition=function(e,a){if(!this.hasPosition(e,a))return!1;var i=this.getLeftTopPosition(),n=this.getTopCenterPosition(),o=this.getLeftCenterPosition(),r=this.getLeftBottomPosition(),s=this.getBottomCenterPosition(),l=this.getRightTopPosition(),c=this.getRightCenterPosition(),u=this.getRightBottomPosition();return t.inRange(e,i.x,6)&&t.inRange(a,i.y,6)?(v="leftTop",d="stationLeftTopScale",!0):t.inRange(e,o.x,6)&&t.inRange(a,o.y,6)?(v="leftCenter",d="stationLeftCenterScale",!0):t.inRange(e,r.x,6)&&t.inRange(a,r.y,6)?(v="leftBottom",d="stationLeftBottomScale",!0):t.inRange(e,n.x,6)&&t.inRange(a,n.y,6)?(v="topCenter",d="stationTopCenterScale",!0):t.inRange(e,s.x,6)&&t.inRange(a,s.y,6)?(v="bottomCenter",d="stationBottomCenterScale",!0):t.inRange(e,l.x,6)&&t.inRange(a,l.y,6)?(v="rightTop",d="stationRightTopScale",!0):t.inRange(e,c.x,6)&&t.inRange(a,c.y,6)?(v="rightCenter",d="stationRightCenterScale",!0):!(!t.inRange(e,u.x,6)||!t.inRange(a,u.y,6))&&(v="rightBottom",d="stationRightBottomScale",!0)},i.prototype.opration=function(){var t=r()({},S.move),e=r()({},S.down);switch(v){case"leftTop":var a=this.getStashProps(),i=Math.sqrt(Math.pow(t.x-e.x,2),Math.pow(t.y-e.y,2));i=t.y-e.y>0?-i:i;var n=this.getProps();n.width=a.width+i,n.height=a.height+i,n.drag=!0,this.componentWillReceiveProps(n);break;case"leftCenter":var a=this.getStashProps(),i=-(t.x-e.x),n=this.getProps();n.width=a.width+i,n.height=a.height,n.width>g.station.minWidth&&(n.x=a.x-i/2),n.drag=!0,this.componentWillReceiveProps(n);break;case"leftBottom":var a=this.getStashProps(),i=Math.sqrt(Math.pow(t.x-e.x,2),Math.pow(t.y-e.y,2));i=t.y-e.y>0?i:-i;var n=this.getProps();n.width=a.width+i,n.height=a.height+i,n.drag=!0,this.componentWillReceiveProps(n);break;case"rightTop":var a=this.getStashProps(),i=Math.sqrt(Math.pow(t.x-e.x,2),Math.pow(t.y-e.y,2));i=t.y-e.y>0?-i:i;var n=this.getProps();n.width=a.width+i,n.height=a.height+i,n.drag=!0,this.componentWillReceiveProps(n);break;case"rightCenter":var a=this.getStashProps(),i=t.x-e.x,n=this.getProps();n.width=a.width+i,n.height=a.height,n.width>=g.station.minWidth&&(n.x=a.x+i/2),n.drag=!0,this.componentWillReceiveProps(n);break;case"rightBottom":var a=this.getStashProps(),i=Math.sqrt(Math.pow(t.x-e.x,2),Math.pow(t.x-e.x,2));i=t.y-e.y>0?i:-i;var n=this.getProps();n.width=a.width+i,n.height=a.height+i,n.drag=!0,this.componentWillReceiveProps(n);break;case"topCenter":var a=this.getStashProps(),i=-(t.y-e.y),n=this.getProps();n.width=n.width,n.height=a.height+i,n.height>=g.station.minHeight&&(n.y=a.y-i/2),n.drag=!0,this.componentWillReceiveProps(n);break;case"bottomCenter":var a=this.getStashProps(),i=t.y-e.y,n=this.getProps();n.width=n.width,n.height=a.height+i,n.height>=g.station.minHeight&&(n.y=a.y+i/2),n.drag=!0,this.componentWillReceiveProps(n)}},i.prototype.hasPosition=function(t,e){var a=this.props,i=a.width,n=a.height,o=this.getLeftTopPosition(),r=o.x,s=r+i,l=o.y,c=l+n;return t>=r&&t<=s&&e>=l&&e<=c},new i(e)};D.inRange=function(t,e,a){e=Math.ceil(Number(e)),a=Math.ceil(Number(a));var i=Math.min(e-a,e+a),n=Math.max(e-a,e+a);return t>=i&&t<=n};var w=function t(e,n){var p=function(t,e){g.db.reset(),m=[],this.isComponentDidMout=!1,this.readyCallback=function(){},i=document.getElementById(t),s=i.clientWidth,l=i.clientHeight,e.hasOwnProperty("stationToSame")&&(g.station.isToSameSize=e.stationToSame),e.hasOwnProperty("backgroundImageUrl")&&g.db.setImageUrl(e.backgroundImageUrl),e.hasOwnProperty("isMode")&&(g.isMode=e.isMode),this.initializeModeConfigs(),e.hasOwnProperty("station")&&(g.station=r()({},g.station,e.station)),e.hasOwnProperty("translateX")&&(g.map.translateX=e.translateX),e.hasOwnProperty("translateY")&&(g.map.translateY=e.translateY),e.hasOwnProperty("map")&&(g.map=r()({},g.map,e.map)),e.hasOwnProperty("stationStatus")&&(g.stationStatus=r()({},g.stationStatus,e.stationStatus)),e.hasOwnProperty("plugin")&&(g.plugin=r()({},g.plugin,e.plugin)),o=document.createElement("canvas"),o.width=s,o.height=l,i.appendChild(o),a=o.getContext("2d"),e.stations.map(function(t,e){var a=r()({},t);a.x=Number(a.x),a.y=Number(a.y),a.width=Number(a.width),a.height=Number(a.height),m.push(D(a))}),g.rulers.map(function(t,e){var a=r()({},t);a.x=Number(a.x),a.y=Number(a.y),f.push(b(a))}),this.loadImage()};return p.prototype.initializeModeConfigs=function(){var t=g.operationTypeConfigs,e=g.utils;e.isViewMode()&&(g.map.deleteEnable=!1,g.map.scaleEnable=!0,g.map.mouseEnable=!1,g.map.rulerEnable=!1,g.map.stationClick=!1,t.stationHover.style="auto"),e.isSelectMode()&&(g.map.deleteEnable=!1,g.map.scaleEnable=!0,g.map.mouseEnable=!1,g.map.rulerEnable=!1),g.operationTypeConfigs=r()({},t)},p.prototype.mapMenu={element:null,create:function(t){if(void 0===c){c=document.createElement("div");document.querySelectorAll('[data-type="left"]');c.style.position="absolute",c.style.width="100px",c.style.height="100px",c.style.right="10px",c.style.top="10px",c.style.border="1px solid red",c.style.zIndex=8,c.innerHTML='<div>\n                        <span data-type="left">左</span>\n                        <span data-type="up">上</span>\n                        <span data-type="right">右</span>\n                        <span data-type="down">下</span>\n                    </div>';var e=null;c.addEventListener("mousedown",function(a){var i=a.target,n=i.getAttribute("data-type");e=window.setInterval(function(){switch(n){case"up":t.operationToTranslateUp();break;case"right":t.operationToTranslateRight();break;case"down":t.operationToTranslateDown();break;case"left":t.operationToTranslateLeft()}},200)}),c.addEventListener("mouseup",function(t){window.clearInterval(e)}),i.appendChild(c)}c.style.display="block"}},p.prototype.loadImage=function(t){var e=this;t=t||g.db.getImageUrl(),t||(g.map.isLoadImageError=!0),g.map.isLoadImageError=!1,h=new Image,h.src=t,h.onerror=function(){g.plugin.onErrorCallback&&g.plugin.onErrorCallback("图片加载错误"),g.map.isLoadImageError=!0,e.render()},h.onload=function(){e.render()}},p.prototype.componentDidMount=function(){var t=g.plugin.readyCallback;this.isComponentDidMout=!0,this.registerEvents(),t&&t()},p.prototype.setMouseStyle=function(){if(void 0!==d){var t=g.operationTypeConfigs,e=t[d];i.style.cursor=e.style}},p.prototype.clear=function(){o.width=s},p.prototype.drawMouserPosition=function(){if(g.map.mouseEnable){var e=S.move,i=t.transformPositionToView(e.x,e.y),n=i.x,o=i.y;a.beginPath(),a.moveTo(n,0),a.strokeStyle="red",a.lineTo(n,l),a.closePath(),a.stroke(),a.beginPath(),a.moveTo(0,o),a.strokeStyle="red",a.lineTo(s,o),a.closePath(),a.stroke()}},p.prototype.operationToTranslateLeft=function(){g.map.translateX-=50,this.render()},p.prototype.operationToTranslateRight=function(){g.map.translateX+=50,this.render()},p.prototype.operationToTranslateUp=function(){g.map.translateY-=50,this.render()},p.prototype.operationToTranslateDown=function(){g.map.translateY+=50,this.render()},p.prototype.render=function(){var t=g.map.menuEnable;if(this.clear(),this.calcMaxMin(),this.drawImage(),this.drawStations(),this.drawRulers(),this.setMouseStyle(),this.drawMouserPosition(),t&&this.mapMenu.create(this),!this.isComponentDidMout)return void this.componentDidMount();var e=g.plugin.onRenderMapCallback;e&&e(o.toDataURL("image/jpeg"))},p.prototype.onRenderMap=function(t){g.plugin.onRenderMapCallback=t},p.prototype.onScaleMap=function(t){g.plugin.onScaleMapCallback=t},p.prototype.onCheckedStation=function(t){g.plugin.onCheckedStationCallback=t},p.prototype.onHoverInStation=function(t){g.plugin.onHoverInStationCallback=t},p.prototype.onHoverOutStation=function(t){g.plugin.onHoverOutStationCallback=t},p.prototype.onError=function(t){g.plugin.onErrorCallback=t},p.prototype.drawRulers=function(){if(f.length)return void f.map(function(t){t.render()})},p.prototype.drawStations=function(){if(m.length)return this.sortStation(),void m.map(function(t){t.isRemove()||t.render()})},p.prototype.cleanStationDragStyle=function(){this.getDragStations().map(function(t){t.setProps({drag:!1})}),this.render()},p.prototype.savePropsToStash=function(){var t=g.map,e=t.translateX,a=t.translateY,i=t.scale;this.stashProps={translateX:e,translateY:a,scale:i}},p.prototype.getStashProps=function(){return r()({},this.stashProps)},p.prototype.scaleMap=function(t){this.savePropsToStash();var e=g.map,a=e.scaleSpeed,i=e.scaleMax,n=e.scaleMin,o=g.plugin.onScaleMapCallback;t>0?g.map.scale+=a:g.map.scale-=a,g.map.scale>i&&(g.map.scale=i,g.map.scale=i),g.map.scale<=n&&(g.map.scale=n);this.getStashProps();o&&o(Math.abs(g.map.scale)),this.render()},p.prototype.registerEvents=function(){var e=this,a=g.map.scaleEnable,i=function(a){t.setMovePosition(a),e.drawRulerMove()},n=function(a){t.setMovePosition(a),e.drawRulerMove()},r=function(t){t.preventDefault();var a=t.deltaY;return e.scaleMap(a),!1},s=function(a){t.setMovePosition(a),e.drawScaleStationMove(),o.addEventListener("mouseup",l,!1)},l=function(e){t.setUpPosition(e),o.removeEventListener("mousemove",s,!1)},c=function(a){t.setMovePosition(a),e.drawDragStationMove(),o.addEventListener("mouseup",h,!1)},h=function a(i){t.setUpPosition(i),e.endDragStation(),o.removeEventListener("mouseup",a,!1),o.removeEventListener("mousemove",c,!1)},m=function(a){t.setMovePosition(a),u.push(S.move);var i=u[0],n=u[u.length-1];(Math.abs(i.x-n.x)>=1||Math.abs(i.y-n.y)>=1)&&e.dragMap(),o.addEventListener("mouseup",f,!1)},f=function e(a){t.setUpPosition(a),o.removeEventListener("mouseup",e,!1),o.removeEventListener("mousemove",m,!1),u=[]},v=function(e){t.setDownPosition(e),g.map.contextMenuEnable&&(p.contextMenu.create(),e.preventDefault())},y=function(a){if(t.setDownPosition(a),!g.map.stationClick)return void o.addEventListener("mousemove",m,!1);var r=S.down;if(2===a.button)return document.addEventListener("contextmenu",v,!1),!1;if(e.isInStation(r.x,r.y)){if(g.utils.isSelectMode())return void e.setCheckedStationStyle(r.x,r.y);e.setDragStationStyle(r.x,r.y),e.startDragStation(),e.isInStationDragPosition(r.x,r.y)?o.addEventListener("mousemove",s,!1):o.addEventListener("mousemove",c,!1)}else e.isInRuler(r.x,r.y)?(e.setCheckedRulerStyle(r.x,r.y),o.addEventListener("mousemove",n,!1)):e.isInCanvasTopLine(r.x,r.y)?(e.newRulerInCanvasTop(r.x,r.y),o.addEventListener("mousemove",i,!1)):e.isInCanvasLeftLine(r.x,r.y)?(e.newRulerInCanvasLeft(r.x,r.y),o.addEventListener("mousemove",i,!1)):(e.cleanStationDragStyle(),o.removeEventListener("mousemove",s,!1),o.removeEventListener("mousemove",c,!1),o.addEventListener("mousemove",m,!1));o.addEventListener("mouseup",b,!1),o.removeEventListener("mousemove",D,!1)},b=function t(e){o.removeEventListener("mousemove",n,!1),o.removeEventListener("mousemove",i,!1),o.removeEventListener("mousemove",s,!1),o.removeEventListener("mousemove",l,!1),o.removeEventListener("mousemove",c,!1),o.removeEventListener("mousemove",h,!1),o.removeEventListener("mousemove",m,!1),o.removeEventListener("mousemove",f,!1),o.removeEventListener("mouseup",t,!1),o.addEventListener("mousemove",D,!1),p.contextMenu.close()},D=function(a){t.setMovePosition(a);var i=S.move;e.judgeHoverInStation(i.x,i.y),e.isInStation(i.x,i.y)?e.isInStationDragPosition(i.x,i.y)||(d="stationHover"):d=e.isInRuler(i.x,i.y)?"rulerHover":e.isInCanvasTopLine(i.x,i.y)?"canvasTopLineHover":e.isInCanvasLeftLine(i.x,i.y)?"canvasLeftLineHover":"mapHover",e.render()},w=function(t){switch(t.keyCode){case 8:case 46:e.removeCheckedStation()}},x=function(t){o.addEventListener("mousemove",D,!1),document.addEventListener("keyup",w,!1),o.addEventListener("mouseleave",T,!1),a&&o.addEventListener("mousewheel",r,!1)},T=function(e){t.setDownPosition(e),o.removeEventListener("mousemove",c,!1),o.removeEventListener("mousemove",m,!1),o.removeEventListener("mousemove",s,!1),o.removeEventListener("mouseup",b,!1),document.removeEventListener("keyup",w,!1),document.removeEventListener("contextmenu",v,!1),o.removeEventListener("mousewheel",r,!1)};o.addEventListener("mousedown",y,!1),o.addEventListener("mouseover",x,!1),document.addEventListener("keyup",w,!1),a&&o.addEventListener("mousewheel",r,!1)},p.prototype.calcMaxMin=function(){g.map.scale>g.map.scaleMax&&(g.map.scale=g.map.scaleMax,g.map.scale=g.map.scaleMax),g.map.scale<=g.map.scaleMin&&(g.map.scale=g.map.scaleMin)},p.prototype.drawImage=function(){if(!g.map.isLoadImageError){var t=h;a.beginPath(),a.drawImage(t,g.map.translateX*g.map.scale,g.map.translateY*g.map.scale,t.width*g.map.scale,t.height*g.map.scale),a.closePath()}},p.prototype.isInStationDragPosition=function(t,e){var a=this.getDragStations(),i=!1;return a.map(function(a){a.inScalePosition(t,e)&&(i=!0)}),i},p.prototype.getDragStations=function(){var t=[],e=null;return m.map(function(a){e=a.getProps(),e.drag&&t.push(a)}),t},p.prototype.sortDescStationObjectArray=function(){m.sort(function(t,e){var a=t.getProps(),i=e.getProps();return parseInt(i.z)-parseInt(a.z)})},p.prototype.sortAscStationObjectArray=function(){m.sort(function(t,e){var a=t.getProps(),i=e.getProps();return parseInt(a.z)-parseInt(i.z)})},p.prototype.setCheckedRulerStyle=function(t,e){for(var a=null,i=0,n=f.length;i<n;i++)a=f[i],a.hasPosition(t,e)?(a.getProps(),a.toChecked()):a.setProps({checked:!1})},p.prototype.setCheckedStationStyle=function(t,e){if(!g.utils.isEditMode()){this.sortDescStationObjectArray();for(var a=null,i={},n=0,o=m.length;n<o;n++)if(a=m[n],a.hasPosition(t,e)){a.toChecked(),i=a.getProps();break}var r=g.plugin.onCheckedStationCallback,s=this.getCheckedAll();r&&r(i,s)}},p.prototype.setDragStationStyle=function(t,e){if(g.utils.isEditMode()){this.cleanDragStations(),this.sortDescStationObjectArray();for(var a=null,i=null,n=0,o=m.length;n<o;n++)if(a=m[n],a.hasPosition(t,e)){i=a.getProps(),i.drag||(i.drag=!0),i.z=g.z,a.componentWillReceiveProps(i);break}g.z++}},p.prototype.sortStation=function(){m.sort(function(t,e){var a=t.getProps(),i=e.getProps();return a.z-i.z})},p.prototype.isInCanvasLeftLine=function(e,a){return t.canvasToWindow(e,a).x<5},p.prototype.newRulerInCanvasTop=function(t,e){if(g.map.rulerEnable){f.map(function(t){t.setProps({checked:!1})});var a=r()({},{x:t,y:e,type:"horizontal",checked:!0});f.push(b(a))}},p.prototype.newRulerInCanvasLeft=function(t,e){if(g.map.rulerEnable){f.map(function(t){t.setProps({checked:!1})});var a=r()({},{x:t,y:e,type:"vertical",checked:!0});f.push(b(a))}},p.prototype.isInCanvasTopLine=function(e,a){return t.canvasToWindow(e,a).y<=8},p.prototype.isInCanvasTopLeft=function(e,a){return t.canvasToWindow(e,a).x<=8},p.prototype.isInRuler=function(t,e){for(var a=null,i=!1,n=0,o=f.length;n<o;n++)if(a=f[n],a.hasPosition(t,e)){i=!0;break}return i},p.prototype.isInStation=function(t,e){for(var a=null,i=!1,n=0,o=m.length;n<o;n++)if(a=m[n],a.hasPosition(t,e)){i=!0;break}return i},p.prototype.stationOtherHoverOut=function(t){for(var e=null,a=null,i=0,n=m.length;i<n;i++)a=m[i],e=a.getProps(),e.key!==t&&a.onHoverOut()},p.prototype.judgeHoverInStation=function(t,e){var a=(g.plugin.onHoverInStationCallback,this),i=null,n=null;this.sortDescStationObjectArray();for(var o=0,r=m.length;o<r;o++){if(i=m[o],n=i.getProps(),i.hasPosition(t,e)){a.stationOtherHoverOut(n.key),i.onHoverIn();break}i.onHoverOut()}},p.prototype.dragMap=function(){var t=u[0],e=u[u.length-1],a=e.x-t.x,i=e.y-t.y,n=Math.abs(a),o=Math.abs(i);Math.max(n,o)<10||(g.map.translateX+=3*(e.x-t.x),g.map.translateY+=3*(e.y-t.y),this.render(),u=[])},p.prototype.startDragStation=function(){this.getDragStations().map(function(t){t.saveProps()})},p.prototype.moveDragStation=function(){},p.prototype.endDragStation=function(){},p.prototype.removeStation=function(){},p.prototype.removeCheckedStation=function(){if(g.map.deleteEnable){var t=this.getDragStations();if(t.length){var e,a=[];t.map(function(t){e=t.getProps(),t.remove(),a.push(e)});var i=[];m=m.filter(function(t){var e=!t.isRemove();return e&&i.push(t.getProps()),e}),this.render(),g.plugin.onRemoveCallback&&g.plugin.onRemoveCallback(a,i)}}},p.prototype.cleanDragStations=function(){var t=this.getDragStations();t=t.filter(function(t){return!t.removed}),this.render()},p.prototype.drawDragStationMove=function(){var t=g.utils,e=this;if(t.isEditMode()){var a=this.getDragStations();m.map(function(t){t.setProps({drag:!1})});var i=S.move.x-S.down.x,n=S.move.y-S.down.y,o={},r=null,s=!1,l={};a.map(function(t,a){r=t.getStashProps(),o.x=r.x+i,o.y=r.y+n;var c=e.getAdsorbPosition(o.x-r.width/2,o.y-r.height/2);if(l.x=c.x+r.width/2,l.y=c.y+r.height/2,o.x===l.x&&o.y===l.y||(s=!0),o.x=l.x,o.y=l.y,t.move(o.x,o.y),c=e.getAdsorbPosition(o.x+r.width/2,o.y+r.height/2),l.x=c.x-r.width/2,l.y=c.y-r.height/2,!s)return o.x=l.x,o.y=l.y,void t.move(o.x,o.y);var d={},u=l.x-o.x,p=l.y-o.y;d.x=o.x+u/2,d.y=o.y+p/2,d.width=r.width+u/2,d.height=r.height+p/2,t.setProps(d)}),this.render()}},p.prototype.getDragRuler=function(){var t=[];return f.map(function(e){e.getProps().checked&&t.push(e)}),t},p.prototype.drawRulerMove=function(){var t=S.move;this.getDragRuler().map(function(e){e.move(t.x,t.y)}),this.render()},p.prototype.drawScaleStationMove=function(){if(g.utils.isEditMode()){var t=(S.move,this.getDragStations());t.map(function(t,e){t.opration(v)});var e=t[0],a=e.getProps();e.isStation()&&(g.station.width=a.width,g.station.height=a.height),this.stationToSameAction(),this.render()}},p.prototype.ready=function(t){g.plugin.readyCallback=t},p.prototype.getCanvasElement=function(){return o},p.prototype.save=function(t){var e={};e.translateX=g.map.translateX,e.translateY=g.map.translateY,e.scale=g.map.scale,e.stations=g.db.getAllStation(),t&&t(e)},p.prototype.destory=function(){m=[],h=null,g.map.scale=1,g.map.translateX=0,g.map.translateY=0,g.db.reset(),i.removeChild(o)},p.prototype.getAdsorbPosition=function(t,e){return f.map(function(a){var i=a.getProps();a.isHorizontalLine()?i.y-20<e&&e<i.y+20&&(e=i.y):a.isVerticalLine()&&i.x-20<t&&t<i.x+20&&(t=i.x)}),{x:t,y:e}},p.prototype.getStationLeftTopPosition=function(){},p.prototype.createStation=function(t){var e=(this.getDragStations(),g.station),a=e.width,i=e.height,n=e.isToSameSize;if(t){g.z++,n&&"STATION"===t.type&&(t.width=a,t.height=i),t.z=g.z;var o=this.getAdsorbPosition(t.x-t.width/2,t.y-t.height/2);t.x=o.x+t.width/2,t.y=o.y+t.height/2;var r=D(t);m.push(r)}},p.prototype.getCheckedAll=function(){var t=[],e={};return m.map(function(a){e=a.getProps(),e.checked&&t.push(e)}),t},p.prototype.setBackgroundImage=function(t){var e=this;g.map.scale=1,g.map.translateX=0,g.map.translateY=0;var a=new FileReader;a.onloadend=function(){e.loadImage(a.result)},a.readAsDataURL(t)},p.prototype.stationToSameAction=function(){this.getDragStations();if(g.station.isToSameSize){var t=g.station,e=t.width,a=t.height;m.map(function(t){t.getProps();t.isStation()&&t.setProps({width:e,height:a})})}},p.prototype.onRemove=function(t){g.plugin.onRemoveCallback=t},p.prototype.setStationToSame=function(t,e){g.station.isToSameSize=t,this.stationToSameAction(),this.render()},p.prototype.setScale=function(t){g.map.scale=t,this.render()},p.contextMenu={create:function(){var e=S.down,a=t.canvasToWindow(e.x,e.y),n=a.x,o=a.y;void 0===y&&(y=document.createElement("div"),y.id="contextMenu",y.className="m-context-menu",y.innerHTML='<ul class="right-menu"><li>加载</li><li>关闭</li></ul>',i.appendChild(y)),y.style.left=n+"px",y.style.top=o+"px",y.style.display="block"},close:function(){void 0!==y&&(y.style.display="none")}},new p(e,n)};w.setUpPosition=function(t){S.up=w.windowToCanvas(t)},w.setDownPosition=function(t){S.down=w.windowToCanvas(t)},w.setMovePosition=function(t){S.move=w.windowToCanvas(t)},w.windowToCanvas=function(t){var e={x:0,y:0},a={};a=o.getBoundingClientRect();var i=t.clientX,n=t.clientY;return e.x=i-a.left*(s/a.width),e.y=n-a.top*(l/a.height),e.x=e.x<0?Math.ceil(e.x):Math.floor(e.x),e.y=e.y<0?Math.ceil(e.y):Math.floor(e.y),w.transformPositionToOrigin(e.x,e.y)},w.canvasToWindow=function(t,e){var a={x:0,y:0},i={};i=o.getBoundingClientRect();var n=t,r=e;return a.x=n+i.left/(s*i.width),a.y=r+i.top/(l*i.height),a.x=a.x<0?Math.ceil(a.x):Math.floor(a.x),a.y=a.y<0?Math.ceil(a.y):Math.floor(a.y),w.transformPositionToView(a.x,a.y)},w.transformWidthOrHeightToView=function(t,e){var a=g.map.scale;return{width:Number(t)*a,height:Number(e)*a}},w.transformWidthOrHeightToOrigin=function(t,e){var a=g.map.scale;return{width:Number(t)/a,height:Number(e)/a}},w.transformPositionToView=function(t,e){var a=g.map,i=a.translateX,n=a.translateY,o=a.scale;return{x:(Number(t)+Number(i))*o,y:(Number(e)+Number(n))*o}},w.transformPositionToOrigin=function(t,e){var a=g.map,i=a.translateX,n=a.translateY,o=a.scale;return{x:Number(t)/o-Number(i),y:Number(e)/o-Number(n)}};var x=w(t,e);return{ready:function(){x.ready.apply(x,arguments)},change:function(){},setScale:function(){x.setScale.apply(x,arguments)},onError:function(){x.onError.apply(x,arguments)},setStationToSame:function(){x.setStationToSame.apply(x,arguments)},save:function(){x.save.apply(x,arguments)},destory:function(){x.destory.apply(x,arguments)},setBackgroundImage:function(){x.setBackgroundImage.apply(x,arguments)},getCheckedAll:function(){x.getCheckedAll.apply(x,arguments)},onRemove:function(){x.onRemove.apply(x,arguments)},onScaleMap:function(){x.onScaleMap.apply(x,arguments)},onCheckedStation:function(){x.onCheckedStation.apply(x,arguments)},onHoverInStation:function(){x.onHoverInStation.apply(x,arguments)},onHoverOutStation:function(){x.onHoverOutStation.apply(x,arguments)},onRenderMap:function(){x.onRenderMap.apply(x,arguments)},createStation:function(){var t=x.getCanvasElement(),e=t.getBoundingClientRect(),a=r()({},arguments[0]);a.x=Number(a.x)-Number(e.left),a.y=Number(a.y)-Number(e.top);var i=w.transformPositionToOrigin(a.x,a.y);a.x=i.x,a.y=i.y,x.createStation(a)}}};e.a=s},"SP/+":function(t,e,a){"use strict";function i(t){a("dhjp")}var n=a("Kozl"),o=a("61ld"),r=a("VU/8"),s=i,l=r(n.a,o.a,!1,s,null,null);e.a=l.exports},SdYl:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.data.indexOf(t.checkAction)>-1?a("div",{staticClass:"v-button",staticStyle:{display:"inline-block"}},[a("Button",{style:t.styles,attrs:{type:t.type},on:{click:t.buttonClick}},[t._v(t._s(t.label))])],1):t._e()},n=[],o={render:i,staticRenderFns:n};e.a=o},"Ta+G":function(t,e,a){"use strict";function i(t){var e=t.type;return"DOMMouseScroll"!=e&&"mousewheel"!=e||(t.delta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3),t.srcElement&&!t.target&&(t.target=t.srcElement),t.preventDefault||void 0===t.returnValue||(t.preventDefault=function(){t.returnValue=!1}),t}var n=function(t,e,a,n){console.log("-------"),window.addEventListener?("mousewheel"===e&&void 0!==document.mozFullScreen&&(e="DOMMouseScroll"),t.addEventListener(e,function(t){a(i(t))},n||!1)):window.attachEvent&&t.attachEvent("on"+e,function(t){t=t||window.event,a(i(t))})};e.a=n},Ucgj:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,'.section-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:25px;position:relative}.section-title[data-v-872aada8]:before{height:24px;border:2px solid #499df1;position:absolute;width:0;content:"";display:inline-block;top:12px;left:0}.section-detail-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:15px;position:relative}',""])},XvJJ:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".com-select-customers ::-webkit-input-placeholder{color:#666}.com-select-customers ::-moz-placeholder{color:#666}.com-select-customers :-ms-input-placeholder{color:#666}.com-select-customers input:-moz-placeholder{color:#666}",""])},bsze:function(t,e,a){"use strict";function i(t){var e=["角","分"],a=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],i=[["元","万","亿"],["","拾","佰","仟"]],n=t<0?"负":"";t=Math.abs(t);var o="",r=(t+"").split(".").length,s="00";r>1&&(s=(t+"").split(".")[1]);for(var l=0;l<e.length;l++)a[s[l]]&&(o+=(a[s[l]]+e[l]).replace(/零./,""));o=o||"整",t=Math.floor(t);for(var l=0;l<i[0].length&&t>0;l++){for(var c="",d=0;d<i[1].length&&t>0;d++)c=a[t%10]+i[1][d]+c,t=Math.floor(t/10);o=c.replace(/(零.)*零$/,"").replace(/^$/,"零")+i[0][l]+o}return n+o.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")}function n(t){for(var e in t)t[e]=""}function o(t,e){var a=[];for(var i in t)t.hasOwnProperty(i)&&a.push(i+"="+t[i]);var e=e+"?"+a.join("&");window.location.href=e}function r(){var t=location.search,e=new Object;if(-1!=t.indexOf("?"))for(var a=t.substr(1),i=a.split("&"),n=0;n<i.length;n++)e[i[n].split("=")[0]]=unescape(i[n].split("=")[1]);return e}function s(t){var e=window.location.href,a=e.split("?")[0],i=[];for(var n in t)t.hasOwnProperty(n)&&i.push(n+"="+t[n]);a=a+"?"+i.join("&"),location.href=a}function l(t){for(var e,a=0,i={},n=[];e=t[a++];){var o=e.id;i[o]||(i[o]=!0,n.push(e))}return n}function c(t,e,a,i){for(var n=0;n<e.length;n++)for(var o=0;o<t.length;o++){var r=a?t[o][a]:t[o],s=i?e[n][i]:e[n];r==s&&t.splice(o,1)}return t}function d(t,e){var a=document.createElement("a");a.href=t,a.download=e,console.log("a--",a,t,e),a.click()}function u(t,e){var a=document.createElement("a");a.href=t,a.target="_blank",a.download=e,a.click()}function p(t,e){return e=parseInt(e,10),new Date(t,e,0).getDate()}function h(t,e){var a,i,n;return a=t.split("-"),i=new Date(a[1]+"/"+a[2]+"/"+a[0]),a=e.split("-"),n=new Date(a[1]+"/"+a[2]+"/"+a[0]),parseInt(Math.abs(i-n)/1e3/60/60/24)}function m(t,e,a){return void 0===a?w()(t,e,!1):w()(t,a,!1!==e)}function f(t,e){var a=new Date(t),i=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e);a.getFullYear(),a.getMonth(),a.getDate();return i.getFullYear()+"-"+(i.getMonth()+1)+"-"+i.getDate()}function g(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div"),a=e.style;a.position="absolute",a.top=0,a.left=0,a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",e.appendChild(t),document.body.appendChild(e);var i=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;return i===n&&(n=e.clientWidth),document.body.removeChild(e),i-n}function v(t,e){var a,i,n;return a=t.split("-"),i=new Date(a[1]+"/"+a[2]+"/"+a[0]),a=e.split("-"),n=new Date(a[1]+"/"+a[2]+"/"+a[0]),parseInt(Math.abs(i-n)/1e3/60/60/24)}var y=a("syeK"),S=a("Ta+G"),b=a("Asao"),D=a("IoNu"),w=a.n(D),x=a("Eqh0"),T=a("9pIO");e.a={smalltoBIG:i,clearForm:n,commonExport:o,getRequest:r,addParams:s,arrayNoRepeat:l,arrayCompare:c,thousand:y.a,downFile:d,addEvent:S.a,dataType:b.a,getDaysInOneMonth:p,dateDiff:h,debounce:m,getScrollBarSize:g,dateCompatible:x.a,tableSort:T.a,dateRange:f,downImg:u,timeRange:v}},cUWu:function(t,e,a){var i=a("sBgt");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("3bd2235c",i,!0,{sourceMap:!1})},dhjp:function(t,e,a){var i=a("A7Ww");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("6397b5a0",i,!0,{sourceMap:!1})},e0mU:function(t,e,a){"use strict";var i=a("9Jg8");e.a={props:{onchange:Function,value:String,disabled:Boolean,labelInValue:{default:!1,type:Boolean},url:{type:String,default:"get-customer"}},data:function(){return{customer:"",loading1:!1,customerOptions:[]}},mounted:function(){this.remoteCustomer()},methods:{changeContent:function(t){this.onchange(t)},remoteCustomer:function(t){var e=this;this.loading1=!0,setTimeout(function(){e.getCusomerList(t)},200)},getCusomerList:function(t){var e={company:t||""},a=[],n=this;return i.a.get(this.url,e,function(t){a=t.data.customerList,a.map(function(t){var e=t;return e.label=t.company,e.value=t.id+"",e}),n.loading1=!1,n.customerOptions=a},function(t){console.log("error---\x3e",t)}),a}}}},oNwR:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".plan-map-content{width:100%}",""])},p1B2:function(t,e,a){"use strict";function i(t){a("51Ub")}var n=a("4XX8"),o=a("Ds1f"),r=a("VU/8"),s=i,l=r(n.a,o.a,!1,s,null,null);e.a=l.exports},pY0k:function(t,e,a){var i=a("Ucgj");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("f811f5dc",i,!0,{sourceMap:!1})},qehU:function(t,e,a){"use strict";function i(t){a("JnUb")}var n=a("e0mU"),o=a("+H/r"),r=a("VU/8"),s=i,l=r(n.a,o.a,!1,s,null,null);e.a=l.exports},sBgt:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,'.create-order{padding:30px 40px}.create-order .buttons{text-align:center;margin:10px auto 30px}.create-order .col{width:49%;display:inline-block;vertical-align:top;padding-right:1%}.create-order .between{display:inline-block;width:20px}.create-order .ivu-card-head{background-color:#f7f7f7}.create-order .error{color:red}.create-order .header,.create-order .station-table{width:100%;height:40px;display:-webkit-box;display:-ms-flexbox;display:flex;line-height:40px;background-color:#f8f8f9;border:1px solid #e9eaec}.create-order .header .select,.create-order .station-table .select{width:60px;display:inline-block;text-align:center}.create-order .header .header-name,.create-order .station-table .header-name{display:inline-block;word-wrap:normal;font-size:12px;vertical-align:middle;white-space:nowrap;-webkit-box-flex:1;-ms-flex:1;flex:1;overflow:hidden;text-align:center;font-weight:700;color:#495060}.create-order .error .header-name{color:red}.create-order .station-table{background-color:#fff;border-top:none}.create-order .station-table .header-name{border-top:none;font-weight:300}.create-order .required-label{font-size:12px;position:relative;margin-left:5px;padding-left:4px}.create-order .required-label:before{content:"*";color:red;position:absolute;font-size:17px;font-weight:100;left:-5px;top:11px}.create-order .pay-error{color:#ed3f14;font-size:12px}.create-order .sale-tactics{text-align:right}.create-order .button-list{font-size:14px;color:#499df1;display:inline-block;border:1px solid #499df1;border-radius:4px;margin-right:5px;height:32px;line-height:32px;padding:0 14px;cursor:pointer;margin-bottom:6px}.create-order .active{background-color:#499df1;color:#fff}.create-order .title{font-weight:600;padding:10px 0}.vertical-center-modal{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.vertical-center-modal .ivu-modal{top:0}',""])},syeK:function(t,e,a){"use strict";function i(t){if(null===t||void 0===t)return 0;if(isNaN(t))return"NaN";var e=t.toString();if(/^-?\d+\.?\d+$/.test(e))if(/^-?\d+$/.test(e))e=e.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");else{var a=e.split("."),i=a[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");e=i+"."+a[1]}return e}e.a=i},tBD1:function(t,e,a){"use strict";e.a={props:{title:String,type:{default:"listTitle",type:String}},data:function(){return{classType:{listTitle:"section-title",detailTitle:"section-detail-title"}}}}},xPOr:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".g-replace-order-detail .reason{width:100%}.g-replace-order-detail .reason .ui-label{vertical-align:top;display:inline-block;width:75px}.g-replace-order-detail .reason .ui-text{display:inline-block;width:80%}.g-replace-order-detail .create-order{padding:30px}.g-replace-order-detail .space{display:inline-block;width:100%;height:20px}.g-replace-order-detail .buttons{text-align:center;margin:30px auto}.g-replace-order-detail .between{display:inline-block;width:20px}.g-replace-order-detail .card-header{display:inline-block;width:100%;height:10px}.g-replace-order-detail .ui-labeltext{padding-left:0}",""])}});
//# sourceMappingURL=replace.fa8a75bf400e2403d6e2.js.map