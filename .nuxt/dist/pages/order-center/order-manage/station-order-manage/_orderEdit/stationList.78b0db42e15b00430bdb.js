webpackJsonp([157],{Ck0U:function(t,e,i){"use strict";function s(t){i("xzmV")}Object.defineProperty(e,"__esModule",{value:!0});var n=i("nkM8"),l=i("rGM1"),a=i("VU/8"),c=s,o=a(n.a,l.a,!1,c,null,null);e.default=o.exports},nkM8:function(t,e,i){"use strict";var s=i("g4Hp");i.n(s);e.a={props:{label:{type:String,required:!0},stationList:{type:Array,required:!0}},data:function(){var t={},e={};return this.stationList.map(function(i,s){return t["seat"+s]=!1,i.value.map(function(t){t.begin=t.begin||t.endDate,e["seat"+s+t.name]=!1}),i}),console.log("this.stationList=======",this.stationList),{checkAll:t,selectSeat:e,selectionIndex:[]}},components:{},watch:{selectionIndex:function(){var t=[],e=[],i="";for(var s in this.selectSeat)this.selectSeat[s]&&(t.push(s.slice(5)),i=s.slice(4,5));this.stationList.map(function(s,n){i==n&&(e=s.value.filter(function(e,i){return-1!=t.indexOf(e.name)}),console.log("filter",e))}),this.$emit("on-station-change",e)}},created:function(){},methods:{checkAllSelect:function(){var t=!1;for(var e in this.checkAll)this.checkAll[e]&&(t=!0);return t},handleCheckAll:function(t){var e=this;if(this.checkAll["seat"+t])this.checkAll["seat"+t]=!1,this.clearAllCheck();else{var i=this.checkAllSelect();if(i)return this.$Notice.error({title:"工位原结束时间不同，不可同时进行续租"}),this.clearAllCheck(),!1;console.log("checkAllSelect",i),this.clearAllCheck(),this.checkAll["seat"+t]=!0}if(this.checkAll["seat"+t]){this.stationList[t].value.map(function(i){return e.selectionIndex.push(t),i.name}).map(function(i){e.selectSeat["seat"+t+i]=!0})}},clearAllCheck:function(){var t={},e={};this.stationList.map(function(i,s){t["seat"+s]=!1,i.value.map(function(t){e["seat"+s+t.name]=!1})}),this.checkAll=t,this.selectSeat=e,this.selectionIndex=[]},selectDiscount:function(t,e){if(this.selectSeat["seat"+t+e]){this.selectSeat["seat"+t+e]=!1;var i=[];for(var s in this.selectSeat)this.selectSeat[s]&&i.push(s.slice(4,5));if(this.selectionIndex=i,i.length){this.getDiffStation()}else this.clearAllCheck()}else{this.selectionIndex.push(t);if(!this.getDiffStation())return;this.selectSeat["seat"+t+e]=!0}},getDiffStation:function(){var t=this.selectionIndex[0],e=this.selectionIndex,i=e.join(",").split(t).length-1;return i!=e.length?(this.$Notice.error({title:"工位原结束时间不同，不可同时进行续租"}),this.clearAllCheck(),!1):(i==e.length&&this.stationList[t].value.length==e.length?this.checkAll["seat"+t]=!0:this.checkAll["seat"+t]=!1,!0)}}}},rGM1:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"station-list"},[i("div",{staticClass:"station-type"},[t._v(t._s(t.label))]),i("div",t._l(t.stationList,function(e,s){return i("div",{staticStyle:{"margin-bottom":"20px"}},[i("div",{key:s,staticStyle:{"border-bottom":"1px solid #e9e9e9","padding-bottom":"6px","margin-bottom":"6px"}},[i("Checkbox",{key:e.name,attrs:{value:t.checkAll["seat"+s]},on:{"on-change":t.selectDiscount},nativeOn:{click:function(e){e.preventDefault(),t.handleCheckAll(s)}}},[t._v("全选    租赁结束日期："+t._s(e.name))])],1),i("div",{staticClass:"checkbox-list"},t._l(e.value,function(e,n){return i("Checkbox",{key:e.name,attrs:{value:t.selectSeat["seat"+s+e.name]},nativeOn:{click:function(i){i.preventDefault(),t.selectDiscount(s,e.name)}}},[t._v(t._s(e.name))])}))])}))])},n=[],l={render:s,staticRenderFns:n};e.a=l},uII0:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,'.select-station-list{border:1px solid #e9eaec;padding:10px}.station-type{padding:10px 0;font-size:14px;position:relative;margin-left:5px}.station-type.station-type:before{content:"*";color:red;position:absolute;font-size:18px;left:-7px}.station-list{max-height:400px;overflow:auto}',""])},xzmV:function(t,e,i){var s=i("uII0");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("4e4b851e",s,!0,{sourceMap:!1})}});
//# sourceMappingURL=stationList.78b0db42e15b00430bdb.js.map