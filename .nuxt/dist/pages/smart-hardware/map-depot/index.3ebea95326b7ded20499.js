webpackJsonp([115,151],{"6c3l":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".g-create-map-depot .u-select{width:250px;margin:20px auto}",""])},"7dGq":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-map-depot"},[a("SectionTitle",{attrs:{title:"电视图库管理"}}),a("div",{staticClass:"u-search"},[a("Button",{attrs:{type:"primary"},on:{click:t.jumpCreate}},[t._v("新建图库")]),a("div",{staticClass:"u-select"},[a("span",{staticClass:"u-select-label"},[t._v("图库：")]),a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{"on-change":t.communityChange},model:{value:t.communityId,callback:function(e){t.communityId=e},expression:"communityId"}},t._l(t.communityList,function(e){return a("Option",{key:e.cmtId,attrs:{value:e.cmtId}},[t._v(t._s(e.cmtName))])}))],1)],1),a("div",{staticClass:"u-table"},[a("Table",{attrs:{border:"",columns:t.picColumns,data:t.tableList}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{current:t.page,total:t.totalCount,"page-size":t.pageSize,"show-total":"","show-elevator":""},on:{"on-change":t.changePage}})],1)])],1),a("Modal",{attrs:{title:"新建","ok-text":"确定","cancel-text":"取消",width:"400"},model:{value:t.openCreate,callback:function(e){t.openCreate=e},expression:"openCreate"}},[t.openCreate?a("CreatedMapDepot",{attrs:{itemDetail:t.communityList},on:{submitData:t.getCreateData}}):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.createSubmit}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.showCreate}},[t._v("取消")])],1)],1)],1)},n=[],o={render:i,staticRenderFns:n};e.a=o},F0k7:function(t,e,a){var i=a("6c3l");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("0831be08",i,!0,{sourceMap:!1})},FzUR:function(t,e,a){"use strict";function i(t){a("F0k7")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("U/Yl"),o=a("s3H9"),s=a("VU/8"),r=i,c=s(n.a,o.a,!1,r,null,null);e.default=c.exports},J0i4:function(t,e,a){"use strict";function i(t){a("pY0k")}var n=a("tBD1"),o=a("P67S"),s=a("VU/8"),r=i,c=s(n.a,o.a,!1,r,"data-v-872aada8",null);e.a=c.exports},P67S:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.classType[t.type]},[t._v("\n    "+t._s(t.title)+"\n")])},n=[],o={render:i,staticRenderFns:n};e.a=o},"U/Yl":function(t,e,a){"use strict";e.a={props:{itemDetail:Array},data:function(){return{communityId:""}},methods:{communityChange:function(){this.$emit("submitData",this.communityId)}}}},Ucgj:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,'.section-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:25px;position:relative}.section-title[data-v-872aada8]:before{height:24px;border:2px solid #499df1;position:absolute;width:0;content:"";display:inline-block;top:12px;left:0}.section-detail-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:15px;position:relative}',""])},Y5yE:function(t,e,a){"use strict";function i(t){a("hqpS")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("xqlf"),o=a("7dGq"),s=a("VU/8"),r=i,c=s(n.a,o.a,!1,r,null,null);e.default=c.exports},hqpS:function(t,e,a){var i=a("kxbD");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("20496732",i,!0,{sourceMap:!1})},kxbD:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".g-map-depot .u-search{height:32px;margin:16px 0;padding:0 20px}.g-map-depot .u-select{float:right;width:250px}.g-map-depot .u-select .u-select-label{padding-right:10px}.g-map-depot .u-table{padding:0 20px}.g-map-depot .ivu-table-cell{padding:0}",""])},pY0k:function(t,e,a){var i=a("Ucgj");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("f811f5dc",i,!0,{sourceMap:!1})},s3H9:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-create-map-depot"},[a("div",{staticClass:"u-select"},[a("span",[t._v("社区：")]),a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{"on-change":t.communityChange},model:{value:t.communityId,callback:function(e){t.communityId=e},expression:"communityId"}},t._l(t.itemDetail,function(e){return a("Option",{key:e.cmtId,attrs:{value:e.cmtId}},[t._v(t._s(e.cmtName))])}))],1)])},n=[],o={render:i,staticRenderFns:n};e.a=o},tBD1:function(t,e,a){"use strict";e.a={props:{title:String,type:{default:"listTitle",type:String}},data:function(){return{classType:{listTitle:"section-title",detailTitle:"section-detail-title"}}}}},xqlf:function(t,e,a){"use strict";var i=a("J0i4"),n=a("FzUR"),o=a("g4Hp"),s=a.n(o);e.a={components:{SectionTitle:i.a,CreatedMapDepot:n.default},data:function(){var t=this;return{page:1,pageSize:15,totalCount:0,tabParams:{page:1,pageSize:15},openCreate:!1,communityId:"",tableList:[],communityList:[],createData:"",picColumns:[{title:"图库名",key:"name",align:"center"},{title:"图片数量（张）",key:"imgCount",align:"center"},{title:"最后编辑时间",key:"lastEditTime",align:"center",render:function(t,e){if(e.row.lastEditTime){return s.a.dateToStr("YYYY-MM-DD HH:mm",new Date(e.row.lastEditTime))}}},{title:"最后编辑人",key:"lasEditUser",align:"center"},{title:"操作",key:"operation",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){t.jumpEdit(a.row)}}},"编辑")])}}]}},created:function(){},mounted:function(){this.getTableData(this.tabParams),this.getCommunityList()},methods:{showCreate:function(){this.openCreate=!this.openCreate},createSubmit:function(){var t=this,e={communityId:this.createData};if(""==this.createData)return void this.$Notice.error({title:"请选择社区"});this.$http.post("create-tv-ad-storage",e).then(function(e){t.$Notice.success({title:"新建图库成功"}),t.showCreate(),t.getTableData(t.tabParams)}).catch(function(e){t.$Notice.error({title:e.message})})},communityChange:function(){this.tabParams.page=1,this.tabParams.communityId=this.communityId,this.getTableData(this.tabParams)},jumpCreate:function(){this.showCreate()},jumpEdit:function(t){window.open("/smart-hardware/map-depot/edit/"+t.id,"_blank")},getTableData:function(t){var e=this;this.$http.get("get-tv-ad-storage-list",t).then(function(t){e.tableList=t.data.items,e.totalCount=t.data.totalCount}).catch(function(t){e.$Notice.error({title:t.message})})},changePage:function(t){this.tabParams.page=t,this.page=t,this.getTableData(this.tabParams)},getCreateData:function(t){this.createData=t},getCommunityList:function(){var t=this;this.$http.get("get-select-items","").then(function(e){e.data.map(function(t,e){return t.label=t.cmtName,t.value=t.cmtId,t}),t.communityList=e.data}).catch(function(e){t.$Notice.error({title:e.message})})}}}}});
//# sourceMappingURL=index.3ebea95326b7ded20499.js.map