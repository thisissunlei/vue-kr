webpackJsonp([89,147,148],{"+VsV":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".g-space-manage .u-search{height:32px;margin:16px 0;padding:0 20px}.g-space-manage .u-table{padding:0 20px}.g-space-manage .ivu-table-cell{padding:0}.g-space-manage .u-select-content{float:right;width:710px}.g-space-manage .u-select-content .u-select{float:left;width:150px;margin-left:10px}.g-space-manage .u-select-content .u-select-first{float:left;width:225px;padding:0 10px;height:32px;line-height:30px;border:1px solid #dddee1;border-radius:4px}.u-create .ivu-modal-footer{padding:0}.u-cancel-title{margin-top:30px;text-align:center}",""])},"7tHM":function(t,e,a){"use strict";var i=a("J0i4"),o=a("g4Hp"),n=a.n(o),l=a("ahuU"),s=a("nL6Y");e.a={components:{SectionTitle:i.a,CreateSpace:l.default,EditSpace:s.default},data:function(){var t=this;return{hasParent:"所有",page:1,pageSize:15,totalCount:0,tabParams:{page:1,pageSize:15,hasParent:""},formData:"",openCreate:!1,openEdit:!1,deleteSpace:!1,detail:{},formItem:{communityId:"",floor:"",type:""},communityList:[],floorList:[],typeList:[{label:"会议室",value:"BOARDROOM"},{label:"路演厅",value:"ROADSHOW_HALL"},{label:"开放区",value:"OPEN_ZONE"},{label:"走廊",value:"AISLE"},{label:"通用空间",value:"COMMON"},{label:"独立办公室",value:"OFFICE"},{label:"工位",value:"STATION"}],spaceColumns:[{title:"社区",key:"communityName",align:"center"},{title:"楼层",key:"floor",align:"center",width:50},{title:"空间名称",key:"name",align:"center"},{title:"空间类型",key:"type",align:"center",render:function(t,e){return{OFFICE:"独立办公室",BOARDROOM:"会议室",ROADSHOW_HALL:"路演厅",OPEN_ZONE:"开放区",STATION:"工位",AISLE:"走廊",COMMON:"通用空间"}[e.row.type]}},{title:"父空间名称",key:"parentName",align:"center",render:function(t,e){return e.row.parentName?e.row.parentName:"/"}},{title:"创建人",key:"creatorName",align:"center"},{title:"创建时间",key:"ctime",align:"center",render:function(t,e){if(e.row.ctime){return n.a.dateToStr("YYYY-MM-DD HH:mm",new Date(e.row.ctime))}}},{title:"操作",key:"operation",align:"center",render:function(e,a){return"OFFICE"==a.row.type||"STATION"==a.row.type?e("div",[e("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){t.jumpEdit(a.row)}}},"管理子空间")]):e("div",[e("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){t.showEdit(a.row)}}},"编辑"),e("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){t.openDelete(a.row)}}},"删除"),e("Button",{props:{type:"text",size:"small"},style:{color:"#2b85e4"},on:{click:function(){t.jumpEdit(a.row)}}},"管理子空间")])}}],tableList:[]}},mounted:function(){this.getTableData(this.tabParams),this.getCommunityList()},methods:{openDelete:function(t){t&&(this.detail=t),this.deleteSpace=!this.deleteSpace},onDeleteSpace:function(){var t=this,e={id:this.detail.id};this.$http.delete("delete-basic-space",e).then(function(e){t.$Notice.success({title:"删除成功"}),t.openDelete(),t.getTableData(t.tabParams)}).catch(function(e){t.$Notice.error({title:e.message})})},getCommunityList:function(){var t=this;this.$http.get("get-space-community-list","").then(function(e){e.data.items.map(function(t,e){return t.label=t.name,t.value=t.id,t}),t.communityList=e.data.items}).catch(function(e){t.$Notice.error({title:e.message})})},communityChange:function(t){t?this.getFloor(t):(this.floorLis=[],this.formItem.floor="",this.tabParams.floor=""),this.page=1,this.tabParams.page=1,this.tabParams.communityId=t,this.getTableData(this.tabParams)},floorChange:function(t){this.page=1,this.tabParams.page=1,this.tabParams.floor=t,this.getTableData(this.tabParams)},typeChange:function(t){this.page=1,this.tabParams.page=1,this.tabParams.type=t,this.getTableData(this.tabParams)},getFloor:function(t){var e=this,a={communityId:t};this.$http.get("get-space-floor",a).then(function(t){var a=[];t.data.floors.map(function(t,e){var i={};i.label=t,i.value=t,a.push(i)}),e.floorList=a}).catch(function(t){e.$Notice.error({title:t.message})})},showEdit:function(t){t&&(this.detail=t),this.openEdit=!this.openEdit},showCreate:function(){this.openCreate=!this.openCreate},getTableData:function(t){var e=this;this.$http.get("get-space-actions-list",t).then(function(t){e.tableList=t.data.items,e.totalCount=t.data.totalCount}).catch(function(t){e.$Notice.error({title:t.message})})},changePage:function(t){this.tabParams.page=t,this.page=t,this.getTableData(this.tabParams)},getFormData:function(t){this.formData=t},createSubmit:function(t){var e=this;this.$http.post("create-actions-space",t).then(function(t){e.$Notice.success({title:"新建成功"}),e.openCreate=!1,e.getTableData(e.tabParams)}).catch(function(t){e.$Notice.error({title:t.message})})},editSubmit:function(t){var e=this;this.$http.post("edit-actions-space",t).then(function(t){e.$Notice.success({title:"编辑成功"}),e.openEdit=!1,e.getTableData(e.tabParams)}).catch(function(t){e.$Notice.error({title:t.message})})},jumpEdit:function(t){window.open("/smart-hardware/space-manage/"+t.id+"/son-space?name="+t.name+"&communityId="+t.communityId)},hasParentChanged:function(t){console.log("param",t),this.tabParams.hasParent="有父空间"==t||"无父空间"!=t&&"",this.getTableData(this.tabParams)}}}},J0i4:function(t,e,a){"use strict";function i(t){a("pY0k")}var o=a("tBD1"),n=a("P67S"),l=a("VU/8"),s=i,r=l(o.a,n.a,!1,s,"data-v-872aada8",null);e.a=r.exports},KjFD:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-space-manage"},[a("SectionTitle",{attrs:{title:"空间管理"}}),a("div",{staticClass:"u-search"},[a("Button",{attrs:{type:"primary"},on:{click:t.showCreate}},[t._v("新建空间")]),a("div",{staticClass:"u-select-content"},[a("div",{staticClass:"u-select-first"},[a("RadioGroup",{on:{"on-change":t.hasParentChanged},model:{value:t.hasParent,callback:function(e){t.hasParent=e},expression:"hasParent"}},[a("Radio",{attrs:{label:"所有"}}),a("Radio",{attrs:{label:"有父空间"}}),a("Radio",{attrs:{label:"无父空间"}})],1)],1),a("div",{staticClass:"u-select"},[a("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择社区",filterable:"",clearable:""},on:{"on-change":t.communityChange},model:{value:t.formItem.communityId,callback:function(e){t.$set(t.formItem,"communityId",e)},expression:"formItem.communityId"}},t._l(t.communityList,function(e){return a("Option",{key:e.id,attrs:{value:""+e.id}},[t._v(t._s(e.name))])}))],1),a("div",{staticClass:"u-select"},[a("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择楼层",clearable:""},on:{"on-change":t.floorChange},model:{value:t.formItem.floor,callback:function(e){t.$set(t.formItem,"floor",e)},expression:"formItem.floor"}},t._l(t.floorList,function(e){return a("Option",{key:e.value,attrs:{value:""+e.value}},[t._v(t._s(e.label))])}))],1),a("div",{staticClass:"u-select"},[a("Select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择空间类型",clearable:""},on:{"on-change":t.typeChange},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},t._l(t.typeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)])],1),a("div",{staticClass:"u-table"},[a("Table",{attrs:{border:"",columns:t.spaceColumns,data:t.tableList}}),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{current:t.page,total:t.totalCount,"page-size":t.pageSize,"show-total":"","show-elevator":""},on:{"on-change":t.changePage}})],1)])],1),a("Modal",{staticClass:"u-create",attrs:{title:"新建空间","ok-text":"确定","cancel-text":"取消",width:"500"},model:{value:t.openCreate,callback:function(e){t.openCreate=e},expression:"openCreate"}},[t.openCreate?a("CreateSpace",{attrs:{submit:t.createSubmit,close:t.showCreate}}):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"})],1),a("Modal",{staticClass:"u-create",attrs:{title:"编辑空间","ok-text":"确定","cancel-text":"取消",width:"500"},model:{value:t.openEdit,callback:function(e){t.openEdit=e},expression:"openEdit"}},[t.openEdit?a("EditSpace",{attrs:{submit:t.editSubmit,close:t.showEdit,detail:t.detail}}):t._e(),a("div",{attrs:{slot:"footer"},slot:"footer"})],1),a("Modal",{attrs:{title:"删除","ok-text":"确定","cancel-text":"取消",width:"490"},model:{value:t.deleteSpace,callback:function(e){t.deleteSpace=e},expression:"deleteSpace"}},[a("div",{staticClass:"u-cancel-title"},[t._v("\n            确认要删除该空间吗？\n        ")]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.onDeleteSpace}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.openDelete}},[t._v("取消")])],1)])],1)},o=[],n={render:i,staticRenderFns:o};e.a=n},L5NK:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-eidt-space"},[a("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleCustom,"label-width":80}},[a("FormItem",{staticStyle:{width:"300px"},attrs:{label:"选择社区",prop:"communityId"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",filterable:"",clearable:"",value:"communityName"},on:{"on-change":t.communityChange},model:{value:t.formItem.communityId,callback:function(e){t.$set(t.formItem,"communityId",e)},expression:"formItem.communityId"}},t._l(t.communityList,function(e){return a("Option",{key:e.id,attrs:{value:""+e.id}},[t._v(t._s(e.name))])}))],1),a("FormItem",{staticStyle:{width:"300px"},attrs:{label:"楼层",prop:"floor"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:"",filterable:"",value:"floorName"},model:{value:t.formItem.floor,callback:function(e){t.$set(t.formItem,"floor",e)},expression:"formItem.floor"}},t._l(t.floorList,function(e){return a("Option",{key:e.value,attrs:{value:""+e.value}},[t._v(t._s(e.label))])}))],1),a("FormItem",{staticStyle:{width:"300px"},attrs:{label:"空间名称",prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入空间名称"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),a("FormItem",{staticStyle:{width:"300px"},attrs:{label:"空间类型",prop:"type"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},t._l(t.typeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),a("FormItem",{staticClass:"u-btn-list",staticStyle:{"padding-left":"24px","margin-top":"40px"}},[a("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formItem")}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.showCreate}},[t._v("取消")])],1)],1)],1)},o=[],n={render:i,staticRenderFns:o};e.a=n},P67S:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.classType[t.type]},[t._v("\n    "+t._s(t.title)+"\n")])},o=[],n={render:i,staticRenderFns:o};e.a=n},P8rM:function(t,e,a){"use strict";e.a={props:{close:Function,submit:Function},data:function(){return{formItem:{communityId:"",floor:"",name:"",type:""},communityList:[],floorList:[],typeList:[{label:"路演厅",value:"ROADSHOW_HALL"},{label:"开放区",value:"OPEN_ZONE"},{label:"走廊",value:"AISLE"},{label:"通用空间",value:"COMMON"}],ruleCustom:{communityId:[{required:!0,message:"请选择社区",trigger:"change"}],floor:[{required:!0,message:"请选择楼层",trigger:"change"}],name:[{required:!0,message:"请输入空间名称",trigger:"change"}],type:[{required:!0,message:"请选择空间类型",trigger:"change"}]}}},mounted:function(){this.getCommunityList()},methods:{showCreate:function(){this.close&&this.close()},getCommunityList:function(){var t=this;this.$http.get("get-space-community-list","").then(function(e){e.data.items.map(function(t,e){return t.label=t.name,t.value=t.id,t}),t.communityList=e.data.items}).catch(function(e){t.$Notice.error({title:e.message})})},communityChange:function(t){t?this.getFloor(t):(this.floorLis=[],this.formItem.floor="")},getFloor:function(t){var e=this,a={communityId:t};this.$http.get("get-space-floor",a).then(function(t){var a=[];t.data.floors.map(function(t,e){var i={};i.label=t,i.value=t,a.push(i)}),e.floorList=a}).catch(function(t){e.$Notice.error({title:t.message})})},handleSubmit:function(){var t=this,e=this.formItem;this.$refs.formItem.validate(function(a){a&&t.submit&&t.submit(e)})}}}},Ucgj:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,'.section-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:25px;position:relative}.section-title[data-v-872aada8]:before{height:24px;border:2px solid #499df1;position:absolute;width:0;content:"";display:inline-block;top:12px;left:0}.section-detail-title[data-v-872aada8]{border-bottom:1px solid #e8e9e9;height:50px;font-size:16px;color:#666;line-height:50px;padding-left:15px;position:relative}',""])},ahuU:function(t,e,a){"use strict";function i(t){a("zCnX")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("P8rM"),n=a("uPSh"),l=a("VU/8"),s=i,r=l(o.a,n.a,!1,s,null,null);e.default=r.exports},deBy:function(t,e,a){"use strict";function i(t){a("yITM")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("7tHM"),n=a("KjFD"),l=a("VU/8"),s=i,r=l(o.a,n.a,!1,s,null,null);e.default=r.exports},nL6Y:function(t,e,a){"use strict";function i(t){a("zG0+")}Object.defineProperty(e,"__esModule",{value:!0});var o=a("uGJ8"),n=a("L5NK"),l=a("VU/8"),s=i,r=l(o.a,n.a,!1,s,null,null);e.default=r.exports},pY0k:function(t,e,a){var i=a("Ucgj");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("f811f5dc",i,!0,{sourceMap:!1})},tBD1:function(t,e,a){"use strict";e.a={props:{title:String,type:{default:"listTitle",type:String}},data:function(){return{classType:{listTitle:"section-title",detailTitle:"section-detail-title"}}}}},uGJ8:function(t,e,a){"use strict";var i=a("woOf"),o=a.n(i),n=a("mvHQ"),l=a.n(n);e.a={props:{close:Function,submit:Function,detail:Object},data:function(){return{formItem:{communityId:"",floor:"",name:"",type:""},communityList:[],floorList:[],communityName:"",floorName:"",typeList:[{label:"路演厅",value:"ROADSHOW_HALL"},{label:"开放区",value:"OPEN_ZONE"},{label:"走廊",value:"AISLE"},{label:"通用空间",value:"COMMON"}],ruleCustom:{communityId:[{required:!0,message:"请选择社区",trigger:"change"}],floor:[{required:!0,message:"请选择楼层",trigger:"change"}],name:[{required:!0,message:"请输入空间名称",trigger:"change"}],type:[{required:!0,message:"请选择空间类型",trigger:"change"}]}}},created:function(){},mounted:function(){this.getCommunityList(),this.getInfo()},methods:{getInfo:function(){var t=this,e=l()(this.detail.id),a={id:e},i=this;this.$http.get("get-space-edit-info",a).then(function(e){var a=o()({},e.data);a.communityId=l()(e.data.communityId),a.floor=l()(e.data.floor),t.formItem=a,t.formItem.communityId=a.communityId,t.communityName=e.data.communityName,t.floorName=e.data.floor,setTimeout(function(){i.communityChange(e.data.communityId,e.data.floor)},100)}).catch(function(e){t.$Notice.error({title:e.message})})},showCreate:function(){this.close&&this.close()},getCommunityList:function(){var t=this;this.$http.get("get-space-community-list","").then(function(e){e.data.items.map(function(t,e){return t.label=t.name,t.value=t.id,t}),t.communityList=e.data.items,console.log(t.communityList)}).catch(function(e){t.$Notice.error({title:e.message})})},communityChange:function(t,e){this.floorLis=[],this.formItem.floor="",e&&(this.formItem.floor=l()(e),this.floorName=e),t&&this.getFloor(t)},getFloor:function(t){var e=this,a={communityId:t};this.$http.get("get-space-floor",a).then(function(t){var a=[];t.data.floors.map(function(t,e){var i={};i.label=t,i.value=t,a.push(i)}),e.floorList=a}).catch(function(t){e.$Notice.error({title:t.message})})},handleSubmit:function(){var t=this,e=l()(this.detail.id),a=o()({},this.formItem);a.spaceId=e,this.$refs.formItem.validate(function(e){e&&t.submit&&t.submit(a)})}}}},uPSh:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-create-space"},[a("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleCustom,"label-width":80}},[a("FormItem",{staticStyle:{width:"300px"},attrs:{label:"选择社区",prop:"communityId"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{"on-change":t.communityChange},model:{value:t.formItem.communityId,callback:function(e){t.$set(t.formItem,"communityId",e)},expression:"formItem.communityId"}},t._l(t.communityList,function(e){return a("Option",{key:e.id,attrs:{value:""+e.id}},[t._v(t._s(e.name))])}))],1),a("FormItem",{staticStyle:{width:"300px"},attrs:{label:"楼层",prop:"floor"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.formItem.floor,callback:function(e){t.$set(t.formItem,"floor",e)},expression:"formItem.floor"}},t._l(t.floorList,function(e){return a("Option",{key:e.value,attrs:{value:""+e.value}},[t._v(t._s(e.label))])}))],1),a("FormItem",{staticStyle:{width:"300px"},attrs:{label:"空间名称",prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入空间名称"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name",e)},expression:"formItem.name"}})],1),a("FormItem",{staticStyle:{width:"300px"},attrs:{label:"空间类型",prop:"type"}},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择",clearable:""},model:{value:t.formItem.type,callback:function(e){t.$set(t.formItem,"type",e)},expression:"formItem.type"}},t._l(t.typeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),a("FormItem",{staticClass:"u-btn-list",staticStyle:{"padding-left":"24px","margin-top":"40px"}},[a("Button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formItem")}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:t.showCreate}},[t._v("取消")])],1)],1)],1)},o=[],n={render:i,staticRenderFns:o};e.a=n},wffq:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".g-create-space{width:300px;margin:10px auto 0}.g-create-space .u-btn-list .ivu-form-item-content{margin-left:60px!important}",""])},x8bQ:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,".g-eidt-space{width:300px;margin:10px auto 0}.g-eidt-space .u-btn-list .ivu-form-item-content{margin-left:60px!important}",""])},yITM:function(t,e,a){var i=a("+VsV");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("6a4d1c82",i,!0,{sourceMap:!1})},zCnX:function(t,e,a){var i=a("wffq");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("01fe4a0a",i,!0,{sourceMap:!1})},"zG0+":function(t,e,a){var i=a("x8bQ");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("2e1d7b2f",i,!0,{sourceMap:!1})}});
//# sourceMappingURL=index.9819076af9e935670498.js.map